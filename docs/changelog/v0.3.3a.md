# v0.3.3a: Editor Tab ViewModel - Detailed Changelog

## Overview

Creates the EditorTabViewModel for individual editor tabs managing document state, dirty tracking, caret position, encoding detection, and syntax highlighting configuration.

## Files Added

### [EditorTabViewModel.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Desktop/ViewModels/EditorTabViewModel.cs)
- ~320 lines with comprehensive documentation
- Factory methods: `FromFile()`, `CreateNew()`
- Hash-based dirty state tracking
- Caret position tracking (line, column, selection)
- Line ending detection (LF, CRLF, CR)
- Integration with `LanguageDetector` for language detection
- `IDisposable` implementation for event cleanup

### [EditorTabViewModelTests.cs](file:///Users/turtle1/Documents/GitHub/aintern/tests/AIntern.Desktop.Tests/ViewModels/EditorTabViewModelTests.cs)
- 31 unit tests covering all acceptance criteria

## Packages Added

| Package | Version | Purpose |
|---------|---------|---------|
| Avalonia.AvaloniaEdit | 11.3.0 | Text editor control with TextDocument |

## Properties Reference

| Property | Type | Description |
|----------|------|-------------|
| Id | Guid | Unique tab identifier |
| FilePath | string | Full path (empty for new files) |
| FileName | string | Display name |
| Document | TextDocument | AvaloniaEdit document |
| Language | string? | Language identifier |
| IsDirty | bool | Has unsaved changes |
| IsActive | bool | Currently selected |
| CaretLine | int | Current line (1-based) |
| CaretColumn | int | Current column (1-based) |
| SelectionLength | int | Selected character count |
| Encoding | string | File encoding |
| LineEnding | string | Line ending type |
| DisplayTitle | string | FileName + "•" if dirty |
| IsNewFile | bool | FilePath is empty |

## Acceptance Criteria Met

- ✅ FromFile creates tab with correct path and name
- ✅ FromFile detects language from extension
- ✅ CreateNew creates tab with suggested name
- ✅ IsDirty becomes true when document edited
- ✅ IsDirty becomes false when undone to saved state
- ✅ MarkAsSaved resets dirty and updates path
- ✅ UpdateCaretPosition updates display string
- ✅ DisplayTitle includes "•" when dirty
- ✅ LineEnding correctly detected (LF/CRLF)
- ✅ Dispose unsubscribes from document events

## Dependencies

- v0.3.1c: LanguageDetector for language detection
