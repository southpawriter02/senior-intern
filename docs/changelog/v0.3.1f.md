# v0.3.1f: Repository Layer - Detailed Changelog

## Overview

Enhances WorkspaceRepository with max recent enforcement and adds workspace/editor settings.

## Modified Files

| File | Changes |
|------|---------|
| [WorkspaceRepository.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Data/Repositories/WorkspaceRepository.cs) | Added `EnforceMaxRecentAsync` (max 20) |
| [AppSettings.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Core/Models/AppSettings.cs) | Added 10 new properties |
| [DataServiceCollectionExtensions.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Data/DataServiceCollectionExtensions.cs) | Registered IWorkspaceRepository |
| [ServiceCollectionExtensions.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Desktop/Extensions/ServiceCollectionExtensions.cs) | Registered workspace services |

## New Tests

| File | Test Count |
|------|------------|
| [WorkspaceRepositoryTests.cs](file:///Users/turtle1/Documents/GitHub/aintern/tests/AIntern.Data.Tests/Workspace/WorkspaceRepositoryTests.cs) | 10 tests |

## Features

### Max Recent Enforcement
- Hard limit of 20 workspaces in database
- Oldest non-pinned removed when limit exceeded
- Pinned workspaces always preserved

### AppSettings Extensions
**Workspace:** ShowHiddenFiles, UseGitIgnore, MaxRecentWorkspaces (display), CustomIgnorePatterns  
**Editor:** WordWrap, TabSize, ShowLineNumbers, HighlightCurrentLine, EditorFontFamily, EditorFontSize

## Test Results

```
Test summary: total: 43, failed: 0, succeeded: 43
Build succeeded in 2.5s
```
