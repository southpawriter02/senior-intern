# v0.3.1e: Workspace Service - Detailed Changelog

## Overview

Implements `IWorkspaceService` for workspace lifecycle management with auto-save and event notifications.

## New Files

| File | Description |
|------|-------------|
| [WorkspaceEvents.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Core/Events/WorkspaceEvents.cs) | Event args & enums |
| [IWorkspaceService.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Core/Interfaces/IWorkspaceService.cs) | Interface (140 lines) |
| [IWorkspaceRepository.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Data/Repositories/IWorkspaceRepository.cs) | Repository interface |
| [WorkspaceRepository.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Data/Repositories/WorkspaceRepository.cs) | EF Core impl |
| [WorkspaceService.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Services/WorkspaceService.cs) | Service (385 lines) |
| [WorkspaceServiceTests.cs](file:///Users/turtle1/Documents/GitHub/aintern/tests/AIntern.Services.Tests/Workspace/WorkspaceServiceTests.cs) | 18 tests |

## Features

### Workspace Lifecycle
- `OpenWorkspaceAsync` - Restore or create, load .gitignore, start watcher
- `CloseWorkspaceAsync` - Save state, stop watcher, raise event

### Recent Workspaces
- `GetRecentWorkspacesAsync` - Filters invalid paths, background cleanup
- `SetPinnedAsync`, `RenameWorkspaceAsync`, `RemoveFromRecentAsync`

### State Management
- `UpdateOpenFiles`, `UpdateExpandedFolders` - Track editor state
- 30-second auto-save timer
- `RestoreLastWorkspaceAsync` - Respects settings

### Events
- `WorkspaceChanged` - Opened, Closed, Refreshed
- `StateChanged` - OpenFilesChanged, ExpandedFoldersChanged

## Test Results

```
Test summary: total: 34, failed: 0, succeeded: 34
Build succeeded in 2.4s
```
