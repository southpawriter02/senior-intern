# Design Specification: AIntern v0.7.5b "Index Manager Dialog UI"

## Overview

**Version**: v0.7.5b
**Parent**: v0.7.5 UI & Integration
**Focus**: XAML views for Index Manager dialog, Pattern Editor dialog, and code-behind files

### Purpose

This sub-version creates the user interface for managing knowledge indexes:
1. `IndexManagerDialog.axaml` - Main dialog for workspace selection, index status, model configuration, indexing options, file filters, and action buttons
2. `IndexManagerDialog.axaml.cs` - Code-behind with dialog lifecycle and ViewModel binding
3. `PatternEditorDialog.axaml` - Secondary dialog for editing include/exclude glob patterns

### Dependencies

**From v0.7.5a (RAG Settings Model & Storage)**:
- `RagSettings` model for default values and validation
- `WorkspaceIndexInfo` model for index status display

**From Avalonia UI Framework**:
- `Window` base class for dialogs
- `NumericUpDown`, `CheckBox`, `TextBox`, `Button` controls
- `ScrollViewer` for responsive layout
- Style selectors for theming

**From Existing UI Infrastructure**:
- `LoadingSpinner` control from v0.3.x
- Dark theme color resources from `Dark.axaml`
- Icon geometries from `Icons.axaml`

---

## Architecture

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                   v0.7.5b Index Manager Dialog UI Architecture               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        IndexManagerDialog                                │ │
│  │  src/AIntern.Desktop/Views/Dialogs/IndexManagerDialog.axaml             │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                          │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Header Section                                                    │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Title: "Knowledge Index Manager"                           │  │  │ │
│  │  │  │  Subtitle: "Manage your codebase index for AI-assisted..."  │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                          │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Main Content (ScrollViewer)                                       │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 1: Workspace Selection                             │  │  │ │
│  │  │  │  ├── TextBox (ReadOnly) + Browse Button                     │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 2: Index Status                                    │  │  │ │
│  │  │  │  ├── Status Indicator (Ellipse + Text)                      │  │  │ │
│  │  │  │  ├── Statistics Grid (Files | Chunks | Size)                │  │  │ │
│  │  │  │  └── Last Updated Text                                      │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 3: Embedding Model                                 │  │  │ │
│  │  │  │  ├── TextBox (ReadOnly) + Browse Button                     │  │  │ │
│  │  │  │  ├── Model Info (Dimension | Max Tokens)                    │  │  │ │
│  │  │  │  └── Loading Indicator (LoadingSpinner)                     │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 4: Index Options                                   │  │  │ │
│  │  │  │  ├── CheckBox: Auto-index on file changes                   │  │  │ │
│  │  │  │  ├── CheckBox: Respect .gitignore                           │  │  │ │
│  │  │  │  ├── CheckBox: Index hidden files                           │  │  │ │
│  │  │  │  └── NumericUpDown Grid (Chunk Size | Overlap | Max File)   │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 5: File Filters                                    │  │  │ │
│  │  │  │  ├── Include Patterns TextBox                               │  │  │ │
│  │  │  │  ├── Exclude Patterns TextBox                               │  │  │ │
│  │  │  │  └── Edit Patterns Button → PatternEditorDialog            │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐  │  │ │
│  │  │  │  Section 6: Actions                                         │  │  │ │
│  │  │  │  ├── Reindex All Button (accent)                            │  │  │ │
│  │  │  │  ├── Update Changed Button                                  │  │  │ │
│  │  │  │  └── Clear Index Button                                     │  │  │ │
│  │  │  └─────────────────────────────────────────────────────────────┘  │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                          │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Footer Section                                                    │  │ │
│  │  │  ├── Validation Error Display (Warning Icon + Message)            │  │ │
│  │  │  ├── Cancel Button                                                 │  │ │
│  │  │  └── Save Button (accent)                                          │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        PatternEditorDialog                               │ │
│  │  src/AIntern.Desktop/Views/Dialogs/PatternEditorDialog.axaml           │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                          │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  TabControl                                                        │  │ │
│  │  │  ├── Tab: Include Patterns                                        │  │ │
│  │  │  │   ├── Instruction TextBlock                                    │  │ │
│  │  │  │   ├── Multi-line TextBox (monospace font)                      │  │ │
│  │  │  │   └── Add Common | Clear Buttons                               │  │ │
│  │  │  ├── Tab: Exclude Patterns                                        │  │ │
│  │  │  │   ├── Instruction TextBlock                                    │  │ │
│  │  │  │   ├── Multi-line TextBox (monospace font)                      │  │ │
│  │  │  │   └── Add Common | Clear Buttons                               │  │ │
│  │  │  └── Footer: Cancel | Apply Buttons                               │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │                                                                          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## Visual Layout

### Index Manager Dialog Layout

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  Knowledge Index Manager                                                     │
│  Manage your codebase index for AI-assisted coding                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Workspace                                                                   │
│  ┌─────────────────────────────────────────────────────────────┬──────────┐ │
│  │ /Users/dev/projects/myapp                                   │ Browse...│ │
│  └─────────────────────────────────────────────────────────────┴──────────┘ │
│                                                                              │
│  Index Status                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  ● Indexed                                                               │ │
│  │                                                                          │ │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                   │ │
│  │  │    1,234     │  │    8,567     │  │   12.4 MB    │                   │ │
│  │  │    Files     │  │    Chunks    │  │     Size     │                   │ │
│  │  └──────────────┘  └──────────────┘  └──────────────┘                   │ │
│  │                                                                          │ │
│  │  Last updated: 2 hours ago                                               │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  Embedding Model                                                             │
│  ┌─────────────────────────────────────────────────────────────┬──────────┐ │
│  │ /models/nomic-embed-text-v1.5.Q8_0.gguf                     │ Browse...│ │
│  └─────────────────────────────────────────────────────────────┴──────────┘ │
│  Dimension: 768  |  Max Tokens: 8192                                        │
│                                                                              │
│  Index Options                                                               │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  ☑ Auto-index on file changes                                           │ │
│  │  ☑ Respect .gitignore                                                   │ │
│  │  ☐ Index hidden files                                                   │ │
│  │                                                                          │ │
│  │  Chunk Size: [512  ▲▼]  Overlap: [64   ▲▼]  Max File (KB): [1024 ▲▼]   │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  File Filters                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Include Patterns:                                                       │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │ *.cs, *.ts, *.js, *.py, *.md, ...                                 │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │  Exclude Patterns:                                                       │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │ **/node_modules/**, **/bin/**, **/obj/**, ...                     │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  │  [Edit Patterns...]                                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  Actions                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  [▶ Reindex All]  [↻ Update Changed]  [⊗ Clear Index]                   │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
├─────────────────────────────────────────────────────────────────────────────┤
│  ⚠ Chunk overlap must be less than chunk size          [Cancel]  [  Save  ]│
└─────────────────────────────────────────────────────────────────────────────┘
```

### Pattern Editor Dialog Layout

```
┌─────────────────────────────────────────────────────────────────┐
│  Edit File Patterns                                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────┬─────────┐                                          │
│  │ Include │ Exclude │                                          │
│  └─────────┴─────────┘                                          │
│                                                                  │
│  Files matching these patterns will be indexed (one per line):  │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │ **/*.cs                                                    │  │
│  │ **/*.ts                                                    │  │
│  │ **/*.tsx                                                   │  │
│  │ **/*.js                                                    │  │
│  │ **/*.jsx                                                   │  │
│  │ **/*.py                                                    │  │
│  │ **/*.md                                                    │  │
│  │ **/*.json                                                  │  │
│  │                                                            │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                  │
│  [Add Common]  [Clear]                                          │
│                                                                  │
├─────────────────────────────────────────────────────────────────┤
│                                      [Cancel]  [  Apply  ]      │
└─────────────────────────────────────────────────────────────────┘
```

---

## Style Definitions

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                          Index Manager Dialog Styles                          │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Section Header Style                                                    │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Selector: TextBlock.SectionHeader                                │  │ │
│  │  │  ├── FontWeight: SemiBold                                         │  │ │
│  │  │  ├── FontSize: 14                                                 │  │ │
│  │  │  └── Margin: 0,0,0,8                                              │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Section Border Style                                                    │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Selector: Border.SectionBorder                                   │  │ │
│  │  │  ├── BorderBrush: SystemControlForegroundBaseMediumLowBrush       │  │ │
│  │  │  ├── BorderThickness: 1                                           │  │ │
│  │  │  ├── CornerRadius: 4                                              │  │ │
│  │  │  ├── Padding: 12                                                  │  │ │
│  │  │  └── Margin: 0,0,0,16                                             │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Status Indicator Colors                                                 │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Indexed:       LimeGreen (#32CD32)                               │  │ │
│  │  │  Not Indexed:   Gray (#808080)                                    │  │ │
│  │  │  Indexing:      DodgerBlue (#1E90FF)                              │  │ │
│  │  │  Error:         Tomato (#FF6347)                                  │  │ │
│  │  │  Stale:         Orange (#FFA500)                                  │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Button Styles                                                           │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Classes.accent:                                                  │  │ │
│  │  │  ├── Background: AccentBrush                                      │  │ │
│  │  │  └── Foreground: White                                            │  │ │
│  │  │                                                                    │  │ │
│  │  │  Default Button:                                                   │  │ │
│  │  │  ├── Background: SystemControlBackgroundBaseLowBrush              │  │ │
│  │  │  └── Foreground: SystemControlForegroundBaseHighBrush             │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## File Specifications

### 1. IndexManagerDialog.axaml

**Location**: `src/AIntern.Desktop/Views/Dialogs/IndexManagerDialog.axaml`
**Purpose**: Main dialog for managing knowledge indexes

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:AIntern.Desktop.ViewModels"
        xmlns:controls="using:AIntern.Desktop.Controls"
        mc:Ignorable="d"
        x:Class="AIntern.Desktop.Views.Dialogs.IndexManagerDialog"
        x:DataType="vm:IndexManagerViewModel"
        Title="Knowledge Index Manager"
        Width="650"
        Height="700"
        MinWidth="550"
        MinHeight="600"
        WindowStartupLocation="CenterOwner"
        CanResize="True">

    <Window.Styles>
        <!-- Section Header Style -->
        <Style Selector="TextBlock.SectionHeader">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <!-- Section Border Style -->
        <Style Selector="Border.SectionBorder">
            <Setter Property="BorderBrush" 
                    Value="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>
        
        <!-- Statistic Value Style -->
        <Style Selector="TextBlock.StatValue">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        
        <!-- Statistic Label Style -->
        <Style Selector="TextBlock.StatLabel">
            <Setter Property="Opacity" Value="0.7"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        
        <!-- Header -->
        <Border Grid.Row="0"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                Padding="16">
            <StackPanel>
                <TextBlock Text="Knowledge Index Manager"
                           FontSize="20"
                           FontWeight="Bold"/>
                <TextBlock Text="Manage your codebase index for AI-assisted coding"
                           Opacity="0.7"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" Padding="16">
            <StackPanel>

                <!-- Section 1: Workspace Selection -->
                <TextBlock Text="Workspace" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBox Grid.Column="0"
                                 Text="{Binding WorkspacePath}"
                                 Watermark="Select a workspace folder..."
                                 IsReadOnly="True"/>
                        <Button Grid.Column="1"
                                Content="Browse..."
                                Margin="8,0,0,0"
                                Command="{Binding BrowseWorkspaceCommand}"/>
                    </Grid>
                </Border>

                <!-- Section 2: Index Status -->
                <TextBlock Text="Index Status" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <Grid RowDefinitions="Auto,Auto,Auto">
                        
                        <!-- Status Indicator -->
                        <StackPanel Grid.Row="0"
                                    Orientation="Horizontal"
                                    Margin="0,0,0,12">
                            <Ellipse Width="12" Height="12"
                                     Fill="{Binding StatusColor}"
                                     Margin="0,0,8,0"/>
                            <TextBlock Text="{Binding StatusText}"
                                       FontWeight="SemiBold"/>
                        </StackPanel>

                        <!-- Statistics Grid -->
                        <Grid Grid.Row="1"
                              ColumnDefinitions="*,*,*"
                              IsVisible="{Binding IsIndexed}">
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="{Binding FileCount, StringFormat={}{0:N0}}"
                                           Classes="StatValue"/>
                                <TextBlock Text="Files" Classes="StatLabel"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1">
                                <TextBlock Text="{Binding ChunkCount, StringFormat={}{0:N0}}"
                                           Classes="StatValue"/>
                                <TextBlock Text="Chunks" Classes="StatLabel"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="{Binding IndexSize}"
                                           Classes="StatValue"/>
                                <TextBlock Text="Size" Classes="StatLabel"/>
                            </StackPanel>
                        </Grid>

                        <!-- Last Updated -->
                        <TextBlock Grid.Row="2"
                                   Text="{Binding LastUpdatedText}"
                                   Opacity="0.7"
                                   Margin="0,12,0,0"
                                   IsVisible="{Binding IsIndexed}"/>
                    </Grid>
                </Border>

                <!-- Section 3: Embedding Model -->
                <TextBlock Text="Embedding Model" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <StackPanel>
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBox Grid.Column="0"
                                     Text="{Binding EmbeddingModelPath}"
                                     Watermark="Select an embedding model..."
                                     IsReadOnly="True"/>
                            <Button Grid.Column="1"
                                    Content="Browse..."
                                    Margin="8,0,0,0"
                                    Command="{Binding BrowseEmbeddingModelCommand}"/>
                        </Grid>

                        <!-- Model Info -->
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,8,0,0"
                                    IsVisible="{Binding IsModelLoaded}">
                            <TextBlock Text="Dimension: "/>
                            <TextBlock Text="{Binding EmbeddingDimension}" 
                                       FontWeight="SemiBold"/>
                            <TextBlock Text="  |  Max Tokens: " Margin="8,0,0,0"/>
                            <TextBlock Text="{Binding MaxTokens}" 
                                       FontWeight="SemiBold"/>
                        </StackPanel>

                        <!-- Model Loading Status -->
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,8,0,0"
                                    IsVisible="{Binding IsLoadingModel}">
                            <controls:LoadingSpinner Width="16" Height="16"/>
                            <TextBlock Text="Loading model..." Margin="8,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Section 4: Index Options -->
                <TextBlock Text="Index Options" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <StackPanel>
                        <!-- Checkboxes -->
                        <CheckBox Content="Auto-index on file changes"
                                  IsChecked="{Binding AutoIndexEnabled}"
                                  Margin="0,0,0,8"/>
                        <CheckBox Content="Respect .gitignore"
                                  IsChecked="{Binding RespectGitignore}"
                                  Margin="0,0,0,8"/>
                        <CheckBox Content="Index hidden files"
                                  IsChecked="{Binding IndexHiddenFiles}"
                                  Margin="0,0,0,12"/>

                        <!-- Numeric Options -->
                        <Grid ColumnDefinitions="Auto,100,Auto,100,Auto,100" 
                              RowDefinitions="Auto">
                            <TextBlock Grid.Column="0"
                                       Text="Chunk Size:"
                                       VerticalAlignment="Center"/>
                            <NumericUpDown Grid.Column="1"
                                           Value="{Binding ChunkSize}"
                                           Minimum="100"
                                           Maximum="2000"
                                           Increment="64"
                                           Margin="8,0,16,0"/>

                            <TextBlock Grid.Column="2"
                                       Text="Overlap:"
                                       VerticalAlignment="Center"/>
                            <NumericUpDown Grid.Column="3"
                                           Value="{Binding ChunkOverlap}"
                                           Minimum="0"
                                           Maximum="256"
                                           Increment="16"
                                           Margin="8,0,16,0"/>

                            <TextBlock Grid.Column="4"
                                       Text="Max File (KB):"
                                       VerticalAlignment="Center"/>
                            <NumericUpDown Grid.Column="5"
                                           Value="{Binding MaxFileSizeKb}"
                                           Minimum="1"
                                           Maximum="10240"
                                           Increment="256"
                                           Margin="8,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Section 5: File Filters -->
                <TextBlock Text="File Filters" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <StackPanel>
                        <TextBlock Text="Include Patterns:" Margin="0,0,0,4"/>
                        <TextBox Text="{Binding IncludePatterns}"
                                 Watermark="*.cs, *.ts, *.py, ..."
                                 AcceptsReturn="False"
                                 Margin="0,0,0,12"/>

                        <TextBlock Text="Exclude Patterns:" Margin="0,0,0,4"/>
                        <TextBox Text="{Binding ExcludePatterns}"
                                 Watermark="**/node_modules/**, **/bin/**, ..."
                                 AcceptsReturn="False"/>

                        <Button Content="Edit Patterns..."
                                HorizontalAlignment="Left"
                                Margin="0,8,0,0"
                                Command="{Binding EditPatternsCommand}"/>
                    </StackPanel>
                </Border>

                <!-- Section 6: Actions -->
                <TextBlock Text="Actions" Classes="SectionHeader"/>
                <Border Classes="SectionBorder">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="Reindex All"
                                Command="{Binding ReindexAllCommand}"
                                IsEnabled="{Binding CanStartIndexing}"
                                Classes="accent"/>
                        <Button Content="Update Changed"
                                Command="{Binding UpdateChangedCommand}"
                                IsEnabled="{Binding CanStartIndexing}"/>
                        <Button Content="Clear Index"
                                Command="{Binding ClearIndexCommand}"
                                IsEnabled="{Binding IsIndexed}"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="2"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                Padding="16">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <!-- Validation Errors -->
                <StackPanel Grid.Column="0"
                            Orientation="Horizontal"
                            IsVisible="{Binding HasValidationErrors}">
                    <PathIcon Data="{StaticResource warning_regular}"
                              Foreground="Orange"
                              Width="16" Height="16"/>
                    <TextBlock Text="{Binding ValidationErrorMessage}"
                               Foreground="Orange"
                               Margin="8,0,0,0"/>
                </StackPanel>

                <!-- Action Buttons -->
                <Button Grid.Column="1"
                        Content="Cancel"
                        Command="{Binding CancelCommand}"
                        Margin="0,0,8,0"/>
                <Button Grid.Column="2"
                        Content="Save"
                        Command="{Binding SaveCommand}"
                        Classes="accent"/>
            </Grid>
        </Border>
    </Grid>
</Window>
```

---

### 2. IndexManagerDialog.axaml.cs

**Location**: `src/AIntern.Desktop/Views/Dialogs/IndexManagerDialog.axaml.cs`
**Purpose**: Code-behind for dialog lifecycle and ViewModel binding

```csharp
namespace AIntern.Desktop.Views.Dialogs;

using Avalonia.Controls;
using AIntern.Desktop.ViewModels;

/// <summary>
/// Code-behind for the Index Manager dialog.
/// Handles dialog lifecycle and ViewModel integration.
/// </summary>
public partial class IndexManagerDialog : Window
{
    /// <summary>
    /// Default constructor for XAML designer.
    /// </summary>
    public IndexManagerDialog()
    {
        InitializeComponent();
    }

    /// <summary>
    /// Constructor with ViewModel injection.
    /// </summary>
    /// <param name="viewModel">The IndexManagerViewModel instance.</param>
    public IndexManagerDialog(IndexManagerViewModel viewModel) : this()
    {
        DataContext = viewModel;
        
        // Subscribe to close request from ViewModel
        viewModel.CloseRequested += OnCloseRequested;
    }

    /// <summary>
    /// Handle close request from ViewModel.
    /// </summary>
    /// <param name="sender">Event source.</param>
    /// <param name="result">Dialog result (true=saved, false=cancelled).</param>
    private void OnCloseRequested(object? sender, bool result)
    {
        Close(result);
    }

    /// <summary>
    /// Cleanup when dialog is closed.
    /// </summary>
    /// <param name="e">Event args.</param>
    protected override void OnClosed(EventArgs e)
    {
        base.OnClosed(e);
        
        // Unsubscribe from ViewModel events
        if (DataContext is IndexManagerViewModel viewModel)
        {
            viewModel.CloseRequested -= OnCloseRequested;
        }
    }
}
```

---

### 3. PatternEditorDialog.axaml

**Location**: `src/AIntern.Desktop/Views/Dialogs/PatternEditorDialog.axaml`
**Purpose**: Dialog for editing include/exclude patterns

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:AIntern.Desktop.ViewModels"
        mc:Ignorable="d"
        x:Class="AIntern.Desktop.Views.Dialogs.PatternEditorDialog"
        x:DataType="vm:PatternEditorViewModel"
        Title="Edit File Patterns"
        Width="500"
        Height="500"
        MinWidth="400"
        MinHeight="400"
        WindowStartupLocation="CenterOwner"
        CanResize="True">

    <Window.Styles>
        <!-- Monospace TextBox for patterns -->
        <Style Selector="TextBox.PatternEditor">
            <Setter Property="FontFamily" Value="Consolas,Monaco,Courier New,monospace"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="*,Auto" Margin="16">
        
        <!-- Tab Control -->
        <TabControl Grid.Row="0">
            
            <!-- Include Patterns Tab -->
            <TabItem Header="Include">
                <Grid RowDefinitions="Auto,*,Auto">
                    <TextBlock Grid.Row="0"
                               Text="Files matching these patterns will be indexed (one per line):"
                               Margin="0,0,0,8"
                               TextWrapping="Wrap"/>
                    <TextBox Grid.Row="1"
                             x:Name="IncludePatternsTextBox"
                             Text="{Binding IncludePatterns}"
                             Classes="PatternEditor"/>
                    <StackPanel Grid.Row="2" 
                                Orientation="Horizontal" 
                                Margin="0,8,0,0">
                        <Button Content="Add Common" 
                                Command="{Binding AddCommonIncludesCommand}"/>
                        <Button Content="Clear" 
                                Command="{Binding ClearIncludesCommand}" 
                                Margin="8,0,0,0"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Exclude Patterns Tab -->
            <TabItem Header="Exclude">
                <Grid RowDefinitions="Auto,*,Auto">
                    <TextBlock Grid.Row="0"
                               Text="Files matching these patterns will be skipped (one per line):"
                               Margin="0,0,0,8"
                               TextWrapping="Wrap"/>
                    <TextBox Grid.Row="1"
                             x:Name="ExcludePatternsTextBox"
                             Text="{Binding ExcludePatterns}"
                             Classes="PatternEditor"/>
                    <StackPanel Grid.Row="2" 
                                Orientation="Horizontal" 
                                Margin="0,8,0,0">
                        <Button Content="Add Common" 
                                Command="{Binding AddCommonExcludesCommand}"/>
                        <Button Content="Clear" 
                                Command="{Binding ClearExcludesCommand}" 
                                Margin="8,0,0,0"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
        </TabControl>

        <!-- Footer Buttons -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Cancel" 
                    Command="{Binding CancelCommand}"/>
            <Button Content="Apply" 
                    Command="{Binding ApplyCommand}" 
                    Classes="accent" 
                    Margin="8,0,0,0"/>
        </StackPanel>
    </Grid>
</Window>
```

---

## Data Binding Summary

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                     IndexManagerDialog Data Bindings                          │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Property Bindings                                                       │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  UI Element              │ ViewModel Property        │ Mode       │  │ │
│  │  │  ────────────────────────┼───────────────────────────┼────────────│  │ │
│  │  │  Workspace TextBox       │ WorkspacePath             │ TwoWay     │  │ │
│  │  │  Status Ellipse Fill     │ StatusColor               │ OneWay     │  │ │
│  │  │  Status Text             │ StatusText                │ OneWay     │  │ │
│  │  │  Files Count             │ FileCount                 │ OneWay     │  │ │
│  │  │  Chunks Count            │ ChunkCount                │ OneWay     │  │ │
│  │  │  Index Size              │ IndexSize                 │ OneWay     │  │ │
│  │  │  Last Updated Text       │ LastUpdatedText           │ OneWay     │  │ │
│  │  │  Model Path TextBox      │ EmbeddingModelPath        │ TwoWay     │  │ │
│  │  │  Dimension Text          │ EmbeddingDimension        │ OneWay     │  │ │
│  │  │  Max Tokens Text         │ MaxTokens                 │ OneWay     │  │ │
│  │  │  Auto-Index CheckBox     │ AutoIndexEnabled          │ TwoWay     │  │ │
│  │  │  Gitignore CheckBox      │ RespectGitignore          │ TwoWay     │  │ │
│  │  │  Hidden Files CheckBox   │ IndexHiddenFiles          │ TwoWay     │  │ │
│  │  │  Chunk Size NumericUpDown│ ChunkSize                 │ TwoWay     │  │ │
│  │  │  Overlap NumericUpDown   │ ChunkOverlap              │ TwoWay     │  │ │
│  │  │  Max File NumericUpDown  │ MaxFileSizeKb             │ TwoWay     │  │ │
│  │  │  Include Patterns TextBox│ IncludePatterns           │ TwoWay     │  │ │
│  │  │  Exclude Patterns TextBox│ ExcludePatterns           │ TwoWay     │  │ │
│  │  │  Error Message           │ ValidationErrorMessage    │ OneWay     │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Visibility Bindings                                                     │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  UI Element              │ ViewModel Property        │ Condition  │  │ │
│  │  │  ────────────────────────┼───────────────────────────┼────────────│  │ │
│  │  │  Statistics Grid         │ IsIndexed                 │ Visible if │  │ │
│  │  │  Last Updated Text       │ IsIndexed                 │ Visible if │  │ │
│  │  │  Model Info Panel        │ IsModelLoaded             │ Visible if │  │ │
│  │  │  Loading Spinner Panel   │ IsLoadingModel            │ Visible if │  │ │
│  │  │  Validation Error Panel  │ HasValidationErrors       │ Visible if │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Command Bindings                                                        │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Button                  │ Command                   │ CanExecute │  │ │
│  │  │  ────────────────────────┼───────────────────────────┼────────────│  │ │
│  │  │  Browse Workspace        │ BrowseWorkspaceCommand    │ Always     │  │ │
│  │  │  Browse Model            │ BrowseEmbeddingModelCommand│ Always    │  │ │
│  │  │  Edit Patterns           │ EditPatternsCommand       │ Always     │  │ │
│  │  │  Reindex All             │ ReindexAllCommand         │ CanStartIdx│  │ │
│  │  │  Update Changed          │ UpdateChangedCommand      │ CanStartIdx│  │ │
│  │  │  Clear Index             │ ClearIndexCommand         │ IsIndexed  │  │ │
│  │  │  Cancel                  │ CancelCommand             │ Always     │  │ │
│  │  │  Save                    │ SaveCommand               │ Always     │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## File Summary

### Files to Create

| File | Location | Purpose |
|------|----------|---------|
| `IndexManagerDialog.axaml` | `src/AIntern.Desktop/Views/Dialogs/` | Main dialog XAML layout |
| `IndexManagerDialog.axaml.cs` | `src/AIntern.Desktop/Views/Dialogs/` | Dialog code-behind |
| `PatternEditorDialog.axaml` | `src/AIntern.Desktop/Views/Dialogs/` | Pattern editor dialog XAML |

### Directory Structure

```
src/AIntern.Desktop/
└── Views/
    └── Dialogs/
        ├── IndexManagerDialog.axaml      (NEW - v0.7.5b)
        ├── IndexManagerDialog.axaml.cs   (NEW - v0.7.5b)
        └── PatternEditorDialog.axaml     (NEW - v0.7.5b)
```

---

## Acceptance Criteria

- [ ] `IndexManagerDialog.axaml` contains all 6 sections with proper layout
- [ ] Dialog uses `ScrollViewer` for responsive content on smaller screens
- [ ] Section headers use `SectionHeader` style class
- [ ] Section containers use `SectionBorder` style class
- [ ] Status indicator uses color-coded ellipse bound to `StatusColor`
- [ ] Statistics display uses prominent font size (24pt) with labels
- [ ] Model info shows dimension and max tokens when loaded
- [ ] Loading spinner displays during model loading
- [ ] Numeric options use `NumericUpDown` with appropriate min/max/increment
- [ ] File filter patterns are editable via text boxes
- [ ] Action buttons have appropriate enabled/disabled states
- [ ] Footer shows validation errors with warning icon
- [ ] `IndexManagerDialog.axaml.cs` handles `CloseRequested` event properly
- [ ] `PatternEditorDialog.axaml` contains tabbed interface for include/exclude
- [ ] Pattern text boxes use monospace font
- [ ] Build succeeds with no XAML compilation errors

---

## Changelog Entry

```markdown
## v0.7.5b - Index Manager Dialog UI

### Added

- `IndexManagerDialog.axaml` with 6 organized sections:
  - Workspace selection with browse button
  - Index status with color-coded indicator and statistics (Files, Chunks, Size)
  - Embedding model selection with dimension/token info and loading spinner
  - Index options (auto-index, gitignore, hidden files, chunk size, overlap, max file)
  - File filters with include/exclude pattern text boxes
  - Actions (Reindex All, Update Changed, Clear Index)
- Dialog header with title and description
- Dialog footer with validation error display and Cancel/Save buttons
- `SectionHeader` and `SectionBorder` style classes
- `StatValue` and `StatLabel` styles for statistics display
- `IndexManagerDialog.axaml.cs` code-behind with:
  - ViewModel constructor injection
  - `CloseRequested` event handling
  - Proper cleanup in `OnClosed`
- `PatternEditorDialog.axaml` with:
  - TabControl for Include/Exclude patterns
  - Multi-line monospace TextBox for pattern editing
  - Add Common and Clear buttons per tab
  - Cancel/Apply footer buttons
  - `PatternEditor` style class for monospace font
```
