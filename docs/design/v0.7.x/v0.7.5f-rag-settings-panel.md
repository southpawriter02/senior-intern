# Design Specification: AIntern v0.7.5f "RAG Settings Panel"

## Overview

**Version**: v0.7.5f  
**Parent**: v0.7.5 UI & Integration  
**Focus**: Settings panel for RAG configuration integrated into the application Settings dialog

### Purpose

This sub-version creates a dedicated RAG settings panel within the main Settings dialog:
1. `RagSettingsPanel.axaml` - UserControl for RAG configuration options
2. `RagSettingsPanel.axaml.cs` - Code-behind
3. `RagSettingsPanelViewModel.cs` - ViewModel managing settings state and persistence

### Dependencies

**From v0.7.5a**: `RagSettings`, `IRagSettingsService`  
**From v0.7.1**: Embedding model types and presets  
**From Existing UI**: `SettingsDialog` for panel integration

---

## Architecture

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                     v0.7.5f RAG Settings Panel Architecture                  │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Settings Dialog                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  ┌──────────┐  ┌─────────────────────────────────────────────────────┐ │ │
│  │  │ General  │  │                                                      │ │ │
│  │  ├──────────┤  │  [Selected Panel Content]                           │ │ │
│  │  │ Editor   │  │                                                      │ │ │
│  │  ├──────────┤  │                                                      │ │ │
│  │  │ Terminal │  │                                                      │ │ │
│  │  ├──────────┤  │                                                      │ │ │
│  │  │ AI/LLM   │  │                                                      │ │ │
│  │  ├──────────┤  │                                                      │ │ │
│  │  │ RAG ◄────┼──┼─► RagSettingsPanel                                  │ │ │
│  │  └──────────┘  │                                                      │ │ │
│  │                 └─────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  RagSettingsPanel Sections                                               │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                          │ │
│  │  Section 1: Global RAG Settings                                          │ │
│  │  ├── Enable RAG (master toggle)                                         │ │
│  │  ├── Show Status Indicator                                              │ │
│  │  └── Show Indexing Notifications                                        │ │
│  │                                                                          │ │
│  │  Section 2: Embedding Model                                              │ │
│  │  ├── Model Path (TextBox + Browse)                                      │ │
│  │  ├── Model Type (ComboBox: Preset models)                               │ │
│  │  └── Model Info Display                                                 │ │
│  │                                                                          │ │
│  │  Section 3: Chunking Configuration                                       │ │
│  │  ├── Chunk Size (NumericUpDown: 100-2000)                               │ │
│  │  ├── Chunk Overlap (NumericUpDown: 0-256)                               │ │
│  │  └── Preview: "~X chunks per 1000 tokens"                               │ │
│  │                                                                          │ │
│  │  Section 4: File Filtering                                               │ │
│  │  ├── Max File Size (NumericUpDown: 1-10240 KB)                          │ │
│  │  ├── Respect .gitignore (CheckBox)                                      │ │
│  │  ├── Index Hidden Files (CheckBox)                                      │ │
│  │  └── Manage Patterns (Button → PatternEditorDialog)                     │ │
│  │                                                                          │ │
│  │  Section 5: Auto-Indexing                                                │ │
│  │  ├── Enable Auto-Indexing (CheckBox)                                    │ │
│  │  └── Delay (NumericUpDown: 1-60 seconds)                                │ │
│  │                                                                          │ │
│  │  Section 6: RAG Chat Integration                                         │ │
│  │  ├── Enable RAG in Chat (CheckBox)                                      │ │
│  │  ├── Max Context Tokens (NumericUpDown: 500-16000)                      │ │
│  │  ├── Max Chunks (NumericUpDown: 1-20)                                   │ │
│  │  └── Min Relevance Score (Slider: 0.0-1.0)                              │ │
│  │                                                                          │ │
│  │  Footer: Reset to Defaults Button                                        │ │
│  │                                                                          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## Visual Layout

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  RAG Settings                                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Global                                                                      │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  ☑ Enable RAG                                                           ││
│  │  ☑ Show status indicator in status bar                                  ││
│  │  ☑ Show indexing notifications                                          ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  Embedding Model                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  Model: [Nomic Embed v1.5         ▼]                                    ││
│  │                                                                          ││
│  │  Path: ┌────────────────────────────────────────────────┬─────────────┐ ││
│  │        │ /models/nomic-embed-text-v1.5.Q8_0.gguf        │ Browse...   │ ││
│  │        └────────────────────────────────────────────────┴─────────────┘ ││
│  │                                                                          ││
│  │  ℹ Dimension: 768 | Max Tokens: 8192                                    ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  Chunking                                                                    │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  Chunk Size:    [512  ▲▼] tokens      Overlap:    [64   ▲▼] tokens     ││
│  │                                                                          ││
│  │  ℹ Approximately 2 chunks per 1000 tokens                               ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  File Filtering                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  Max file size: [1024 ▲▼] KB                                            ││
│  │                                                                          ││
│  │  ☑ Respect .gitignore                                                   ││
│  │  ☐ Index hidden files                                                   ││
│  │                                                                          ││
│  │  [Manage Include/Exclude Patterns...]                                   ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  Auto-Indexing                                                               │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  ☑ Auto-index on file changes                                           ││
│  │                                                                          ││
│  │  Delay after changes: [5    ▲▼] seconds                                 ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  RAG in Chat                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐│
│  │  ☑ Enable RAG context in chat                                           ││
│  │                                                                          ││
│  │  Max context tokens: [4000 ▲▼]     Max chunks: [5    ▲▼]               ││
│  │                                                                          ││
│  │  Min relevance: ──────●────────────── 0.70                              ││
│  └─────────────────────────────────────────────────────────────────────────┘│
│                                                                              │
│  ─────────────────────────────────────────────────────────────────────────  │
│  [Reset to Defaults]                                                         │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## File Specifications

### 1. RagSettingsPanel.axaml

**Location**: `src/AIntern.Desktop/Views/Settings/RagSettingsPanel.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AIntern.Desktop.ViewModels"
             x:Class="AIntern.Desktop.Views.Settings.RagSettingsPanel"
             x:DataType="vm:RagSettingsPanelViewModel">

    <UserControl.Styles>
        <Style Selector="TextBlock.SectionHeader">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        <Style Selector="Border.Section">
            <Setter Property="BorderBrush" 
                    Value="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>
        <Style Selector="TextBlock.InfoText">
            <Setter Property="Opacity" Value="0.7"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>
    </UserControl.Styles>

    <ScrollViewer>
        <StackPanel Margin="16">

            <!-- Section 1: Global -->
            <TextBlock Text="Global" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <CheckBox Content="Enable RAG"
                              IsChecked="{Binding Enabled}"/>
                    <CheckBox Content="Show status indicator in status bar"
                              IsChecked="{Binding ShowStatusIndicator}"
                              Margin="0,8,0,0"/>
                    <CheckBox Content="Show indexing notifications"
                              IsChecked="{Binding ShowIndexingNotifications}"
                              Margin="0,8,0,0"/>
                </StackPanel>
            </Border>

            <!-- Section 2: Embedding Model -->
            <TextBlock Text="Embedding Model" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0"
                                   Text="Model:"
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0"/>
                        <ComboBox Grid.Row="0" Grid.Column="1"
                                  ItemsSource="{Binding ModelPresets}"
                                  SelectedItem="{Binding SelectedModelPreset}"
                                  DisplayMemberBinding="{Binding Name}"/>

                        <TextBlock Grid.Row="1" Grid.Column="0"
                                   Text="Path:"
                                   VerticalAlignment="Center"
                                   Margin="0,8,8,0"/>
                        <Grid Grid.Row="1" Grid.Column="1" 
                              ColumnDefinitions="*,Auto" Margin="0,8,0,0">
                            <TextBox Grid.Column="0"
                                     Text="{Binding EmbeddingModelPath}"
                                     IsReadOnly="True"/>
                            <Button Grid.Column="1"
                                    Content="Browse..."
                                    Command="{Binding BrowseModelCommand}"
                                    Margin="8,0,0,0"/>
                        </Grid>
                    </Grid>
                    <TextBlock Classes="InfoText"
                               IsVisible="{Binding HasModelInfo}">
                        <Run Text="ℹ Dimension: "/>
                        <Run Text="{Binding EmbeddingDimension}" FontWeight="SemiBold"/>
                        <Run Text=" | Max Tokens: "/>
                        <Run Text="{Binding MaxTokens}" FontWeight="SemiBold"/>
                    </TextBlock>
                </StackPanel>
            </Border>

            <!-- Section 3: Chunking -->
            <TextBlock Text="Chunking" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <Grid ColumnDefinitions="Auto,100,Auto,Auto,100,Auto">
                        <TextBlock Grid.Column="0" Text="Chunk Size:"
                                   VerticalAlignment="Center"/>
                        <NumericUpDown Grid.Column="1"
                                       Value="{Binding ChunkSize}"
                                       Minimum="100" Maximum="2000" Increment="64"
                                       Margin="8,0,0,0"/>
                        <TextBlock Grid.Column="2" Text="tokens"
                                   VerticalAlignment="Center" Margin="8,0,24,0"/>

                        <TextBlock Grid.Column="3" Text="Overlap:"
                                   VerticalAlignment="Center"/>
                        <NumericUpDown Grid.Column="4"
                                       Value="{Binding ChunkOverlap}"
                                       Minimum="0" Maximum="256" Increment="16"
                                       Margin="8,0,0,0"/>
                        <TextBlock Grid.Column="5" Text="tokens"
                                   VerticalAlignment="Center" Margin="8,0,0,0"/>
                    </Grid>
                    <TextBlock Classes="InfoText"
                               Text="{Binding ChunkPreviewText}"/>
                </StackPanel>
            </Border>

            <!-- Section 4: File Filtering -->
            <TextBlock Text="File Filtering" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Max file size:" VerticalAlignment="Center"/>
                        <NumericUpDown Value="{Binding MaxFileSizeKb}"
                                       Minimum="1" Maximum="10240" Increment="256"
                                       Margin="8,0,8,0"/>
                        <TextBlock Text="KB" VerticalAlignment="Center"/>
                    </StackPanel>
                    <CheckBox Content="Respect .gitignore"
                              IsChecked="{Binding RespectGitignore}"
                              Margin="0,12,0,0"/>
                    <CheckBox Content="Index hidden files"
                              IsChecked="{Binding IndexHiddenFiles}"
                              Margin="0,8,0,0"/>
                    <Button Content="Manage Include/Exclude Patterns..."
                            Command="{Binding ManagePatternsCommand}"
                            HorizontalAlignment="Left"
                            Margin="0,12,0,0"/>
                </StackPanel>
            </Border>

            <!-- Section 5: Auto-Indexing -->
            <TextBlock Text="Auto-Indexing" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <CheckBox Content="Auto-index on file changes"
                              IsChecked="{Binding AutoIndexEnabled}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <TextBlock Text="Delay after changes:"
                                   VerticalAlignment="Center"/>
                        <NumericUpDown Value="{Binding AutoIndexDelaySeconds}"
                                       Minimum="1" Maximum="60" Increment="1"
                                       Margin="8,0,8,0"
                                       IsEnabled="{Binding AutoIndexEnabled}"/>
                        <TextBlock Text="seconds" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Section 6: RAG in Chat -->
            <TextBlock Text="RAG in Chat" Classes="SectionHeader"/>
            <Border Classes="Section">
                <StackPanel>
                    <CheckBox Content="Enable RAG context in chat"
                              IsChecked="{Binding EnableRagInChat}"/>
                    <Grid ColumnDefinitions="Auto,100,Auto,Auto,80,Auto"
                          Margin="0,12,0,0">
                        <TextBlock Grid.Column="0" Text="Max context tokens:"
                                   VerticalAlignment="Center"/>
                        <NumericUpDown Grid.Column="1"
                                       Value="{Binding MaxRagContextTokens}"
                                       Minimum="500" Maximum="16000" Increment="500"
                                       Margin="8,0,0,0"
                                       IsEnabled="{Binding EnableRagInChat}"/>

                        <TextBlock Grid.Column="3" Text="Max chunks:"
                                   VerticalAlignment="Center" Margin="24,0,0,0"/>
                        <NumericUpDown Grid.Column="4"
                                       Value="{Binding MaxRagChunks}"
                                       Minimum="1" Maximum="20" Increment="1"
                                       Margin="8,0,0,0"
                                       IsEnabled="{Binding EnableRagInChat}"/>
                    </Grid>
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <TextBlock Text="Min relevance:" VerticalAlignment="Center"/>
                        <Slider Value="{Binding MinRelevanceScore}"
                                Minimum="0" Maximum="1"
                                TickFrequency="0.05"
                                IsSnapToTickEnabled="True"
                                Width="200"
                                Margin="8,0,8,0"
                                IsEnabled="{Binding EnableRagInChat}"/>
                        <TextBlock Text="{Binding MinRelevanceScore, StringFormat={}{0:F2}}"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Footer -->
            <Separator Margin="0,8,0,16"/>
            <Button Content="Reset to Defaults"
                    Command="{Binding ResetToDefaultsCommand}"
                    HorizontalAlignment="Left"/>

        </StackPanel>
    </ScrollViewer>
</UserControl>
```

### 2. RagSettingsPanelViewModel.cs

**Location**: `src/AIntern.Desktop/ViewModels/RagSettingsPanelViewModel.cs`

```csharp
namespace AIntern.Desktop.ViewModels;

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using Microsoft.Extensions.Logging;
using AIntern.Core.RAG.Settings;
using AIntern.Core.RAG.Embedding;

/// <summary>
/// ViewModel for the RAG settings panel.
/// </summary>
public partial class RagSettingsPanelViewModel : ObservableObject
{
    private readonly IRagSettingsService _settingsService;
    private readonly IEmbeddingModelRegistry _modelRegistry;
    private readonly Func<Task> _openPatternEditorAction;
    private readonly ILogger<RagSettingsPanelViewModel> _logger;

    #region Observable Properties - Global

    [ObservableProperty]
    private bool _enabled = true;

    [ObservableProperty]
    private bool _showStatusIndicator = true;

    [ObservableProperty]
    private bool _showIndexingNotifications = true;

    #endregion

    #region Observable Properties - Embedding Model

    [ObservableProperty]
    private ObservableCollection<EmbeddingModelPreset> _modelPresets = new();

    [ObservableProperty]
    private EmbeddingModelPreset? _selectedModelPreset;

    [ObservableProperty]
    private string _embeddingModelPath = string.Empty;

    [ObservableProperty]
    private int _embeddingDimension;

    [ObservableProperty]
    private int _maxTokens;

    [ObservableProperty]
    private bool _hasModelInfo;

    #endregion

    #region Observable Properties - Chunking

    [ObservableProperty]
    [NotifyPropertyChangedFor(nameof(ChunkPreviewText))]
    private int _chunkSize = 512;

    [ObservableProperty]
    [NotifyPropertyChangedFor(nameof(ChunkPreviewText))]
    private int _chunkOverlap = 64;

    public string ChunkPreviewText
    {
        get
        {
            var effectiveChunk = ChunkSize - ChunkOverlap;
            var chunksPerThousand = effectiveChunk > 0 ? 1000.0 / effectiveChunk : 0;
            return $"ℹ Approximately {chunksPerThousand:F1} chunks per 1000 tokens";
        }
    }

    #endregion

    #region Observable Properties - File Filtering

    [ObservableProperty]
    private int _maxFileSizeKb = 1024;

    [ObservableProperty]
    private bool _respectGitignore = true;

    [ObservableProperty]
    private bool _indexHiddenFiles;

    #endregion

    #region Observable Properties - Auto-Indexing

    [ObservableProperty]
    private bool _autoIndexEnabled = true;

    [ObservableProperty]
    private int _autoIndexDelaySeconds = 5;

    #endregion

    #region Observable Properties - RAG in Chat

    [ObservableProperty]
    private bool _enableRagInChat = true;

    [ObservableProperty]
    private int _maxRagContextTokens = 4000;

    [ObservableProperty]
    private int _maxRagChunks = 5;

    [ObservableProperty]
    private double _minRelevanceScore = 0.7;

    #endregion

    #region Constructor

    public RagSettingsPanelViewModel(
        IRagSettingsService settingsService,
        IEmbeddingModelRegistry modelRegistry,
        Func<Task> openPatternEditorAction,
        ILogger<RagSettingsPanelViewModel> logger)
    {
        _settingsService = settingsService;
        _modelRegistry = modelRegistry;
        _openPatternEditorAction = openPatternEditorAction;
        _logger = logger;

        LoadModelPresets();
    }

    #endregion

    #region Initialization

    public async Task LoadAsync()
    {
        _logger.LogDebug("Loading RAG settings");
        var settings = await _settingsService.GetSettingsAsync();
        LoadFromSettings(settings);
    }

    private void LoadFromSettings(RagSettings settings)
    {
        Enabled = settings.Enabled;
        ShowStatusIndicator = settings.ShowStatusIndicator;
        ShowIndexingNotifications = settings.ShowIndexingNotifications;
        EmbeddingModelPath = settings.EmbeddingModelPath ?? string.Empty;
        ChunkSize = settings.ChunkSize;
        ChunkOverlap = settings.ChunkOverlap;
        MaxFileSizeKb = settings.MaxFileSizeKb;
        RespectGitignore = settings.RespectGitignore;
        IndexHiddenFiles = settings.IndexHiddenFiles;
        AutoIndexEnabled = settings.AutoIndexEnabled;
        AutoIndexDelaySeconds = settings.AutoIndexDelaySeconds;
        EnableRagInChat = settings.EnableRagInChat;
        MaxRagContextTokens = settings.MaxRagContextTokens;
        MaxRagChunks = settings.MaxRagChunks;
        MinRelevanceScore = settings.MinRelevanceScore;

        // Match preset if path matches
        SelectedModelPreset = ModelPresets
            .FirstOrDefault(p => p.DefaultPath == EmbeddingModelPath);
    }

    private void LoadModelPresets()
    {
        var presets = _modelRegistry.GetAvailablePresets();
        ModelPresets = new ObservableCollection<EmbeddingModelPreset>(presets);
    }

    #endregion

    #region Save

    public async Task SaveAsync()
    {
        _logger.LogDebug("Saving RAG settings");

        var settings = BuildSettings();
        var errors = settings.Validate();

        if (errors.Count > 0)
        {
            _logger.LogWarning("Validation errors: {Errors}", string.Join(", ", errors));
            return;
        }

        await _settingsService.SaveSettingsAsync(settings);
    }

    private RagSettings BuildSettings()
    {
        return new RagSettings
        {
            Enabled = Enabled,
            ShowStatusIndicator = ShowStatusIndicator,
            ShowIndexingNotifications = ShowIndexingNotifications,
            EmbeddingModelPath = EmbeddingModelPath,
            ChunkSize = ChunkSize,
            ChunkOverlap = ChunkOverlap,
            MaxFileSizeKb = MaxFileSizeKb,
            RespectGitignore = RespectGitignore,
            IndexHiddenFiles = IndexHiddenFiles,
            AutoIndexEnabled = AutoIndexEnabled,
            AutoIndexDelaySeconds = AutoIndexDelaySeconds,
            EnableRagInChat = EnableRagInChat,
            MaxRagContextTokens = MaxRagContextTokens,
            MaxRagChunks = MaxRagChunks,
            MinRelevanceScore = MinRelevanceScore
        };
    }

    #endregion

    #region Commands

    [RelayCommand]
    private async Task BrowseModelAsync()
    {
        _logger.LogDebug("Browsing for embedding model");
        // Implementation via file dialog service
    }

    [RelayCommand]
    private async Task ManagePatternsAsync()
    {
        _logger.LogDebug("Opening pattern editor");
        await _openPatternEditorAction();
    }

    [RelayCommand]
    private async Task ResetToDefaultsAsync()
    {
        _logger.LogInformation("Resetting RAG settings to defaults");
        await _settingsService.ResetToDefaultsAsync();
        await LoadAsync();
    }

    #endregion

    #region Model Selection

    partial void OnSelectedModelPresetChanged(EmbeddingModelPreset? value)
    {
        if (value != null)
        {
            EmbeddingModelPath = value.DefaultPath;
            EmbeddingDimension = value.Dimension;
            MaxTokens = value.MaxTokens;
            HasModelInfo = true;
        }
    }

    #endregion
}
```

---

## Unit Test Requirements

**File**: `tests/AIntern.Desktop.Tests/ViewModels/RagSettingsPanelViewModelTests.cs`

| Test | Description |
|------|-------------|
| `LoadAsync_PopulatesAllProperties` | Verify settings load |
| `SaveAsync_BuildsSettingsCorrectly` | Verify save builds settings |
| `SaveAsync_ValidatesBeforeSave` | Verify validation runs |
| `ChunkPreviewText_CalculatesCorrectly` | Verify preview math |
| `OnSelectedModelPresetChanged_UpdatesModelInfo` | Verify preset selection |
| `ResetToDefaultsCommand_ReloadsSettings` | Verify reset flow |
| `BrowseModelCommand_OpensDialog` | Verify browse action |
| `ManagePatternsCommand_OpensEditor` | Verify patterns action |

---

## Acceptance Criteria

- [ ] Panel integrates into Settings dialog as "RAG" tab
- [ ] All 6 sections display with proper styling
- [ ] Global toggles affect RAG system behavior
- [ ] Model preset dropdown populates from registry
- [ ] Model browse button opens file dialog
- [ ] Chunk preview updates dynamically
- [ ] NumericUpDown controls respect min/max/increment
- [ ] Relevance slider snaps to 0.05 increments
- [ ] Reset to Defaults restores all settings
- [ ] Validation prevents invalid saves
- [ ] Unit tests achieve >90% coverage

---

## Changelog Entry

```markdown
## v0.7.5f - RAG Settings Panel

### Added

- `RagSettingsPanel.axaml` with 6 organized sections:
  - Global: Enable RAG, status indicator, notifications
  - Embedding Model: preset dropdown, path browser, info display
  - Chunking: size/overlap with dynamic preview
  - File Filtering: max size, gitignore, hidden files, pattern manager
  - Auto-Indexing: enable toggle and delay configuration
  - RAG in Chat: enable, max tokens, max chunks, relevance slider
  - Footer: Reset to Defaults button
- `RagSettingsPanelViewModel` with:
  - Full property coverage for all RagSettings fields
  - `LoadAsync()` and `SaveAsync()` for persistence
  - `ChunkPreviewText` computed property
  - Model preset selection with auto-fill
  - Browse, ManagePatterns, ResetToDefaults commands
- Settings dialog integration as "RAG" navigation item
```
