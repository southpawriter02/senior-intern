# Design Specification: AIntern v0.7.5i "Workspace Selector"

## Overview

**Version**: v0.7.5i  
**Parent**: v0.7.5 UI & Integration  
**Focus**: Dropdown selector for switching between indexed workspaces

### Purpose

This sub-version creates workspace selection UI:
1. `WorkspaceSelectorDropdown.axaml` - Dropdown control showing indexed workspaces
2. `WorkspaceSelectorViewModel.cs` - ViewModel managing workspace list and selection
3. Integration with main window toolbar

### Dependencies

**From v0.7.5a**: `RagSettings.LastWorkspacePath`, `WorkspaceIndexInfo`  
**From v0.7.2**: `IVectorStore.GetAllIndexesAsync()`  
**From v0.7.5g**: `AutoIndexingCoordinator` for watcher switching

---

## Architecture

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    v0.7.5i Workspace Selector Architecture                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                              โ
โ  Main Window Toolbar                                                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  [File โผ] [Edit โผ] [View โผ]    [WorkspaceSelectorDropdown]    [โ]     โ โ
โ  โ                                 โโโโโโโโโโโโโโโโโโโโโโโโโโโ             โ โ
โ  โ                                 โ ๐ myapp       โผ       โ             โ โ
โ  โ                                 โโโโโโโโโโโโโโโโโโโโโโโโโโโ             โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                                              โ
โ  Dropdown Content (Expanded)                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  โ  ๐ myapp                                              โ Active    โโ โ
โ  โ  โ     /Users/dev/projects/myapp                                       โโ โ
โ  โ  โ     1,234 files โข Updated 2h ago                                    โโ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโคโ โ
โ  โ  โ  ๐ library                                                         โโ โ
โ  โ  โ     /Users/dev/projects/library                                     โโ โ
โ  โ  โ     567 files โข Updated 1d ago                                      โโ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโคโ โ
โ  โ  โ  ๐ utilities                                          โ Stale     โโ โ
โ  โ  โ     /Users/dev/projects/utilities                                   โโ โ
โ  โ  โ     89 files โข 12 outdated                                          โโ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโคโ โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโ โ
โ  โ  โ  [+ Add Workspace]                    [Manage Indexes]              โโ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  WorkspaceSelectorViewModel                                              โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค โ
โ  โ  Properties:                                                             โ โ
โ  โ  โโโ Workspaces: ObservableCollection<WorkspaceItemViewModel>           โ โ
โ  โ  โโโ SelectedWorkspace: WorkspaceItemViewModel?                          โ โ
โ  โ  โโโ HasWorkspaces: bool                                                 โ โ
โ  โ  โโโ IsDropdownOpen: bool                                                โ โ
โ  โ                                                                          โ โ
โ  โ  Commands:                                                               โ โ
โ  โ  โโโ SelectWorkspaceCommand                                             โ โ
โ  โ  โโโ AddWorkspaceCommand                                                 โ โ
โ  โ  โโโ ManageIndexesCommand                                                โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                                              โ
โ  Selection Flow:                                                             โ
โ  โโโโโโโโโโโโโโโโโโ   Select    โโโโโโโโโโโโโโโโโโโโ                        โ
โ  โ  User clicks   โ โโโโโโโโโโโบ โ Update settings  โ                        โ
โ  โ  workspace     โ             โ LastWorkspacePathโ                        โ
โ  โโโโโโโโโโโโโโโโโโ             โโโโโโโโโโฌโโโโโโโโโโ                        โ
โ                                          โ                                   โ
โ                                          โผ                                   โ
โ                        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ                        โ Restart AutoIndexingCoordinator โ                  โ
โ                        โ with new workspace path         โ                  โ
โ                        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ                                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Visual Layout

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Collapsed State                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ  โ  ๐ myapp                            โผ   โ                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ                                                                              โ
โ  Expanded State                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ  โ  ๐ myapp                            โฒ   โ                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค                              โ
โ  โ                                           โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ  โ ๐ myapp                     Active โ  โ   โ Currently selected       โ
โ  โ  โ    /Users/dev/projects/myapp        โ  โ                              โ
โ  โ  โ    1,234 files โข 2h ago             โ  โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ                                           โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ  โ ๐ library                          โ  โ   โ Available workspace      โ
โ  โ  โ    /Users/dev/projects/library      โ  โ                              โ
โ  โ  โ    567 files โข 1d ago               โ  โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ                                           โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ  โ ๐ utilities              โ Stale  โ  โ   โ Stale indicator          โ
โ  โ  โ    /Users/dev/projects/utilities    โ  โ                              โ
โ  โ  โ    89 files โข 12 outdated           โ  โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                              โ
โ  โ                                           โ                              โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ  โ  [+ Add Workspace]     [Manage Indexes]   โ                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ                                                                              โ
โ  Empty State                                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ  โ  No workspace indexed               โผ   โ                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค                              โ
โ  โ                                           โ                              โ
โ  โ    No indexed workspaces yet.             โ                              โ
โ  โ                                           โ                              โ
โ  โ    [+ Add Workspace]                      โ                              โ
โ  โ                                           โ                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                              โ
โ                                                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## File Specifications

### 1. WorkspaceSelectorDropdown.axaml

**Location**: `src/AIntern.Desktop/Controls/WorkspaceSelectorDropdown.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AIntern.Desktop.ViewModels"
             x:Class="AIntern.Desktop.Controls.WorkspaceSelectorDropdown"
             x:DataType="vm:WorkspaceSelectorViewModel">

    <UserControl.Styles>
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" 
                    Value="{DynamicResource SystemControlBackgroundListLowBrush}"/>
        </Style>
    </UserControl.Styles>

    <DropDownButton Width="200" HorizontalContentAlignment="Stretch">
        <DropDownButton.Content>
            <StackPanel Orientation="Horizontal" Spacing="8">
                <PathIcon Data="{StaticResource folder_regular}" Width="14" Height="14"/>
                <TextBlock Text="{Binding SelectedDisplayName}"
                           TextTrimming="CharacterEllipsis"/>
            </StackPanel>
        </DropDownButton.Content>

        <DropDownButton.Flyout>
            <Flyout Placement="BottomEdgeAlignedLeft">
                <Border MinWidth="280" MaxHeight="400">
                    <Grid RowDefinitions="*,Auto">
                        
                        <!-- Workspace List -->
                        <ScrollViewer Grid.Row="0" MaxHeight="300">
                            <StackPanel>
                                <!-- Empty State -->
                                <StackPanel IsVisible="{Binding !HasWorkspaces}"
                                            Margin="16">
                                    <TextBlock Text="No indexed workspaces yet."
                                               Opacity="0.7"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>

                                <!-- Workspace Items -->
                                <ItemsControl ItemsSource="{Binding Workspaces}"
                                              IsVisible="{Binding HasWorkspaces}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="vm:WorkspaceItemViewModel">
                                            <Button Command="{Binding SelectCommand}"
                                                    HorizontalAlignment="Stretch"
                                                    HorizontalContentAlignment="Stretch"
                                                    Padding="12,8"
                                                    Background="Transparent"
                                                    CornerRadius="0">
                                                <Grid ColumnDefinitions="Auto,*,Auto">
                                                    <!-- Icon -->
                                                    <PathIcon Grid.Column="0"
                                                              Data="{StaticResource folder_regular}"
                                                              Width="16" Height="16"
                                                              Margin="0,0,12,0"/>

                                                    <!-- Info -->
                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="{Binding DisplayName}"
                                                                   FontWeight="SemiBold"/>
                                                        <TextBlock Text="{Binding FullPath}"
                                                                   FontSize="11"
                                                                   Opacity="0.7"
                                                                   TextTrimming="CharacterEllipsis"/>
                                                        <TextBlock Text="{Binding StatusText}"
                                                                   FontSize="11"
                                                                   Opacity="0.7"/>
                                                    </StackPanel>

                                                    <!-- Status Badge -->
                                                    <Border Grid.Column="2"
                                                            IsVisible="{Binding HasBadge}"
                                                            Background="{Binding BadgeBackground}"
                                                            CornerRadius="4"
                                                            Padding="6,2"
                                                            VerticalAlignment="Top">
                                                        <TextBlock Text="{Binding BadgeText}"
                                                                   FontSize="10"
                                                                   Foreground="White"/>
                                                    </Border>
                                                </Grid>
                                            </Button>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Footer Actions -->
                        <Border Grid.Row="1"
                                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                                BorderThickness="0,1,0,0"
                                Padding="8">
                            <Grid ColumnDefinitions="*,*">
                                <Button Grid.Column="0"
                                        Content="+ Add Workspace"
                                        Command="{Binding AddWorkspaceCommand}"
                                        HorizontalAlignment="Stretch"
                                        Margin="0,0,4,0"/>
                                <Button Grid.Column="1"
                                        Content="Manage Indexes"
                                        Command="{Binding ManageIndexesCommand}"
                                        HorizontalAlignment="Stretch"
                                        Margin="4,0,0,0"/>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </Flyout>
        </DropDownButton.Flyout>
    </DropDownButton>
</UserControl>
```

### 2. WorkspaceSelectorViewModel.cs

**Location**: `src/AIntern.Desktop/ViewModels/WorkspaceSelectorViewModel.cs`

```csharp
namespace AIntern.Desktop.ViewModels;

using System.Collections.ObjectModel;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using Microsoft.Extensions.Logging;
using AIntern.Core.RAG.Settings;
using AIntern.Core.RAG.Storage;

/// <summary>
/// ViewModel for the workspace selector dropdown.
/// </summary>
public partial class WorkspaceSelectorViewModel : ObservableObject
{
    private readonly IRagSettingsService _settingsService;
    private readonly IVectorStore _vectorStore;
    private readonly Func<Task> _openIndexManagerAction;
    private readonly Func<Task<string?>> _browseForFolderAction;
    private readonly ILogger<WorkspaceSelectorViewModel> _logger;

    [ObservableProperty]
    private ObservableCollection<WorkspaceItemViewModel> _workspaces = new();

    [ObservableProperty]
    [NotifyPropertyChangedFor(nameof(SelectedDisplayName))]
    private WorkspaceItemViewModel? _selectedWorkspace;

    public bool HasWorkspaces => Workspaces.Count > 0;

    public string SelectedDisplayName => SelectedWorkspace?.DisplayName ?? "No workspace";

    public WorkspaceSelectorViewModel(
        IRagSettingsService settingsService,
        IVectorStore vectorStore,
        Func<Task> openIndexManagerAction,
        Func<Task<string?>> browseForFolderAction,
        ILogger<WorkspaceSelectorViewModel> logger)
    {
        _settingsService = settingsService;
        _vectorStore = vectorStore;
        _openIndexManagerAction = openIndexManagerAction;
        _browseForFolderAction = browseForFolderAction;
        _logger = logger;

        _vectorStore.IndexChanged += async (_, _) => await RefreshAsync();
    }

    public async Task InitializeAsync()
    {
        await RefreshAsync();
    }

    public async Task RefreshAsync()
    {
        _logger.LogDebug("Refreshing workspace list");

        try
        {
            var indexes = await _vectorStore.GetAllIndexesAsync();
            var settings = await _settingsService.GetSettingsAsync();

            Workspaces.Clear();

            foreach (var info in indexes)
            {
                var item = new WorkspaceItemViewModel(info, SelectWorkspaceAsync)
                {
                    IsActive = info.WorkspacePath == settings.LastWorkspacePath
                };
                Workspaces.Add(item);

                if (item.IsActive)
                    SelectedWorkspace = item;
            }

            OnPropertyChanged(nameof(HasWorkspaces));
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Failed to refresh workspace list");
        }
    }

    private async Task SelectWorkspaceAsync(WorkspaceItemViewModel workspace)
    {
        _logger.LogInformation("Selecting workspace: {Path}", workspace.FullPath);

        // Update active state
        foreach (var ws in Workspaces)
            ws.IsActive = false;
        workspace.IsActive = true;
        SelectedWorkspace = workspace;

        // Persist selection
        var settings = await _settingsService.GetSettingsAsync();
        settings.LastWorkspacePath = workspace.FullPath;
        await _settingsService.SaveSettingsAsync(settings);
    }

    [RelayCommand]
    private async Task AddWorkspaceAsync()
    {
        _logger.LogDebug("Adding new workspace");

        var path = await _browseForFolderAction();
        if (string.IsNullOrEmpty(path))
            return;

        // Open index manager with the selected path
        await _openIndexManagerAction();
    }

    [RelayCommand]
    private async Task ManageIndexesAsync()
    {
        _logger.LogDebug("Opening index manager");
        await _openIndexManagerAction();
    }
}
```

### 3. WorkspaceItemViewModel.cs

**Location**: `src/AIntern.Desktop/ViewModels/WorkspaceItemViewModel.cs`

```csharp
namespace AIntern.Desktop.ViewModels;

using Avalonia.Media;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using AIntern.Core.RAG.Settings;

/// <summary>
/// ViewModel for individual workspace items in the selector.
/// </summary>
public partial class WorkspaceItemViewModel : ObservableObject
{
    private readonly Func<WorkspaceItemViewModel, Task> _selectAction;
    private readonly WorkspaceIndexInfo _info;

    [ObservableProperty]
    [NotifyPropertyChangedFor(nameof(HasBadge))]
    [NotifyPropertyChangedFor(nameof(BadgeText))]
    [NotifyPropertyChangedFor(nameof(BadgeBackground))]
    private bool _isActive;

    public string DisplayName => _info.DisplayName;
    public string FullPath => _info.WorkspacePath;
    
    public string StatusText
    {
        get
        {
            if (_info.StaleFileCount > 0)
                return $"{_info.FileCount:N0} files โข {_info.StaleFileCount} outdated";
            return $"{_info.FileCount:N0} files โข {_info.FormattedLastUpdate}";
        }
    }

    public bool HasBadge => IsActive || _info.StaleFileCount > 0;

    public string BadgeText
    {
        get
        {
            if (IsActive) return "Active";
            if (_info.StaleFileCount > 0) return "Stale";
            return string.Empty;
        }
    }

    public IBrush BadgeBackground
    {
        get
        {
            if (IsActive) return Brushes.DodgerBlue;
            if (_info.StaleFileCount > 0) return Brushes.Orange;
            return Brushes.Transparent;
        }
    }

    public WorkspaceItemViewModel(
        WorkspaceIndexInfo info,
        Func<WorkspaceItemViewModel, Task> selectAction)
    {
        _info = info;
        _selectAction = selectAction;
    }

    [RelayCommand]
    private async Task SelectAsync()
    {
        await _selectAction(this);
    }
}
```

---

## Integration

### MainWindow Toolbar Integration

```xml
<!-- In MainWindowView.axaml toolbar area -->
<StackPanel Orientation="Horizontal" Spacing="8">
    <!-- Other toolbar items -->
    
    <controls:WorkspaceSelectorDropdown 
        DataContext="{Binding WorkspaceSelector}"/>
</StackPanel>
```

### MainWindowViewModel Addition

```csharp
// Add to MainWindowViewModel

[ObservableProperty]
private WorkspaceSelectorViewModel _workspaceSelector;

// In constructor or initialization:
WorkspaceSelector = new WorkspaceSelectorViewModel(
    ragSettingsService,
    vectorStore,
    OpenIndexManagerAsync,
    BrowseForFolderAsync,
    logger);

await WorkspaceSelector.InitializeAsync();
```

---

## Unit Test Requirements

**File**: `tests/AIntern.Desktop.Tests/ViewModels/WorkspaceSelectorViewModelTests.cs`

| Test | Description |
|------|-------------|
| `InitializeAsync_LoadsAllIndexes` | Verify workspace list populated |
| `InitializeAsync_SetsActiveWorkspace` | Verify current selection |
| `SelectWorkspace_UpdatesSettings` | Verify settings saved |
| `SelectWorkspace_UpdatesActiveState` | Verify UI state changes |
| `AddWorkspace_OpensFolderBrowser` | Verify browse action |
| `ManageIndexes_OpensIndexManager` | Verify manager opens |
| `Refresh_OnIndexChanged` | Verify auto-refresh |
| `HasWorkspaces_FalseWhenEmpty` | Verify empty state |

**File**: `tests/AIntern.Desktop.Tests/ViewModels/WorkspaceItemViewModelTests.cs`

| Test | Description |
|------|-------------|
| `StatusText_ShowsFileCount` | Verify file count display |
| `StatusText_ShowsStaleCount` | Verify stale indicator |
| `BadgeText_ActiveWhenSelected` | Verify active badge |
| `BadgeText_StaleWhenOutdated` | Verify stale badge |
| `BadgeBackground_BlueForActive` | Verify color |
| `BadgeBackground_OrangeForStale` | Verify color |

---

## Acceptance Criteria

- [ ] Dropdown displays in main window toolbar
- [ ] Current workspace name shows when collapsed
- [ ] Expanding shows all indexed workspaces
- [ ] Each item shows name, path, file count, update time
- [ ] Active workspace shows "Active" badge (blue)
- [ ] Stale workspaces show "Stale" badge (orange)
- [ ] Clicking workspace selects it and updates settings
- [ ] "Add Workspace" opens folder browser
- [ ] "Manage Indexes" opens Index Manager dialog
- [ ] Empty state displays when no indexes exist
- [ ] List refreshes when indexes change
- [ ] Unit tests achieve >90% coverage

---

## Changelog Entry

```markdown
## v0.7.5i - Workspace Selector

### Added

- `WorkspaceSelectorDropdown.axaml` control with:
  - Dropdown button showing current workspace
  - Flyout with scrollable workspace list
  - Workspace items showing name, path, status
  - "Active" badge (blue) for selected workspace
  - "Stale" badge (orange) for outdated indexes
  - Footer with Add Workspace and Manage Indexes
  - Empty state for no workspaces
- `WorkspaceSelectorViewModel` with:
  - `ObservableCollection<WorkspaceItemViewModel>` workspace list
  - `InitializeAsync()` and `RefreshAsync()` methods
  - `SelectWorkspaceCommand` for workspace switching
  - `AddWorkspaceCommand` and `ManageIndexesCommand`
  - Auto-refresh on `IVectorStore.IndexChanged`
- `WorkspaceItemViewModel` with:
  - Display properties from `WorkspaceIndexInfo`
  - Active/Stale badge logic
  - Status text with file count and update time
- MainWindow toolbar integration
```
