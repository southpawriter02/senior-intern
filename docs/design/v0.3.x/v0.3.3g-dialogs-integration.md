# Design Specification: The Senior Intern v0.3.3g "Dialogs & Integration"

## Executive Summary

This document provides a detailed implementation specification for v0.3.3g, which implements dialog services (`IDialogService`, `DialogService`), custom dialogs (`GoToLineDialog`, `MessageDialog`), and integrates the editor panel into the main window with full event wiring between components.

### v0.3.3g Scope

- Create `IDialogService` interface with dialog methods
- Create `DialogService` implementation using Avalonia storage providers
- Create `GoToLineDialog` with input validation
- Create `MessageDialog` with configurable buttons and icons
- Integrate `EditorPanel` into `MainWindow` layout
- Wire up `FileExplorer` â†’ `EditorPanel` file opening
- Wire up `EditorPanel` â†’ `FileExplorer` reveal in explorer
- Register services in DI container

### Key Deliverables

| Deliverable | Description |
|-------------|-------------|
| IDialogService | Dialog service interface |
| DialogService | Avalonia dialog implementation |
| GoToLineDialog | Go-to-line input dialog |
| MessageDialog | Configurable message dialog |
| MainWindow integration | Editor panel in layout |
| Event wiring | File open, reveal in explorer |

---

## Feature Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     v0.3.3g Feature Tree                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  IDialogService                                                   â”‚
â”‚  â”œâ”€â”€ ShowErrorAsync(title, message)                              â”‚
â”‚  â”œâ”€â”€ ShowInfoAsync(title, message)                               â”‚
â”‚  â”œâ”€â”€ ShowConfirmDialogAsync(title, message, options)             â”‚
â”‚  â”‚   â””â”€â”€ Returns selected option string or null                 â”‚
â”‚  â”œâ”€â”€ ShowSaveDialogAsync(title, defaultFileName, filters)        â”‚
â”‚  â”‚   â””â”€â”€ Returns file path or null                              â”‚
â”‚  â”œâ”€â”€ ShowOpenFileDialogAsync(title, filters, allowMultiple)      â”‚
â”‚  â”‚   â””â”€â”€ Returns file path or null                              â”‚
â”‚  â”œâ”€â”€ ShowFolderPickerAsync(title)                                â”‚
â”‚  â”‚   â””â”€â”€ Returns folder path or null                            â”‚
â”‚  â””â”€â”€ ShowGoToLineDialogAsync(maxLine, currentLine)               â”‚
â”‚      â””â”€â”€ Returns line number or null                            â”‚
â”‚                                                                   â”‚
â”‚  DialogService (implements IDialogService)                        â”‚
â”‚  â”œâ”€â”€ GetMainWindow() â†’ Window?                                   â”‚
â”‚  â””â”€â”€ Uses Avalonia.Platform.Storage APIs                        â”‚
â”‚                                                                   â”‚
â”‚  GoToLineDialog                                                   â”‚
â”‚  â”œâ”€â”€ Properties                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ MaxLine: int                                           â”‚
â”‚  â”‚   â””â”€â”€ CurrentLine: int                                       â”‚
â”‚  â”œâ”€â”€ UI Elements                                                 â”‚
â”‚  â”‚   â”œâ”€â”€ Prompt: "Go to line (1 - N):"                          â”‚
â”‚  â”‚   â”œâ”€â”€ TextBox: line number input                             â”‚
â”‚  â”‚   â”œâ”€â”€ Cancel button                                          â”‚
â”‚  â”‚   â””â”€â”€ Go button (primary, default)                           â”‚
â”‚  â””â”€â”€ Behavior                                                    â”‚
â”‚      â”œâ”€â”€ Auto-focus and select on open                          â”‚
â”‚      â”œâ”€â”€ Enter key submits                                      â”‚
â”‚      â””â”€â”€ Validates line range (1 to MaxLine)                    â”‚
â”‚                                                                   â”‚
â”‚  MessageDialog                                                    â”‚
â”‚  â”œâ”€â”€ Properties                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ Title: string                                          â”‚
â”‚  â”‚   â”œâ”€â”€ Message: string                                        â”‚
â”‚  â”‚   â”œâ”€â”€ Icon: MessageDialogIcon enum                           â”‚
â”‚  â”‚   â””â”€â”€ Buttons: IEnumerable<string>                           â”‚
â”‚  â”œâ”€â”€ Icons                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ None                                                   â”‚
â”‚  â”‚   â”œâ”€â”€ Information (i)                                        â”‚
â”‚  â”‚   â”œâ”€â”€ Warning (âš )                                            â”‚
â”‚  â”‚   â”œâ”€â”€ Error (âœ—)                                              â”‚
â”‚  â”‚   â””â”€â”€ Question (?)                                           â”‚
â”‚  â””â”€â”€ Returns: clicked button text or null                       â”‚
â”‚                                                                   â”‚
â”‚  MainWindow Integration                                           â”‚
â”‚  â”œâ”€â”€ Layout                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ Column 0: Sidebar (FileExplorer)                       â”‚
â”‚  â”‚   â”œâ”€â”€ Splitter                                               â”‚
â”‚  â”‚   â””â”€â”€ Column 1: Main Content                                 â”‚
â”‚  â”‚       â”œâ”€â”€ Row 0: EditorPanel                                 â”‚
â”‚  â”‚       â”œâ”€â”€ Splitter                                           â”‚
â”‚  â”‚       â””â”€â”€ Row 2: ChatPanel (collapsible)                     â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€â”€ Event Wiring                                                â”‚
â”‚      â”œâ”€â”€ FileExplorer.FileOpenRequested â†’                       â”‚
â”‚      â”‚   EditorPanel.OpenFileAsync()                            â”‚
â”‚      â””â”€â”€ EditorPanel.RevealInExplorerRequested â†’                â”‚
â”‚          FileExplorer.RevealFile()                              â”‚
â”‚                                                                   â”‚
â”‚  MainWindowViewModel Updates                                      â”‚
â”‚  â”œâ”€â”€ EditorPanel: EditorPanelViewModel                          â”‚
â”‚  â”œâ”€â”€ IsChatPanelVisible: bool                                   â”‚
â”‚  â”œâ”€â”€ ChatPanelHeight: double                                    â”‚
â”‚  â””â”€â”€ ToggleChatPanelCommand: RelayCommand                       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture Diagrams

### Dialog Service Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Dialog Service Architecture                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ViewModels                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ EditorPanelViewModel                                       â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ private readonly IDialogService _dialogService;            â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ async Task GoToLineAsync()                                 â”‚  â”‚
â”‚  â”‚ {                                                           â”‚  â”‚
â”‚  â”‚     var line = await _dialogService.ShowGoToLineDialogAsyncâ”‚  â”‚
â”‚  â”‚         (ActiveTab.LineCount, ActiveTab.CaretLine);        â”‚  â”‚
â”‚  â”‚     if (line.HasValue)                                     â”‚  â”‚
â”‚  â”‚         GoToLineRequested?.Invoke(this, line.Value);       â”‚  â”‚
â”‚  â”‚ }                                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                       â”‚
â”‚                          â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ IDialogService                                              â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ Task<int?> ShowGoToLineDialogAsync(maxLine, currentLine)   â”‚  â”‚
â”‚  â”‚ Task ShowErrorAsync(title, message)                        â”‚  â”‚
â”‚  â”‚ Task<string?> ShowConfirmDialogAsync(title, msg, options)  â”‚  â”‚
â”‚  â”‚ Task<string?> ShowSaveDialogAsync(title, name, filters)    â”‚  â”‚
â”‚  â”‚ Task<string?> ShowOpenFileDialogAsync(title, filters)      â”‚  â”‚
â”‚  â”‚ Task<string?> ShowFolderPickerAsync(title)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                       â”‚
â”‚                          â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DialogService : IDialogService                             â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚ Uses:                                                       â”‚  â”‚
â”‚  â”‚ â€¢ Window.StorageProvider (Avalonia 11)                     â”‚  â”‚
â”‚  â”‚ â€¢ SaveFilePickerAsync, OpenFilePickerAsync                 â”‚  â”‚
â”‚  â”‚ â€¢ OpenFolderPickerAsync                                    â”‚  â”‚
â”‚  â”‚ â€¢ Custom dialog windows (GoToLineDialog, MessageDialog)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Main Window Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Main Window Layout                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                       Title Bar / Menu                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚             â”‚ â”‚                                              â”‚â”‚
â”‚  â”‚   Sidebar   â”‚ â”‚   EditorPanel                                â”‚â”‚
â”‚  â”‚   (File     â”‚Sâ”‚                                              â”‚â”‚
â”‚  â”‚   Explorer) â”‚Pâ”‚   [main.cs] [app.tsx â€¢] [README.md]         â”‚â”‚
â”‚  â”‚             â”‚Lâ”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚â”‚
â”‚  â”‚   ğŸ“ src    â”‚Iâ”‚    1 â”‚ using System;                        â”‚â”‚
â”‚  â”‚   â”œ ğŸ“„ ma...â”‚Tâ”‚    2 â”‚ namespace App                        â”‚â”‚
â”‚  â”‚   â”œ ğŸ“„ ap...â”‚Tâ”‚    3 â”‚ {                                     â”‚â”‚
â”‚  â”‚   ğŸ“ docs   â”‚Eâ”‚    4 â”‚     â–Œ                                 â”‚â”‚
â”‚  â”‚   â”œ ğŸ“„ RE...â”‚Râ”‚    5 â”‚ }                                     â”‚â”‚
â”‚  â”‚             â”‚ â”‚                                              â”‚â”‚
â”‚  â”‚             â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚             â”‚ â”‚   ChatPanel (collapsible)                    â”‚â”‚
â”‚  â”‚             â”‚ â”‚                                              â”‚â”‚
â”‚  â”‚             â”‚ â”‚   ğŸ’¬ AI Assistant                            â”‚â”‚
â”‚  â”‚             â”‚ â”‚   [Message input...]                         â”‚â”‚
â”‚  â”‚             â”‚ â”‚                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Status Bar: Ln 4, Col 1 | UTF-8 | CRLF | C# | Ready         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Event Wiring Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Event Wiring Flow                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  File Open Flow (Explorer â†’ Editor)                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚                                                                  â”‚
â”‚  User double-clicks file in FileExplorer                         â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FileExplorerViewModel.OpenFileCommand.Execute()            â”‚  â”‚
â”‚  â”‚ â†’ FileOpenRequested?.Invoke(this, filePath)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MainWindowViewModel.OnFileOpenRequested(sender, filePath)  â”‚  â”‚
â”‚  â”‚ â†’ await EditorPanel.OpenFileAsync(filePath)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  File opens in editor tab                                        â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                  â”‚
â”‚  Reveal in Explorer Flow (Editor â†’ Explorer)                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                                                  â”‚
â”‚  User clicks "Reveal in Explorer" in tab context menu            â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ EditorPanelViewModel.RevealInExplorerCommand.Execute()     â”‚  â”‚
â”‚  â”‚ â†’ RevealInExplorerRequested?.Invoke(this, filePath)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MainWindowViewModel.OnRevealInExplorerRequested()          â”‚  â”‚
â”‚  â”‚ â†’ FileExplorer.RevealFile(filePath)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  File is selected/revealed in file explorer tree                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Directory Structure

```
src/SeniorIntern.Desktop/
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ IDialogService.cs                             (NEW)
â”‚   â””â”€â”€ DialogService.cs                              (NEW)
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ Dialogs/
â”‚   â”‚   â”œâ”€â”€ GoToLineDialog.axaml                      (NEW)
â”‚   â”‚   â”œâ”€â”€ GoToLineDialog.axaml.cs                   (NEW)
â”‚   â”‚   â”œâ”€â”€ MessageDialog.axaml                       (NEW)
â”‚   â”‚   â””â”€â”€ MessageDialog.axaml.cs                    (NEW)
â”‚   â””â”€â”€ MainWindow.axaml                              (MODIFY)
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ MainWindowViewModel.cs                        (MODIFY)
â””â”€â”€ App.axaml.cs                                      (MODIFY)

Directory.Packages.props                              (MODIFY)
```

---

## Implementation Details

### Task 1: Create IDialogService Interface

**File:** `src/SeniorIntern.Desktop/Services/IDialogService.cs`

```csharp
namespace SeniorIntern.Desktop.Services;

using System.Collections.Generic;
using System.Threading.Tasks;

/// <summary>
/// Service for displaying dialogs.
/// </summary>
public interface IDialogService
{
    /// <summary>
    /// Shows an error message dialog.
    /// </summary>
    Task ShowErrorAsync(string title, string message);

    /// <summary>
    /// Shows an information message dialog.
    /// </summary>
    Task ShowInfoAsync(string title, string message);

    /// <summary>
    /// Shows a confirmation dialog with multiple options.
    /// </summary>
    /// <param name="title">Dialog title.</param>
    /// <param name="message">Message to display.</param>
    /// <param name="options">Button options (e.g., "Save", "Don't Save", "Cancel").</param>
    /// <returns>The selected option text, or null if cancelled.</returns>
    Task<string?> ShowConfirmDialogAsync(string title, string message, IEnumerable<string> options);

    /// <summary>
    /// Shows a save file dialog.
    /// </summary>
    /// <param name="title">Dialog title.</param>
    /// <param name="defaultFileName">Suggested file name.</param>
    /// <param name="filters">File type filters.</param>
    /// <returns>The selected file path, or null if cancelled.</returns>
    Task<string?> ShowSaveDialogAsync(
        string title,
        string defaultFileName,
        IReadOnlyList<(string Name, string[] Extensions)> filters);

    /// <summary>
    /// Shows an open file dialog.
    /// </summary>
    /// <param name="title">Dialog title.</param>
    /// <param name="filters">File type filters.</param>
    /// <param name="allowMultiple">Whether to allow selecting multiple files.</param>
    /// <returns>The selected file path, or null if cancelled.</returns>
    Task<string?> ShowOpenFileDialogAsync(
        string title,
        IReadOnlyList<(string Name, string[] Extensions)> filters,
        bool allowMultiple = false);

    /// <summary>
    /// Shows a folder picker dialog.
    /// </summary>
    /// <param name="title">Dialog title.</param>
    /// <returns>The selected folder path, or null if cancelled.</returns>
    Task<string?> ShowFolderPickerAsync(string title);

    /// <summary>
    /// Shows the go-to-line dialog.
    /// </summary>
    /// <param name="maxLine">Maximum line number.</param>
    /// <param name="currentLine">Current line number (pre-filled).</param>
    /// <returns>The line number, or null if cancelled.</returns>
    Task<int?> ShowGoToLineDialogAsync(int maxLine, int currentLine);
}
```

### Task 2: Create DialogService Implementation

**File:** `src/SeniorIntern.Desktop/Services/DialogService.cs`

```csharp
namespace SeniorIntern.Desktop.Services;

using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Avalonia;
using Avalonia.Controls;
using Avalonia.Controls.ApplicationLifetimes;
using Avalonia.Platform.Storage;
using SeniorIntern.Desktop.Views.Dialogs;

public sealed class DialogService : IDialogService
{
    private Window? GetMainWindow()
    {
        return Application.Current?.ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktop
            ? desktop.MainWindow
            : null;
    }

    public async Task ShowErrorAsync(string title, string message)
    {
        var window = GetMainWindow();
        if (window == null) return;

        var dialog = new MessageDialog
        {
            Title = title,
            Message = message,
            Icon = MessageDialogIcon.Error,
            Buttons = new[] { "OK" }
        };

        await dialog.ShowDialog(window);
    }

    public async Task ShowInfoAsync(string title, string message)
    {
        var window = GetMainWindow();
        if (window == null) return;

        var dialog = new MessageDialog
        {
            Title = title,
            Message = message,
            Icon = MessageDialogIcon.Information,
            Buttons = new[] { "OK" }
        };

        await dialog.ShowDialog(window);
    }

    public async Task<string?> ShowConfirmDialogAsync(
        string title,
        string message,
        IEnumerable<string> options)
    {
        var window = GetMainWindow();
        if (window == null) return null;

        var dialog = new MessageDialog
        {
            Title = title,
            Message = message,
            Icon = MessageDialogIcon.Question,
            Buttons = options.ToArray()
        };

        return await dialog.ShowDialog<string?>(window);
    }

    public async Task<string?> ShowSaveDialogAsync(
        string title,
        string defaultFileName,
        IReadOnlyList<(string Name, string[] Extensions)> filters)
    {
        var window = GetMainWindow();
        if (window == null) return null;

        var storageProvider = window.StorageProvider;
        var fileTypes = filters.Select(f => new FilePickerFileType(f.Name)
        {
            Patterns = f.Extensions
        }).ToList();

        var result = await storageProvider.SaveFilePickerAsync(new FilePickerSaveOptions
        {
            Title = title,
            SuggestedFileName = defaultFileName,
            FileTypeChoices = fileTypes
        });

        return result?.Path.LocalPath;
    }

    public async Task<string?> ShowOpenFileDialogAsync(
        string title,
        IReadOnlyList<(string Name, string[] Extensions)> filters,
        bool allowMultiple = false)
    {
        var window = GetMainWindow();
        if (window == null) return null;

        var storageProvider = window.StorageProvider;
        var fileTypes = filters.Select(f => new FilePickerFileType(f.Name)
        {
            Patterns = f.Extensions
        }).ToList();

        var results = await storageProvider.OpenFilePickerAsync(new FilePickerOpenOptions
        {
            Title = title,
            AllowMultiple = allowMultiple,
            FileTypeFilter = fileTypes
        });

        return results.FirstOrDefault()?.Path.LocalPath;
    }

    public async Task<string?> ShowFolderPickerAsync(string title)
    {
        var window = GetMainWindow();
        if (window == null) return null;

        var storageProvider = window.StorageProvider;
        var results = await storageProvider.OpenFolderPickerAsync(new FolderPickerOpenOptions
        {
            Title = title,
            AllowMultiple = false
        });

        return results.FirstOrDefault()?.Path.LocalPath;
    }

    public async Task<int?> ShowGoToLineDialogAsync(int maxLine, int currentLine)
    {
        var window = GetMainWindow();
        if (window == null) return null;

        var dialog = new GoToLineDialog
        {
            MaxLine = maxLine,
            CurrentLine = currentLine
        };

        return await dialog.ShowDialog<int?>(window);
    }
}
```

### Task 3: Create GoToLineDialog

**File:** `src/SeniorIntern.Desktop/Views/Dialogs/GoToLineDialog.axaml`

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="SeniorIntern.Desktop.Views.Dialogs.GoToLineDialog"
        Title="Go to Line"
        Width="300"
        Height="140"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        ShowInTaskbar="False"
        ExtendClientAreaToDecorationsHint="False">

    <Grid Margin="16" RowDefinitions="Auto, Auto, Auto">
        <!-- Label -->
        <TextBlock Grid.Row="0"
                   x:Name="PromptText"
                   Text="Go to line (1 - 100):"
                   Margin="0,0,0,8" />

        <!-- Input -->
        <TextBox Grid.Row="1"
                 x:Name="LineNumberInput"
                 Watermark="Line number"
                 Margin="0,0,0,16" />

        <!-- Buttons -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="8">
            <Button Content="Cancel"
                    Click="OnCancelClick"
                    IsCancel="True" />
            <Button Content="Go"
                    Classes="primary"
                    Click="OnGoClick"
                    IsDefault="True" />
        </StackPanel>
    </Grid>
</Window>
```

**File:** `src/SeniorIntern.Desktop/Views/Dialogs/GoToLineDialog.axaml.cs`

```csharp
namespace SeniorIntern.Desktop.Views.Dialogs;

using System;
using Avalonia.Controls;
using Avalonia.Input;
using Avalonia.Interactivity;

public partial class GoToLineDialog : Window
{
    private int _maxLine = 1;
    private int _currentLine = 1;

    public GoToLineDialog()
    {
        InitializeComponent();
        LineNumberInput.KeyDown += OnInputKeyDown;
    }

    public int MaxLine
    {
        get => _maxLine;
        set
        {
            _maxLine = value;
            PromptText.Text = $"Go to line (1 - {_maxLine}):";
        }
    }

    public int CurrentLine
    {
        get => _currentLine;
        set
        {
            _currentLine = value;
            LineNumberInput.Text = value.ToString();
            LineNumberInput.SelectAll();
        }
    }

    protected override void OnOpened(EventArgs e)
    {
        base.OnOpened(e);
        LineNumberInput.Focus();
        LineNumberInput.SelectAll();
    }

    private void OnInputKeyDown(object? sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            TryGoToLine();
            e.Handled = true;
        }
    }

    private void OnGoClick(object? sender, RoutedEventArgs e)
    {
        TryGoToLine();
    }

    private void OnCancelClick(object? sender, RoutedEventArgs e)
    {
        Close(null);
    }

    private void TryGoToLine()
    {
        if (int.TryParse(LineNumberInput.Text, out var line))
        {
            if (line >= 1 && line <= _maxLine)
            {
                Close(line);
                return;
            }
        }

        // Invalid input - refocus
        LineNumberInput.Focus();
        LineNumberInput.SelectAll();
    }
}
```

### Task 4: Create MessageDialog

**File:** `src/SeniorIntern.Desktop/Views/Dialogs/MessageDialog.axaml`

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="SeniorIntern.Desktop.Views.Dialogs.MessageDialog"
        Width="400"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        ShowInTaskbar="False"
        ExtendClientAreaToDecorationsHint="False">

    <Grid Margin="16" RowDefinitions="Auto, Auto">
        <!-- Icon and Message -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto, *" Margin="0,0,0,16">
            <PathIcon Grid.Column="0"
                      x:Name="DialogIcon"
                      Width="32" Height="32"
                      Margin="0,0,16,0"
                      VerticalAlignment="Top" />
            <TextBlock Grid.Column="1"
                       x:Name="MessageText"
                       TextWrapping="Wrap"
                       VerticalAlignment="Center" />
        </Grid>

        <!-- Buttons -->
        <ItemsControl Grid.Row="1"
                      x:Name="ButtonsPanel"
                      HorizontalAlignment="Right">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" Spacing="8" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Grid>
</Window>
```

**File:** `src/SeniorIntern.Desktop/Views/Dialogs/MessageDialog.axaml.cs`

```csharp
namespace SeniorIntern.Desktop.Views.Dialogs;

using System.Collections.Generic;
using System.Linq;
using Avalonia;
using Avalonia.Controls;
using Avalonia.Media;

public enum MessageDialogIcon
{
    None,
    Information,
    Warning,
    Error,
    Question
}

public partial class MessageDialog : Window
{
    public MessageDialog()
    {
        InitializeComponent();
    }

    public string Message
    {
        get => MessageText.Text ?? string.Empty;
        set => MessageText.Text = value;
    }

    public MessageDialogIcon Icon
    {
        get;
        set
        {
            field = value;
            UpdateIcon();
        }
    }

    public IEnumerable<string> Buttons
    {
        set => CreateButtons(value);
    }

    private void UpdateIcon()
    {
        var iconData = Icon switch
        {
            MessageDialogIcon.Information => Application.Current?.FindResource("InfoIcon"),
            MessageDialogIcon.Warning => Application.Current?.FindResource("WarningIcon"),
            MessageDialogIcon.Error => Application.Current?.FindResource("ErrorIcon"),
            MessageDialogIcon.Question => Application.Current?.FindResource("QuestionIcon"),
            _ => null
        };

        if (iconData is Geometry geometry)
        {
            DialogIcon.Data = geometry;
            DialogIcon.IsVisible = true;
        }
        else
        {
            DialogIcon.IsVisible = false;
        }
    }

    private void CreateButtons(IEnumerable<string> buttonLabels)
    {
        var buttons = buttonLabels.Select((label, index) =>
        {
            var button = new Button
            {
                Content = label,
                MinWidth = 80
            };

            if (index == 0) // First button is primary
            {
                button.Classes.Add("primary");
            }

            button.Click += (s, e) => Close(label);
            return button;
        });

        // Right-align with primary on right
        ButtonsPanel.ItemsSource = buttons.Reverse();
    }
}
```

### Task 5: Update MainWindow Integration

**File:** `src/SeniorIntern.Desktop/Views/MainWindow.axaml` (modifications)

```xml
<Grid ColumnDefinitions="Auto, Auto, *">
    <!-- Sidebar (File Explorer) -->
    <views:Sidebar Grid.Column="0"
                   Width="{Binding SidebarWidth}"
                   IsVisible="{Binding IsSidebarVisible}" />

    <!-- Splitter -->
    <GridSplitter Grid.Column="1"
                  Width="4"
                  Background="Transparent" />

    <!-- Main Content -->
    <Grid Grid.Column="2" RowDefinitions="*, Auto, Auto">
        <!-- Editor Panel -->
        <views:EditorPanel Grid.Row="0"
                           x:Name="EditorPanel"
                           DataContext="{Binding EditorPanel}" />

        <!-- Horizontal Splitter -->
        <GridSplitter Grid.Row="1"
                      Height="4"
                      HorizontalAlignment="Stretch"
                      Background="Transparent"
                      IsVisible="{Binding IsChatPanelVisible}" />

        <!-- Chat Panel (collapsible) -->
        <views:ChatPanel Grid.Row="2"
                         Height="{Binding ChatPanelHeight}"
                         DataContext="{Binding Chat}"
                         IsVisible="{Binding IsChatPanelVisible}" />
    </Grid>
</Grid>
```

### Task 6: Update MainWindowViewModel

**File:** `src/SeniorIntern.Desktop/ViewModels/MainWindowViewModel.cs` (additions)

```csharp
// Add properties
[ObservableProperty]
private EditorPanelViewModel _editorPanel;

[ObservableProperty]
private bool _isChatPanelVisible = true;

[ObservableProperty]
private double _chatPanelHeight = 300;

// Update constructor
public MainWindowViewModel(
    // ... existing dependencies ...
    EditorPanelViewModel editorPanel)
{
    // ... existing initialization ...
    EditorPanel = editorPanel;

    // Wire up file explorer to editor
    FileExplorer.FileOpenRequested += OnFileOpenRequested;
    EditorPanel.RevealInExplorerRequested += OnRevealInExplorerRequested;
}

private async void OnFileOpenRequested(object? sender, string filePath)
{
    await EditorPanel.OpenFileAsync(filePath);
}

private void OnRevealInExplorerRequested(object? sender, string filePath)
{
    FileExplorer.RevealFile(filePath);
}

[RelayCommand]
private void ToggleChatPanel()
{
    IsChatPanelVisible = !IsChatPanelVisible;
}
```

### Task 7: Register Services

**File:** `src/SeniorIntern.Desktop/App.axaml.cs` (additions)

```csharp
// In ConfigureServices or similar
services.AddSingleton<IDialogService, DialogService>();
services.AddSingleton<SyntaxHighlightingService>();
services.AddSingleton<EditorPanelViewModel>();
```

---

## Unit Testing Requirements

| Component | Test Count | Focus Areas |
|-----------|------------|-------------|
| DialogService.ShowErrorAsync | 2 | Dialog shows, no window fallback |
| DialogService.ShowConfirmDialogAsync | 2 | Returns selection, cancel |
| DialogService.ShowSaveDialogAsync | 2 | Path returned, cancelled |
| DialogService.ShowOpenFileDialogAsync | 2 | Path returned, filters |
| DialogService.ShowFolderPickerAsync | 1 | Path returned |
| DialogService.ShowGoToLineDialogAsync | 2 | Returns line, cancelled |
| GoToLineDialog | 4 | Valid input, invalid, range, Enter key |
| MessageDialog | 3 | Icons, buttons, click returns |
| MainWindow integration | 3 | File open, reveal, layout |
| Event wiring | 2 | Open flow, reveal flow |
| **Total** | **23** | |

---

## Files Summary

### Files to Create (6)

| File | Lines |
|------|-------|
| `Services/IDialogService.cs` | 50 |
| `Services/DialogService.cs` | 130 |
| `Views/Dialogs/GoToLineDialog.axaml` | 35 |
| `Views/Dialogs/GoToLineDialog.axaml.cs` | 70 |
| `Views/Dialogs/MessageDialog.axaml` | 30 |
| `Views/Dialogs/MessageDialog.axaml.cs` | 70 |

### Files to Modify (4)

| File | Changes |
|------|---------|
| `Views/MainWindow.axaml` | Add EditorPanel to layout |
| `ViewModels/MainWindowViewModel.cs` | Add EditorPanelVM, event wiring |
| `App.axaml.cs` | Register DialogService, services |
| `Directory.Packages.props` | Add AvaloniaEdit, TextMateSharp packages |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Go-to-line dialog opens with Ctrl+G |
| AC-2 | Go-to-line validates input (1 to max line) |
| AC-3 | Go-to-line navigates to correct line |
| AC-4 | Unsaved changes dialog shows Save/Don't Save/Cancel |
| AC-5 | Error dialog displays with error icon |
| AC-6 | Save dialog filters by language |
| AC-7 | EditorPanel integrated into MainWindow |
| AC-8 | FileExplorer opens files in editor |
| AC-9 | Reveal in Explorer selects file in tree |
| AC-10 | ChatPanel toggles visibility |

---

## Dependencies

| Part | Dependency Description |
|------|------------------------|
| v0.3.3b | EditorPanelViewModel for integration |
| v0.3.2 | FileExplorerViewModel for event wiring |
| Avalonia.Platform.Storage | File/folder pickers |

---

## NuGet Packages to Add

| Package | Version | Purpose |
|---------|---------|---------|
| AvaloniaEdit | 11.1.0 | TextEditor control |
| TextMateSharp | 1.0.63 | TextMate engine |
| TextMateSharp.Grammars | 1.0.63 | Pre-bundled grammars |

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.3.3g | 1 day |
