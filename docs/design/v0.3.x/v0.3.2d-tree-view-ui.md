# Design Specification: The Senior Intern v0.3.2d "Tree View UI"

## Executive Summary

This document provides a detailed implementation specification for v0.3.2d, which implements the main file explorer view with TreeView, hierarchical templates, inline rename, context menus, keyboard navigation, empty states, and loading indicators.

### v0.3.2d Scope

- Create `FileExplorerView.axaml` with TreeView and TreeDataTemplate
- Create `FileExplorerView.axaml.cs` with event handlers
- Implement header with workspace name and action buttons
- Implement filter TextBox with search icon
- Implement tree item template with icon, name, and modified indicator
- Implement empty state for no workspace
- Implement error message display
- Implement keyboard navigation and double-click handlers

### Key Deliverables

| Deliverable | Description |
|-------------|-------------|
| FileExplorerView.axaml | Main explorer UI with TreeView |
| FileExplorerView.axaml.cs | Code-behind with event handlers |
| TreeDataTemplate | Hierarchical item template |
| Empty state | "No folder opened" with Open button |
| Loading indicator | Progress bar during load |

---

## Feature Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     v0.3.2d Feature Tree                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  FileExplorerView.axaml                                          â”‚
â”‚  â”œâ”€â”€ Grid Layout (4 rows)                                        â”‚
â”‚  â”‚   â”œâ”€â”€ Row 0: Header                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Workspace name (with tooltip for path)             â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ New File button                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ New Folder button                                  â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Refresh button                                     â”‚
â”‚  â”‚   â”‚                                                           â”‚
â”‚  â”‚   â”œâ”€â”€ Row 1: Filter Box                                       â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ TextBox with SearchIcon inner content              â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Clear button (visible when filter has text)        â”‚
â”‚  â”‚   â”‚                                                           â”‚
â”‚  â”‚   â”œâ”€â”€ Row 2: Loading Indicator                                â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ProgressBar (indeterminate, 2px height)            â”‚
â”‚  â”‚   â”‚                                                           â”‚
â”‚  â”‚   â””â”€â”€ Row 3: Content Area                                     â”‚
â”‚  â”‚       â”œâ”€â”€ TreeView (when HasWorkspace)                       â”‚
â”‚  â”‚       â”œâ”€â”€ Empty state (when !HasWorkspace)                   â”‚
â”‚  â”‚       â””â”€â”€ Error message (when ErrorMessage not null)         â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ TreeDataTemplate                                            â”‚
â”‚  â”‚   â”œâ”€â”€ Grid (3 columns)                                        â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Col 0: Chevron or Icon                             â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ ChevronRight/Down (if ShowExpander)            â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ FileIcon (if !ShowExpander)                    â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ ProgressBar (if IsLoading)                     â”‚
â”‚  â”‚   â”‚   â”‚                                                       â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Col 1: Name                                         â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ TextBlock (if !IsRenaming)                     â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ TextBox (if IsRenaming)                        â”‚
â”‚  â”‚   â”‚   â”‚                                                       â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Col 2: Modified indicator                           â”‚
â”‚  â”‚   â”‚       â””â”€â”€ Ellipse (if IsModified)                        â”‚
â”‚  â”‚   â”‚                                                           â”‚
â”‚  â”‚   â””â”€â”€ ContextMenu                                             â”‚
â”‚  â”‚       â”œâ”€â”€ Open (file only)                                   â”‚
â”‚  â”‚       â”œâ”€â”€ Attach to Chat (file only)                         â”‚
â”‚  â”‚       â”œâ”€â”€ New File / New Folder                              â”‚
â”‚  â”‚       â”œâ”€â”€ Rename / Delete                                    â”‚
â”‚  â”‚       â””â”€â”€ Copy Path / Copy Relative / Reveal                 â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€â”€ Styles                                                      â”‚
â”‚      â”œâ”€â”€ TreeViewItem (IsExpanded, IsVisible bindings)          â”‚
â”‚      â”œâ”€â”€ icon-button (transparent, hover effect)                â”‚
â”‚      â”œâ”€â”€ highlighted (filter match background)                  â”‚
â”‚      â””â”€â”€ tree-loading (indeterminate progress)                  â”‚
â”‚                                                                   â”‚
â”‚  FileExplorerView.axaml.cs                                       â”‚
â”‚  â”œâ”€â”€ OnTreeViewDoubleTapped                                      â”‚
â”‚  â”‚   â”œâ”€â”€ File â†’ OpenFileCommand                                 â”‚
â”‚  â”‚   â””â”€â”€ Folder â†’ Toggle expansion                              â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ OnTreeViewKeyDown                                           â”‚
â”‚  â”‚   â”œâ”€â”€ Enter â†’ Open/Toggle                                    â”‚
â”‚  â”‚   â”œâ”€â”€ F2 â†’ BeginRename                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Delete â†’ ConfirmAndDelete                              â”‚
â”‚  â”‚   â”œâ”€â”€ Right/Left â†’ Expand/Collapse                           â”‚
â”‚  â”‚   â”œâ”€â”€ Ctrl+C â†’ Copy path                                     â”‚
â”‚  â”‚   â”œâ”€â”€ Ctrl+Shift+C â†’ Copy relative path                      â”‚
â”‚  â”‚   â”œâ”€â”€ Ctrl+N â†’ New file                                      â”‚
â”‚  â”‚   â”œâ”€â”€ Ctrl+Shift+N â†’ New folder                              â”‚
â”‚  â”‚   â””â”€â”€ Ctrl+R â†’ Refresh                                       â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ OnRenameKeyDown                                             â”‚
â”‚  â”‚   â”œâ”€â”€ Enter â†’ CommitRename                                   â”‚
â”‚  â”‚   â””â”€â”€ Escape â†’ CancelRename                                  â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ OnRenameLostFocus                                           â”‚
â”‚  â”‚   â””â”€â”€ CommitRename (auto-save)                               â”‚
â”‚  â”‚                                                               â”‚
â”‚  â””â”€â”€ ConfirmAndDeleteAsync                                       â”‚
â”‚      â””â”€â”€ ContentDialog with Delete/Cancel                       â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture Diagrams

### UI Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FileExplorerView                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Row 0: Header                                               â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚ â”‚ â”‚ MyProject                   â”‚ ğŸ“„+ â”‚ ğŸ“+ â”‚ ğŸ”„  â”‚           â”‚ â”‚
â”‚ â”‚ â”‚ (workspace name)            â”‚     â”‚     â”‚     â”‚           â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Row 1: Filter                                               â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ” Filter files...                                  â”‚ âœ• â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Row 2: Loading (when IsLoading)                             â”‚ â”‚
â”‚ â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Row 3: TreeView                                             â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚  â–¼ ğŸ“ src                                                   â”‚ â”‚
â”‚ â”‚     â–¶ ğŸ“ components                                         â”‚ â”‚
â”‚ â”‚       ğŸ“„ Button.tsx                                         â”‚ â”‚
â”‚ â”‚       ğŸ“„ Card.tsx                                           â”‚ â”‚
â”‚ â”‚     ğŸ“„ App.tsx                        â—                     â”‚ â”‚
â”‚ â”‚     ğŸ“„ index.ts                                             â”‚ â”‚
â”‚ â”‚  â–¶ ğŸ“ tests                                                 â”‚ â”‚
â”‚ â”‚  ğŸ“„ package.json                                            â”‚ â”‚
â”‚ â”‚  ğŸ“„ README.md                                               â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tree Item Template Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TreeDataTemplate                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Grid: 3 columns                                         â”‚     â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚
â”‚  â”‚ â”‚ Col 0    â”‚ Col 1                          â”‚ Col 2   â”‚ â”‚     â”‚
â”‚  â”‚ â”‚ 16px     â”‚ *                              â”‚ Auto    â”‚ â”‚     â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚     â”‚
â”‚  â”‚ â”‚          â”‚                                â”‚         â”‚ â”‚     â”‚
â”‚  â”‚ â”‚  â–¶ or ğŸ“„ â”‚  filename.ts                  â”‚    â—    â”‚ â”‚     â”‚
â”‚  â”‚ â”‚          â”‚  [TextBlock or TextBox]        â”‚ (mod)   â”‚ â”‚     â”‚
â”‚  â”‚ â”‚          â”‚                                â”‚         â”‚ â”‚     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â”‚  Column 0 shows:                                                 â”‚
â”‚  â€¢ Chevron (â–¶/â–¼) if ShowExpander (directory with children)      â”‚
â”‚  â€¢ FileIcon if !ShowExpander                                     â”‚
â”‚  â€¢ Spinner if IsLoading                                          â”‚
â”‚                                                                  â”‚
â”‚  Column 1 shows:                                                 â”‚
â”‚  â€¢ TextBlock (normal mode)                                       â”‚
â”‚  â€¢ TextBox (rename mode, IsRenaming = true)                      â”‚
â”‚                                                                  â”‚
â”‚  Column 2 shows:                                                 â”‚
â”‚  â€¢ Ellipse if IsModified (unsaved changes indicator)             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Empty State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Empty State (no workspace)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                         â”‚           â”‚                            â”‚
â”‚                         â”‚    ğŸ“     â”‚   48x48 folder icon       â”‚
â”‚                         â”‚           â”‚   (gray, muted)            â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                  â”‚
â”‚                      No folder opened                            â”‚
â”‚                                                                  â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â”‚   Open Folder    â”‚  accent button          â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Directory Structure

```
src/SeniorIntern.Desktop/
â””â”€â”€ Views/
    â”œâ”€â”€ FileExplorerView.axaml                        (NEW)
    â””â”€â”€ FileExplorerView.axaml.cs                     (NEW)
```

---

## Implementation Details

### Task 1: Create FileExplorerView.axaml

**File:** `src/SeniorIntern.Desktop/Views/FileExplorerView.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:SeniorIntern.Desktop.ViewModels"
             xmlns:converters="using:SeniorIntern.Desktop.Converters"
             x:Class="SeniorIntern.Desktop.Views.FileExplorerView"
             x:DataType="vm:FileExplorerViewModel">

    <UserControl.Resources>
        <converters:FileIconConverter x:Key="FileIconConverter" />
    </UserControl.Resources>

    <UserControl.Styles>
        <Style Selector="TreeViewItem">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
            <Setter Property="IsVisible" Value="{Binding IsVisible}" />
        </Style>
        <Style Selector="Button.icon-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="4" />
            <Setter Property="Width" Value="28" />
            <Setter Property="Height" Value="28" />
        </Style>
        <Style Selector="Button.icon-button:pointerover">
            <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}" />
        </Style>
        <Style Selector="TextBlock.highlighted">
            <Setter Property="Background" Value="{DynamicResource SystemAccentColorLight2}" />
        </Style>
        <Style Selector="ProgressBar.tree-loading">
            <Setter Property="IsIndeterminate" Value="True" />
            <Setter Property="Height" Value="2" />
            <Setter Property="Margin" Value="16,4" />
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="Auto,Auto,Auto,*">

        <!-- Row 0: Header -->
        <Border Grid.Row="0"
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                Padding="12,8">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto">
                <TextBlock Grid.Column="0"
                           Text="{Binding WorkspaceName, FallbackValue='Explorer'}"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"
                           TextTrimming="CharacterEllipsis"
                           ToolTip.Tip="{Binding WorkspacePath}" />

                <Button Grid.Column="1"
                        Command="{Binding NewFileCommand}"
                        CommandParameter="{Binding SelectedItem}"
                        ToolTip.Tip="New File (Ctrl+N)"
                        Classes="icon-button"
                        IsVisible="{Binding HasWorkspace}">
                    <PathIcon Data="{StaticResource NewFileIcon}" Width="16" Height="16" />
                </Button>

                <Button Grid.Column="2"
                        Command="{Binding NewFolderCommand}"
                        CommandParameter="{Binding SelectedItem}"
                        ToolTip.Tip="New Folder (Ctrl+Shift+N)"
                        Classes="icon-button"
                        IsVisible="{Binding HasWorkspace}">
                    <PathIcon Data="{StaticResource NewFolderIcon}" Width="16" Height="16" />
                </Button>

                <Button Grid.Column="3"
                        Command="{Binding RefreshCommand}"
                        ToolTip.Tip="Refresh (Ctrl+R)"
                        Classes="icon-button"
                        IsVisible="{Binding HasWorkspace}">
                    <PathIcon Data="{StaticResource RefreshIcon}" Width="16" Height="16" />
                </Button>
            </Grid>
        </Border>

        <!-- Row 1: Filter Box -->
        <Border Grid.Row="1" Padding="8,4" IsVisible="{Binding HasWorkspace}">
            <Grid ColumnDefinitions="*,Auto">
                <TextBox Grid.Column="0"
                         Text="{Binding SearchFilter, Mode=TwoWay}"
                         Watermark="Filter files..."
                         x:Name="FilterTextBox">
                    <TextBox.InnerLeftContent>
                        <PathIcon Data="{StaticResource SearchIcon}"
                                  Width="14" Height="14" Margin="8,0,4,0"
                                  Foreground="{DynamicResource SystemBaseMediumColor}" />
                    </TextBox.InnerLeftContent>
                </TextBox>
                <Button Grid.Column="1"
                        Command="{Binding ClearFilterCommand}"
                        IsVisible="{Binding SearchFilter.Length}"
                        Classes="icon-button" Margin="4,0,0,0">
                    <PathIcon Data="{StaticResource ClearIcon}" Width="12" Height="12" />
                </Button>
            </Grid>
        </Border>

        <!-- Row 2: Loading -->
        <ProgressBar Grid.Row="2" Classes="tree-loading" IsVisible="{Binding IsLoading}" />

        <!-- Row 3: TreeView -->
        <TreeView Grid.Row="3" x:Name="FileTree"
                  ItemsSource="{Binding RootItems}"
                  SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                  IsVisible="{Binding HasWorkspace}"
                  SelectionMode="Single"
                  DoubleTapped="OnTreeViewDoubleTapped"
                  KeyDown="OnTreeViewKeyDown">

            <TreeView.ItemTemplate>
                <TreeDataTemplate ItemsSource="{Binding Children}">
                    <Grid ColumnDefinitions="Auto,*,Auto" Background="Transparent"
                          ToolTip.Tip="{Binding Path}">

                        <!-- Chevron (directories) -->
                        <Panel Grid.Column="0" Width="16" IsVisible="{Binding ShowExpander}">
                            <PathIcon Data="{StaticResource ChevronRightIcon}"
                                      Width="12" Height="12"
                                      IsVisible="{Binding !IsExpanded}" />
                            <PathIcon Data="{StaticResource ChevronDownIcon}"
                                      Width="12" Height="12"
                                      IsVisible="{Binding IsExpanded}" />
                        </Panel>

                        <!-- File Icon -->
                        <PathIcon Grid.Column="0"
                                  Data="{Binding IconKey, Converter={StaticResource FileIconConverter}}"
                                  Width="16" Height="16" Margin="0,0,6,0"
                                  IsVisible="{Binding !ShowExpander}" />

                        <!-- Loading spinner -->
                        <ProgressBar Grid.Column="0" IsIndeterminate="True"
                                     Width="16" Height="16"
                                     IsVisible="{Binding IsLoading}" Classes="circular" />

                        <!-- Name (normal) -->
                        <TextBlock Grid.Column="1" Text="{Binding Name}"
                                   Classes="item-name"
                                   Classes.highlighted="{Binding IsHighlighted}"
                                   IsVisible="{Binding !IsRenaming}"
                                   VerticalAlignment="Center"
                                   TextTrimming="CharacterEllipsis" />

                        <!-- Name (rename mode) -->
                        <TextBox Grid.Column="1" Text="{Binding EditingName, Mode=TwoWay}"
                                 IsVisible="{Binding IsRenaming}"
                                 x:Name="RenameTextBox"
                                 KeyDown="OnRenameKeyDown"
                                 LostFocus="OnRenameLostFocus"
                                 Padding="2" MinWidth="100" />

                        <!-- Modified indicator -->
                        <Ellipse Grid.Column="2" Width="8" Height="8"
                                 Fill="{DynamicResource SystemAccentColor}"
                                 IsVisible="{Binding IsModified}"
                                 Margin="6,0,0,0" ToolTip.Tip="Unsaved changes" />
                    </Grid>
                </TreeDataTemplate>
            </TreeView.ItemTemplate>

            <!-- Context Menu defined inline -->
            <TreeView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Open" Command="{Binding OpenFileCommand}"
                              CommandParameter="{Binding SelectedItem}"
                              IsVisible="{Binding SelectedItem.IsFile}" InputGesture="Enter">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource FileIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Attach to Chat" Command="{Binding AttachToContextCommand}"
                              CommandParameter="{Binding SelectedItem}"
                              IsVisible="{Binding SelectedItem.IsFile}">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource AttachIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator IsVisible="{Binding SelectedItem.IsFile}" />

                    <MenuItem Header="New File" Command="{Binding NewFileCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="Ctrl+N">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource NewFileIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="New Folder" Command="{Binding NewFolderCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="Ctrl+Shift+N">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource NewFolderIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />

                    <MenuItem Header="Rename" Command="{Binding RenameCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="F2">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource RenameIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Delete" Command="{Binding DeleteCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="Delete">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource DeleteIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />

                    <MenuItem Header="Copy Path" Command="{Binding CopyPathCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="Ctrl+C">
                        <MenuItem.Icon>
                            <PathIcon Data="{StaticResource CopyIcon}" Width="16" Height="16" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Copy Relative Path" Command="{Binding CopyRelativePathCommand}"
                              CommandParameter="{Binding SelectedItem}" InputGesture="Ctrl+Shift+C" />
                    <MenuItem Header="Reveal in File Manager" Command="{Binding RevealInFinderCommand}"
                              CommandParameter="{Binding SelectedItem}" />
                </ContextMenu>
            </TreeView.ContextMenu>
        </TreeView>

        <!-- Empty state -->
        <StackPanel Grid.Row="3" IsVisible="{Binding !HasWorkspace}"
                    HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="16">
            <PathIcon Data="{StaticResource FolderIcon}" Width="48" Height="48"
                      Foreground="{DynamicResource SystemBaseMediumColor}" />
            <TextBlock Text="No folder opened" HorizontalAlignment="Center"
                       Foreground="{DynamicResource SystemBaseMediumColor}" />
            <Button Command="{Binding OpenWorkspaceCommand}"
                    Content="Open Folder" HorizontalAlignment="Center" Classes="accent" />
        </StackPanel>

        <!-- Error message -->
        <Border Grid.Row="3"
                IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                Background="{DynamicResource SystemErrorBackgroundBrush}"
                Padding="12" Margin="8" CornerRadius="4" VerticalAlignment="Bottom">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Grid.Column="0" Text="{Binding ErrorMessage}" TextWrapping="Wrap"
                           Foreground="{DynamicResource SystemErrorTextBrush}" />
                <Button Grid.Column="1" Content="Dismiss" Command="{Binding ClearErrorCommand}"
                        Classes="link-button" Margin="8,0,0,0" />
            </Grid>
        </Border>
    </Grid>
</UserControl>
```

### Task 2: Create FileExplorerView.axaml.cs

**File:** `src/SeniorIntern.Desktop/Views/FileExplorerView.axaml.cs`

```csharp
namespace SeniorIntern.Desktop.Views;

using Avalonia.Controls;
using Avalonia.Input;
using Avalonia.Interactivity;
using SeniorIntern.Desktop.ViewModels;

public partial class FileExplorerView : UserControl
{
    public FileExplorerView() => InitializeComponent();

    private FileExplorerViewModel? ViewModel => DataContext as FileExplorerViewModel;

    private void OnTreeViewDoubleTapped(object? sender, TappedEventArgs e)
    {
        if (ViewModel?.SelectedItem is not { } item) return;

        if (item.IsFile)
            ViewModel.OpenFileCommand.Execute(item);
        else if (item.IsDirectory)
            item.IsExpanded = !item.IsExpanded;
    }

    private void OnTreeViewKeyDown(object? sender, KeyEventArgs e)
    {
        if (ViewModel?.SelectedItem is not { } item) return;

        switch (e.Key)
        {
            case Key.Enter:
                if (item.IsFile) ViewModel.OpenFileCommand.Execute(item);
                else item.IsExpanded = !item.IsExpanded;
                e.Handled = true;
                break;

            case Key.F2:
                item.BeginRename();
                e.Handled = true;
                break;

            case Key.Delete:
                _ = ConfirmAndDeleteAsync(item);
                e.Handled = true;
                break;

            case Key.Right when item.IsDirectory && !item.IsExpanded:
                item.IsExpanded = true;
                e.Handled = true;
                break;

            case Key.Left when item.IsDirectory && item.IsExpanded:
                item.IsExpanded = false;
                e.Handled = true;
                break;

            case Key.C when e.KeyModifiers.HasFlag(KeyModifiers.Control):
                if (e.KeyModifiers.HasFlag(KeyModifiers.Shift))
                    ViewModel.CopyRelativePathCommand.Execute(item);
                else
                    ViewModel.CopyPathCommand.Execute(item);
                e.Handled = true;
                break;

            case Key.N when e.KeyModifiers.HasFlag(KeyModifiers.Control):
                if (e.KeyModifiers.HasFlag(KeyModifiers.Shift))
                    ViewModel.NewFolderCommand.Execute(item);
                else
                    ViewModel.NewFileCommand.Execute(item);
                e.Handled = true;
                break;

            case Key.R when e.KeyModifiers.HasFlag(KeyModifiers.Control):
                ViewModel.RefreshCommand.Execute(null);
                e.Handled = true;
                break;
        }
    }

    private void OnRenameKeyDown(object? sender, KeyEventArgs e)
    {
        if (sender is not TextBox { DataContext: FileTreeItemViewModel item }) return;

        if (e.Key == Key.Enter)
        {
            item.CommitRenameCommand.Execute(null);
            e.Handled = true;
        }
        else if (e.Key == Key.Escape)
        {
            item.CancelRenameCommand.Execute(null);
            e.Handled = true;
        }
    }

    private void OnRenameLostFocus(object? sender, RoutedEventArgs e)
    {
        if (sender is TextBox { DataContext: FileTreeItemViewModel { IsRenaming: true } item })
            item.CommitRenameCommand.Execute(null);
    }

    private async Task ConfirmAndDeleteAsync(FileTreeItemViewModel item)
    {
        if (ViewModel == null || TopLevel.GetTopLevel(this) is not Window window) return;

        var itemType = item.IsDirectory ? "folder" : "file";
        var message = item.IsDirectory
            ? $"Delete '{item.Name}' and all its contents?"
            : $"Delete '{item.Name}'?";

        var dialog = new ContentDialog
        {
            Title = $"Delete {itemType}",
            Content = message,
            PrimaryButtonText = "Delete",
            CloseButtonText = "Cancel",
            DefaultButton = ContentDialogButton.Close
        };

        if (await dialog.ShowAsync(window) == ContentDialogResult.Primary)
            await ViewModel.DeleteItemInternalAsync(item);
    }
}
```

---

## Unit Testing Requirements

| Component | Test Count | Focus Areas |
|-----------|------------|-------------|
| OnTreeViewDoubleTapped | 2 | File open, folder toggle |
| OnTreeViewKeyDown | 8 | All keyboard shortcuts |
| OnRenameKeyDown | 2 | Enter commit, Escape cancel |
| OnRenameLostFocus | 1 | Auto-commit |
| ConfirmAndDeleteAsync | 2 | Confirm, cancel |
| **Total** | **15** | |

---

## Files Summary

| File | Lines |
|------|-------|
| `Views/FileExplorerView.axaml` | 180 |
| `Views/FileExplorerView.axaml.cs` | 95 |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Header shows workspace name with path tooltip |
| AC-2 | Filter box has search icon and clear button |
| AC-3 | Loading progress bar shows during IsLoading |
| AC-4 | TreeView displays hierarchical structure |
| AC-5 | Double-click opens file or toggles folder |
| AC-6 | F2 starts inline rename |
| AC-7 | Delete shows confirmation dialog |
| AC-8 | Empty state shows when no workspace |
| AC-9 | Error message dismissible |
| AC-10 | Context menu has all operations |

---

## Dependencies

| Part | Dependency Description |
|------|------------------------|
| v0.3.2a | FileTreeItemViewModel |
| v0.3.2b | FileExplorerViewModel |
| v0.3.2c | FileIconConverter, static geometries |

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.3.2d | 1 day |
