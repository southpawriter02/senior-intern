# Design Specification: The Senior Intern v0.3.1c "Language Detection"

## Executive Summary

This document provides a detailed implementation specification for v0.3.1c, which implements a comprehensive language detection utility. The `LanguageDetector` identifies programming languages based on file extensions and special file names, following VSCode/TextMate language identifier conventions.

### v0.3.1c Scope (from v0.3.1 Design Document)

- Create `LanguageDetector` static utility class
- Map 80+ file extensions to language identifiers
- Handle special file names (Dockerfile, Makefile, etc.)
- Provide human-readable display names
- Query methods for supported extensions and languages

### Key Deliverables

| Deliverable | Description |
|-------------|-------------|
| LanguageDetector | Static utility for language detection |
| ExtensionMap | Dictionary mapping extensions to languages |
| FileNameMap | Dictionary mapping special files to languages |
| DetectByExtension | Detect language from file extension |
| DetectByFileName | Detect language from full file name |
| GetDisplayName | Human-readable language name |

---

## Feature Overview

```
┌──────────────────────────────────────────────────────────────────┐
│                     v0.3.1c Feature Tree                          │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  LanguageDetector (static class)                                  │
│  ├── Detection Methods                                            │
│  │   ├── DetectByExtension(".cs") → "csharp"                     │
│  │   └── DetectByFileName("Dockerfile") → "dockerfile"           │
│  │       └── Checks FileNameMap first, then falls back to ext    │
│  │                                                                │
│  ├── Query Methods                                                │
│  │   ├── GetAllSupportedExtensions() → [".cs", ".py", ...]      │
│  │   ├── GetAllSpecialFileNames() → ["Dockerfile", ...]         │
│  │   └── GetAllLanguages() → ["csharp", "python", ...]          │
│  │                                                                │
│  ├── Display Methods                                              │
│  │   └── GetDisplayName("csharp") → "C#"                         │
│  │                                                                │
│  ├── ExtensionMap (80+ mappings)                                  │
│  │   ├── .NET: .cs, .vb, .fs, .csproj, .axaml                    │
│  │   ├── Web: .js, .ts, .jsx, .tsx, .html, .css, .scss           │
│  │   ├── Python: .py, .pyi, .pyw                                  │
│  │   ├── Systems: .c, .cpp, .h, .rs, .go                         │
│  │   ├── Config: .json, .yaml, .toml, .xml                       │
│  │   ├── Shell: .sh, .bash, .ps1, .bat                           │
│  │   ├── Docs: .md, .rst, .tex                                    │
│  │   └── ... and many more                                       │
│  │                                                                │
│  └── FileNameMap (25+ mappings)                                   │
│      ├── Dockerfile, Makefile, Rakefile                           │
│      ├── Gemfile, Podfile, Vagrantfile                           │
│      ├── package.json, tsconfig.json, Cargo.toml                 │
│      ├── requirements.txt, setup.py, go.mod                      │
│      └── .gitattributes, .editorconfig                           │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

---

## Architecture Diagrams

### Detection Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                      Detection Flow                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Input: File Path or Name                                        │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ "/project/src/Controllers/UserController.cs"             │    │
│  └───────────────────────────┬──────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ Extract file name: "UserController.cs"                   │    │
│  └───────────────────────────┬──────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ DetectByFileName("UserController.cs")                    │    │
│  │                                                          │    │
│  │  1. Check FileNameMap["UserController.cs"]               │    │
│  │     → Not found                                          │    │
│  │                                                          │    │
│  │  2. Extract extension: ".cs"                             │    │
│  │                                                          │    │
│  │  3. Check ExtensionMap[".cs"]                            │    │
│  │     → Found: "csharp"                                    │    │
│  └───────────────────────────┬──────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ Output: "csharp"                                         │    │
│  └──────────────────────────────────────────────────────────┘    │
│                                                                  │
│  Special File Example:                                           │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ DetectByFileName("Dockerfile")                           │    │
│  │                                                          │    │
│  │  1. Check FileNameMap["Dockerfile"]                      │    │
│  │     → Found: "dockerfile"                                │    │
│  │                                                          │    │
│  │  2. Skip extension check (already matched)               │    │
│  └───────────────────────────┬──────────────────────────────┘    │
│                              │                                   │
│                              ▼                                   │
│  ┌──────────────────────────────────────────────────────────┐    │
│  │ Output: "dockerfile"                                     │    │
│  └──────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### Language Categories

```
┌─────────────────────────────────────────────────────────────────┐
│                    Supported Language Categories                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────────┐   ┌──────────────────┐                     │
│  │ .NET / C#        │   │ JavaScript       │                     │
│  ├──────────────────┤   ├──────────────────┤                     │
│  │ .cs    csharp    │   │ .js   javascript │                     │
│  │ .csx   csharp    │   │ .mjs  javascript │                     │
│  │ .vb    vb        │   │ .jsx  jsxreact   │                     │
│  │ .fs    fsharp    │   │ .ts   typescript │                     │
│  │ .fsx   fsharp    │   │ .tsx  tsxreact   │                     │
│  │ .csproj xml      │   │ .vue  vue        │                     │
│  │ .axaml xml       │   │ .svelte svelte   │                     │
│  └──────────────────┘   └──────────────────┘                     │
│                                                                  │
│  ┌──────────────────┐   ┌──────────────────┐                     │
│  │ Python           │   │ Systems          │                     │
│  ├──────────────────┤   ├──────────────────┤                     │
│  │ .py    python    │   │ .c     c         │                     │
│  │ .pyi   python    │   │ .h     c         │                     │
│  │ .pyw   python    │   │ .cpp   cpp       │                     │
│  │ .pyx   python    │   │ .hpp   cpp       │                     │
│  └──────────────────┘   │ .rs    rust      │                     │
│                         │ .go    go        │                     │
│  ┌──────────────────┐   └──────────────────┘                     │
│  │ Config / Data    │                                            │
│  ├──────────────────┤   ┌──────────────────┐                     │
│  │ .json  json      │   │ Shell / Scripts  │                     │
│  │ .jsonc jsonc     │   ├──────────────────┤                     │
│  │ .yaml  yaml      │   │ .sh    shellscript│                    │
│  │ .yml   yaml      │   │ .bash  shellscript│                    │
│  │ .toml  toml      │   │ .zsh   shellscript│                    │
│  │ .xml   xml       │   │ .ps1   powershell│                     │
│  │ .ini   ini       │   │ .bat   bat       │                     │
│  └──────────────────┘   └──────────────────┘                     │
│                                                                  │
│  ┌──────────────────┐   ┌──────────────────┐                     │
│  │ Documentation    │   │ Special Files    │                     │
│  ├──────────────────┤   ├──────────────────┤                     │
│  │ .md   markdown   │   │ Dockerfile       │                     │
│  │ .mdx  mdx        │   │ Makefile         │                     │
│  │ .rst  rst        │   │ Gemfile          │                     │
│  │ .tex  latex      │   │ package.json     │                     │
│  └──────────────────┘   │ tsconfig.json    │                     │
│                         │ Cargo.toml       │                     │
│                         │ go.mod           │                     │
│                         └──────────────────┘                     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## Directory Structure

```
src/SeniorIntern.Core/
└── Utilities/
    └── LanguageDetector.cs                           (NEW)
```

---

## Implementation Details

### Task 1: Create LanguageDetector

**File:** `src/SeniorIntern.Core/Utilities/LanguageDetector.cs`

```csharp
namespace SeniorIntern.Core.Utilities;

/// <summary>
/// Detects programming language based on file extension or name.
/// Language identifiers follow VSCode/TextMate conventions.
/// </summary>
public static class LanguageDetector
{
    /// <summary>
    /// Maps file extensions to language identifiers.
    /// </summary>
    private static readonly Dictionary<string, string> ExtensionMap = new(StringComparer.OrdinalIgnoreCase)
    {
        // .NET / C#
        [".cs"] = "csharp",
        [".csx"] = "csharp",
        [".vb"] = "vb",
        [".fs"] = "fsharp",
        [".fsx"] = "fsharp",
        [".csproj"] = "xml",
        [".fsproj"] = "xml",
        [".vbproj"] = "xml",
        [".sln"] = "text",
        [".props"] = "xml",
        [".targets"] = "xml",
        [".nuspec"] = "xml",

        // Avalonia / XAML
        [".axaml"] = "xml",
        [".xaml"] = "xml",
        [".paml"] = "xml",

        // JavaScript / TypeScript
        [".js"] = "javascript",
        [".mjs"] = "javascript",
        [".cjs"] = "javascript",
        [".jsx"] = "javascriptreact",
        [".ts"] = "typescript",
        [".mts"] = "typescript",
        [".cts"] = "typescript",
        [".tsx"] = "typescriptreact",

        // Python
        [".py"] = "python",
        [".pyi"] = "python",
        [".pyw"] = "python",
        [".pyx"] = "python",

        // Ruby
        [".rb"] = "ruby",
        [".rake"] = "ruby",
        [".gemspec"] = "ruby",

        // Go
        [".go"] = "go",
        [".mod"] = "go",
        [".sum"] = "text",

        // Rust
        [".rs"] = "rust",

        // Java / Kotlin
        [".java"] = "java",
        [".kt"] = "kotlin",
        [".kts"] = "kotlin",
        [".gradle"] = "groovy",

        // Swift / Objective-C
        [".swift"] = "swift",
        [".m"] = "objective-c",
        [".mm"] = "objective-cpp",

        // C / C++
        [".c"] = "c",
        [".h"] = "c",
        [".cpp"] = "cpp",
        [".cc"] = "cpp",
        [".cxx"] = "cpp",
        [".hpp"] = "cpp",
        [".hxx"] = "cpp",

        // Web
        [".html"] = "html",
        [".htm"] = "html",
        [".xhtml"] = "html",
        [".css"] = "css",
        [".scss"] = "scss",
        [".sass"] = "sass",
        [".less"] = "less",
        [".vue"] = "vue",
        [".svelte"] = "svelte",

        // Data / Config
        [".json"] = "json",
        [".jsonc"] = "jsonc",
        [".json5"] = "json5",
        [".xml"] = "xml",
        [".xsl"] = "xml",
        [".xslt"] = "xml",
        [".yaml"] = "yaml",
        [".yml"] = "yaml",
        [".toml"] = "toml",
        [".ini"] = "ini",
        [".cfg"] = "ini",
        [".conf"] = "ini",
        [".config"] = "xml",
        [".env"] = "properties",
        [".properties"] = "properties",

        // Shell / Scripts
        [".sh"] = "shellscript",
        [".bash"] = "shellscript",
        [".zsh"] = "shellscript",
        [".fish"] = "shellscript",
        [".ps1"] = "powershell",
        [".psm1"] = "powershell",
        [".psd1"] = "powershell",
        [".bat"] = "bat",
        [".cmd"] = "bat",

        // Markup / Documentation
        [".md"] = "markdown",
        [".mdx"] = "mdx",
        [".markdown"] = "markdown",
        [".rst"] = "restructuredtext",
        [".tex"] = "latex",
        [".ltx"] = "latex",
        [".bib"] = "bibtex",

        // Database
        [".sql"] = "sql",
        [".pgsql"] = "sql",
        [".mysql"] = "sql",

        // Docker / Containers
        [".dockerfile"] = "dockerfile",
        [".containerfile"] = "dockerfile",

        // Ignore files
        [".gitignore"] = "ignore",
        [".dockerignore"] = "ignore",
        [".npmignore"] = "ignore",
        [".eslintignore"] = "ignore",

        // Other languages
        [".r"] = "r",
        [".R"] = "r",
        [".lua"] = "lua",
        [".pl"] = "perl",
        [".pm"] = "perl",
        [".php"] = "php",
        [".scala"] = "scala",
        [".clj"] = "clojure",
        [".cljs"] = "clojure",
        [".erl"] = "erlang",
        [".ex"] = "elixir",
        [".exs"] = "elixir",
        [".hs"] = "haskell",
        [".ml"] = "ocaml",
        [".mli"] = "ocaml",
        [".dart"] = "dart",
        [".graphql"] = "graphql",
        [".gql"] = "graphql",
        [".proto"] = "protobuf",
        [".tf"] = "terraform",
        [".tfvars"] = "terraform",
    };

    /// <summary>
    /// Maps special file names (without extension) to language identifiers.
    /// </summary>
    private static readonly Dictionary<string, string> FileNameMap = new(StringComparer.OrdinalIgnoreCase)
    {
        // Docker
        ["Dockerfile"] = "dockerfile",
        ["Containerfile"] = "dockerfile",

        // Build systems
        ["Makefile"] = "makefile",
        ["GNUmakefile"] = "makefile",
        ["makefile"] = "makefile",
        ["CMakeLists.txt"] = "cmake",
        ["Jenkinsfile"] = "groovy",

        // Ruby
        ["Rakefile"] = "ruby",
        ["Gemfile"] = "ruby",
        ["Podfile"] = "ruby",
        ["Vagrantfile"] = "ruby",

        // Config files (with extension in name)
        ["tsconfig.json"] = "jsonc",
        ["jsconfig.json"] = "jsonc",
        ["package.json"] = "json",
        ["package-lock.json"] = "json",
        ["composer.json"] = "json",
        [".prettierrc"] = "json",
        [".eslintrc"] = "json",
        [".babelrc"] = "json",

        // Cargo / Rust
        ["Cargo.toml"] = "toml",
        ["Cargo.lock"] = "toml",

        // Go
        ["go.mod"] = "go",
        ["go.sum"] = "text",

        // Python
        ["requirements.txt"] = "pip-requirements",
        ["setup.py"] = "python",
        ["setup.cfg"] = "ini",
        ["pyproject.toml"] = "toml",
        ["Pipfile"] = "toml",
        ["Pipfile.lock"] = "json",

        // Other
        ["Procfile"] = "text",
        [".gitattributes"] = "properties",
        [".editorconfig"] = "ini",
    };

    /// <summary>
    /// Detects the programming language based on file extension.
    /// </summary>
    /// <param name="extension">File extension including dot (e.g., ".cs").</param>
    /// <returns>Language identifier or null if not recognized.</returns>
    public static string? DetectByExtension(string? extension)
    {
        if (string.IsNullOrEmpty(extension))
            return null;

        return ExtensionMap.TryGetValue(extension, out var language)
            ? language
            : null;
    }

    /// <summary>
    /// Detects the programming language based on file name.
    /// Checks special file names first, then falls back to extension.
    /// </summary>
    /// <param name="fileName">File name (e.g., "Program.cs" or "Dockerfile").</param>
    /// <returns>Language identifier or null if not recognized.</returns>
    public static string? DetectByFileName(string? fileName)
    {
        if (string.IsNullOrEmpty(fileName))
            return null;

        // Check special file names first
        if (FileNameMap.TryGetValue(fileName, out var language))
            return language;

        // Fall back to extension
        var extension = Path.GetExtension(fileName);
        return DetectByExtension(extension);
    }

    /// <summary>
    /// Detects the programming language from a full file path.
    /// </summary>
    /// <param name="filePath">Absolute or relative file path.</param>
    /// <returns>Language identifier or null if not recognized.</returns>
    public static string? DetectByPath(string? filePath)
    {
        if (string.IsNullOrEmpty(filePath))
            return null;

        var fileName = Path.GetFileName(filePath);
        return DetectByFileName(fileName);
    }

    /// <summary>
    /// Gets all supported file extensions.
    /// </summary>
    public static IReadOnlyCollection<string> GetAllSupportedExtensions()
        => ExtensionMap.Keys;

    /// <summary>
    /// Gets all special file names that have language mappings.
    /// </summary>
    public static IReadOnlyCollection<string> GetAllSpecialFileNames()
        => FileNameMap.Keys;

    /// <summary>
    /// Gets all unique language identifiers.
    /// </summary>
    public static IReadOnlyCollection<string> GetAllLanguages()
        => ExtensionMap.Values.Concat(FileNameMap.Values).Distinct().ToList();

    /// <summary>
    /// Gets extensions for a specific language.
    /// </summary>
    public static IReadOnlyList<string> GetExtensionsForLanguage(string language)
        => ExtensionMap
            .Where(kvp => kvp.Value.Equals(language, StringComparison.OrdinalIgnoreCase))
            .Select(kvp => kvp.Key)
            .ToList();

    /// <summary>
    /// Checks if a file extension is supported.
    /// </summary>
    public static bool IsExtensionSupported(string? extension)
        => !string.IsNullOrEmpty(extension) && ExtensionMap.ContainsKey(extension);

    /// <summary>
    /// Checks if a file is likely a text/code file (not binary).
    /// </summary>
    public static bool IsLikelyTextFile(string? fileName)
    {
        if (string.IsNullOrEmpty(fileName))
            return false;

        // Check if we recognize the file
        var language = DetectByFileName(fileName);
        if (language is not null)
            return true;

        // Common text extensions not in our language map
        var ext = Path.GetExtension(fileName)?.ToLowerInvariant();
        return ext is ".txt" or ".log" or ".csv" or ".tsv" or ".diff" or ".patch";
    }

    /// <summary>
    /// Gets a human-readable display name for a language identifier.
    /// </summary>
    public static string GetDisplayName(string? language)
    {
        if (string.IsNullOrEmpty(language))
            return "Plain Text";

        return language switch
        {
            "csharp" => "C#",
            "fsharp" => "F#",
            "vb" => "Visual Basic",
            "javascript" => "JavaScript",
            "javascriptreact" => "JavaScript (React)",
            "typescript" => "TypeScript",
            "typescriptreact" => "TypeScript (React)",
            "cpp" => "C++",
            "c" => "C",
            "objective-c" => "Objective-C",
            "objective-cpp" => "Objective-C++",
            "shellscript" => "Shell Script",
            "powershell" => "PowerShell",
            "bat" => "Batch File",
            "restructuredtext" => "reStructuredText",
            "jsonc" => "JSON with Comments",
            "json5" => "JSON5",
            "pip-requirements" => "Python Requirements",
            "xml" => "XML",
            "html" => "HTML",
            "css" => "CSS",
            "scss" => "SCSS",
            "sass" => "Sass",
            "less" => "Less",
            "yaml" => "YAML",
            "toml" => "TOML",
            "ini" => "INI",
            "sql" => "SQL",
            "dockerfile" => "Dockerfile",
            "makefile" => "Makefile",
            "cmake" => "CMake",
            "markdown" => "Markdown",
            "mdx" => "MDX",
            "latex" => "LaTeX",
            "bibtex" => "BibTeX",
            "graphql" => "GraphQL",
            "protobuf" => "Protocol Buffers",
            "terraform" => "Terraform",
            "ignore" => "Ignore File",
            "properties" => "Properties",
            _ => char.ToUpper(language[0]) + language[1..] // Capitalize first letter
        };
    }

    /// <summary>
    /// Gets the icon name/key for a language (for use with icon fonts/resources).
    /// </summary>
    public static string GetIconName(string? language)
    {
        return language switch
        {
            "csharp" or "fsharp" or "vb" => "dotnet",
            "javascript" or "javascriptreact" => "javascript",
            "typescript" or "typescriptreact" => "typescript",
            "python" or "pip-requirements" => "python",
            "ruby" => "ruby",
            "go" => "go",
            "rust" => "rust",
            "java" or "kotlin" or "groovy" => "java",
            "swift" or "objective-c" or "objective-cpp" => "apple",
            "c" or "cpp" => "c",
            "html" or "xml" => "html",
            "css" or "scss" or "sass" or "less" => "css",
            "vue" => "vue",
            "svelte" => "svelte",
            "json" or "jsonc" or "json5" => "json",
            "yaml" or "toml" or "ini" => "config",
            "markdown" or "mdx" or "restructuredtext" => "markdown",
            "dockerfile" => "docker",
            "shellscript" or "bash" or "zsh" => "terminal",
            "powershell" => "powershell",
            "sql" => "database",
            "git" or "ignore" => "git",
            _ => "file"
        };
    }
}
```

---

## Unit Testing Requirements

| Component | Test Count | Focus Areas |
|-----------|------------|-------------|
| DetectByExtension | 6 | Common extensions, case sensitivity |
| DetectByFileName | 6 | Special files, fallback to extension |
| DetectByPath | 3 | Full path handling |
| GetDisplayName | 5 | Special cases, fallback |
| Query Methods | 4 | All extensions, languages, filtering |
| Edge Cases | 3 | Null, empty, unknown |
| **Total** | **27** | |

### Key Test Scenarios

```csharp
// Extension Detection Tests
[Theory]
[InlineData(".cs", "csharp")]
[InlineData(".CS", "csharp")]  // Case insensitive
[InlineData(".py", "python")]
[InlineData(".ts", "typescript")]
[InlineData(".tsx", "typescriptreact")]
[InlineData(".axaml", "xml")]
public void DetectByExtension_ReturnsCorrectLanguage(string extension, string expected)
{
    Assert.Equal(expected, LanguageDetector.DetectByExtension(extension));
}

[Fact]
public void DetectByExtension_UnknownExtension_ReturnsNull()
{
    Assert.Null(LanguageDetector.DetectByExtension(".xyz"));
}

// File Name Detection Tests
[Theory]
[InlineData("Dockerfile", "dockerfile")]
[InlineData("Makefile", "makefile")]
[InlineData("package.json", "json")]
[InlineData("tsconfig.json", "jsonc")]
[InlineData("Cargo.toml", "toml")]
[InlineData("go.mod", "go")]
public void DetectByFileName_SpecialFiles_ReturnsCorrectLanguage(string fileName, string expected)
{
    Assert.Equal(expected, LanguageDetector.DetectByFileName(fileName));
}

[Fact]
public void DetectByFileName_RegularFile_FallsBackToExtension()
{
    Assert.Equal("csharp", LanguageDetector.DetectByFileName("Program.cs"));
    Assert.Equal("python", LanguageDetector.DetectByFileName("main.py"));
}

// Path Detection Tests
[Fact]
public void DetectByPath_ExtractsFileNameAndDetects()
{
    Assert.Equal("csharp", LanguageDetector.DetectByPath("/home/user/project/src/Program.cs"));
    Assert.Equal("dockerfile", LanguageDetector.DetectByPath("/app/Dockerfile"));
}

// Display Name Tests
[Theory]
[InlineData("csharp", "C#")]
[InlineData("fsharp", "F#")]
[InlineData("typescript", "TypeScript")]
[InlineData("javascriptreact", "JavaScript (React)")]
[InlineData("cpp", "C++")]
[InlineData("python", "Python")]  // Capitalized fallback
public void GetDisplayName_ReturnsHumanReadableName(string language, string expected)
{
    Assert.Equal(expected, LanguageDetector.GetDisplayName(language));
}

[Fact]
public void GetDisplayName_Null_ReturnsPlainText()
{
    Assert.Equal("Plain Text", LanguageDetector.GetDisplayName(null));
}

// Query Method Tests
[Fact]
public void GetAllSupportedExtensions_ContainsCommonExtensions()
{
    var extensions = LanguageDetector.GetAllSupportedExtensions();
    Assert.Contains(".cs", extensions);
    Assert.Contains(".py", extensions);
    Assert.Contains(".js", extensions);
}

[Fact]
public void GetExtensionsForLanguage_ReturnsAllMatching()
{
    var csharpExtensions = LanguageDetector.GetExtensionsForLanguage("csharp");
    Assert.Contains(".cs", csharpExtensions);
    Assert.Contains(".csx", csharpExtensions);
}

// Edge Cases
[Theory]
[InlineData(null)]
[InlineData("")]
public void DetectMethods_HandleNullAndEmpty(string? input)
{
    Assert.Null(LanguageDetector.DetectByExtension(input));
    Assert.Null(LanguageDetector.DetectByFileName(input));
    Assert.Null(LanguageDetector.DetectByPath(input));
}

[Fact]
public void IsLikelyTextFile_IdentifiesTextFiles()
{
    Assert.True(LanguageDetector.IsLikelyTextFile("readme.md"));
    Assert.True(LanguageDetector.IsLikelyTextFile("data.csv"));
    Assert.True(LanguageDetector.IsLikelyTextFile("Program.cs"));
    Assert.False(LanguageDetector.IsLikelyTextFile("image.png"));
}
```

---

## Extension/Language Mapping Reference

### .NET Languages

| Extension | Language ID | Display Name |
|-----------|-------------|--------------|
| .cs, .csx | csharp | C# |
| .vb | vb | Visual Basic |
| .fs, .fsx | fsharp | F# |
| .csproj, .axaml, .xaml | xml | XML |

### Web Languages

| Extension | Language ID | Display Name |
|-----------|-------------|--------------|
| .js, .mjs, .cjs | javascript | JavaScript |
| .jsx | javascriptreact | JavaScript (React) |
| .ts, .mts, .cts | typescript | TypeScript |
| .tsx | typescriptreact | TypeScript (React) |
| .html, .htm | html | HTML |
| .css | css | CSS |
| .scss | scss | SCSS |
| .vue | vue | Vue |
| .svelte | svelte | Svelte |

### Special File Names

| File Name | Language ID |
|-----------|-------------|
| Dockerfile | dockerfile |
| Makefile, GNUmakefile | makefile |
| Gemfile, Rakefile | ruby |
| package.json | json |
| tsconfig.json | jsonc |
| Cargo.toml | toml |
| go.mod | go |
| requirements.txt | pip-requirements |

---

## Files Summary

### Files to Create (1)

| File | Lines (approx) |
|------|----------------|
| `Utilities/LanguageDetector.cs` | 300 |

### Files to Modify (0)

No files need modification for v0.3.1c.

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | DetectByExtension handles 80+ extensions |
| AC-2 | DetectByExtension is case-insensitive |
| AC-3 | DetectByFileName checks FileNameMap first |
| AC-4 | DetectByFileName falls back to extension |
| AC-5 | Special files (Dockerfile, Makefile) detected |
| AC-6 | GetDisplayName returns human-readable names |
| AC-7 | GetAllLanguages returns unique list |
| AC-8 | Null/empty inputs return null gracefully |
| AC-9 | GetExtensionsForLanguage returns all matches |
| AC-10 | IsLikelyTextFile identifies text files |

---

## Design Decisions

| Decision | Rationale |
|----------|-----------|
| Static class | Pure utility, no state needed |
| Case-insensitive | Cross-platform compatibility |
| VSCode language IDs | Industry standard, syntax highlighting |
| FileNameMap priority | Special files should override extension |
| GetIconName method | UI integration for file icons |

---

## Dependencies

| Part | Dependency Description |
|------|------------------------|
| v0.3.1a | FileSystemItem.Language uses LanguageDetector |
| v0.3.1a | FileContext.Language uses LanguageDetector |

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.3.1c | 0.25 day |
