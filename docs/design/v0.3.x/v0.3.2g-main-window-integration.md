# Design Specification: The Senior Intern v0.3.2g "Main Window Integration"

## Executive Summary

This document provides a detailed implementation specification for v0.3.2g, which integrates the file explorer into the main application window. This includes sidebar layout updates, MainWindowViewModel changes, theme additions, DI registration, and resource dictionary inclusion.

### v0.3.2g Scope

- Update `MainWindow.axaml` with sidebar containing FileExplorerView
- Update `MainWindowViewModel` with FileExplorerViewModel and event wiring
- Add sidebar and tree view theme colors to `Dark.axaml`
- Register FileExplorerViewModel in service collection
- Include FileIcons.axaml in App.axaml resources

### Key Deliverables

| Deliverable | Description |
|-------------|-------------|
| MainWindow.axaml updates | 3-column layout with sidebar |
| MainWindowViewModel updates | FileExplorer property, event handlers |
| Dark.axaml updates | Sidebar and tree view colors |
| DI registration | FileExplorerViewModel registration |
| App.axaml updates | FileIcons.axaml resource inclusion |

---

## Feature Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     v0.3.2g Feature Tree                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  MainWindow.axaml Updates                                        â”‚
â”‚  â”œâ”€â”€ 3-Column Grid Layout                                        â”‚
â”‚  â”‚   â”œâ”€â”€ Column 0: Sidebar (280px, resizable)                   â”‚
â”‚  â”‚   â”œâ”€â”€ Column 1: GridSplitter (4px)                           â”‚
â”‚  â”‚   â””â”€â”€ Column 2: Main Content (*)                             â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€â”€ Sidebar Structure (4 rows)                                  â”‚
â”‚  â”‚   â”œâ”€â”€ Row 0: ModelSelectorView (existing)                    â”‚
â”‚  â”‚   â”œâ”€â”€ Row 1: FileExplorerView (NEW)                          â”‚
â”‚  â”‚   â”œâ”€â”€ Row 2: ConversationListView in Expander (existing)     â”‚
â”‚  â”‚   â””â”€â”€ Row 3: Settings button (existing)                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€â”€ Main Content (3 rows)                                       â”‚
â”‚      â”œâ”€â”€ Row 0: EditorPanel (v0.3.3 - placeholder)              â”‚
â”‚      â”œâ”€â”€ Row 1: ChatView                                        â”‚
â”‚      â””â”€â”€ Row 2: StatusBarView                                   â”‚
â”‚                                                                   â”‚
â”‚  MainWindowViewModel Updates                                      â”‚
â”‚  â”œâ”€â”€ New Properties                                              â”‚
â”‚  â”‚   â”œâ”€â”€ FileExplorer: FileExplorerViewModel                    â”‚
â”‚  â”‚   â””â”€â”€ HasOpenWorkspace: bool                                 â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€â”€ Constructor Updates                                         â”‚
â”‚  â”‚   â”œâ”€â”€ Inject FileExplorerViewModel                           â”‚
â”‚  â”‚   â”œâ”€â”€ Subscribe to FileOpenRequested                         â”‚
â”‚  â”‚   â”œâ”€â”€ Subscribe to FileAttachRequested                       â”‚
â”‚  â”‚   â””â”€â”€ Subscribe to WorkspaceChanged                          â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€â”€ Event Handlers                                              â”‚
â”‚      â”œâ”€â”€ OnFileOpenRequested â†’ Forward to EditorPanel           â”‚
â”‚      â””â”€â”€ OnFileAttachRequested â†’ Forward to Chat                â”‚
â”‚                                                                   â”‚
â”‚  Dark.axaml Theme Updates                                        â”‚
â”‚  â”œâ”€â”€ Sidebar Colors                                              â”‚
â”‚  â”‚   â”œâ”€â”€ SidebarBackgroundBrush (#1E1E2E)                       â”‚
â”‚  â”‚   â””â”€â”€ SplitterBrush (#313244)                                â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€â”€ TreeView Colors                                             â”‚
â”‚      â”œâ”€â”€ TreeViewItemSelectedBackground (#45475A)               â”‚
â”‚      â””â”€â”€ TreeViewItemHoverBackground (#313244)                  â”‚
â”‚                                                                   â”‚
â”‚  App.axaml Updates                                               â”‚
â”‚  â””â”€â”€ MergedDictionaries                                         â”‚
â”‚      â””â”€â”€ Add FileIcons.axaml                                    â”‚
â”‚                                                                   â”‚
â”‚  ServiceCollectionExtensions Updates                             â”‚
â”‚  â””â”€â”€ AddViewModels()                                            â”‚
â”‚      â””â”€â”€ Add FileExplorerViewModel as singleton                 â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture Diagrams

### Main Window Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MainWindow                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Sidebar (280px) â”‚ â•‘  â”‚ Main Content (*)                  â”‚   â”‚
â”‚  â”‚                 â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Model Selector  â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â•‘  â”‚ Editor Panel (v0.3.3)             â”‚   â”‚
â”‚  â”‚ â”‚ Claude 3.5  â”‚ â”‚ â•‘  â”‚ (visible when HasOpenWorkspace)   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”‚                 â”‚ â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ File Explorer   â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â•‘  â”‚ Chat View                          â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ“ MyProj   â”‚ â”‚ â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚             â”‚ â”‚ â•‘  â”‚ â”‚ Chat messages...            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ â–¼ ğŸ“ src    â”‚ â”‚ â•‘  â”‚ â”‚                             â”‚   â”‚   â”‚
â”‚  â”‚ â”‚   ğŸ“„ App.cs â”‚ â”‚ â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚ â”‚   ğŸ“„ main   â”‚ â”‚ â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ â–¶ ğŸ“ tests  â”‚ â”‚ â•‘  â”‚ â”‚ Input...                    â”‚   â”‚   â”‚
â”‚  â”‚ â”‚             â”‚ â”‚ â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â–¼ Conversations â”‚ â•‘  â”‚ Status Bar                        â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â•‘  â”‚ Claude 3.5 â”‚ 1,234 tok â”‚ âœ“ Saved â”‚   â”‚
â”‚  â”‚ â”‚ Chat 1      â”‚ â”‚ â•‘  â”‚                                    â”‚   â”‚
â”‚  â”‚ â”‚ Chat 2      â”‚ â”‚ â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â•‘                                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘                                          â”‚
â”‚  â”‚ [âš™ Settings]   â”‚ â•‘                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Event Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Event Flow Diagram                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  FileExplorerViewModel                                           â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”œâ”€â”€â”€â”€ FileOpenRequested event â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚                                                   â”‚    â”‚
â”‚         â”‚                                                   â–¼    â”‚
â”‚         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â”‚     â”‚ MainWindowViewModel.OnFileOpenRequested()     â”‚ â”‚
â”‚         â”‚     â”‚                                                â”‚ â”‚
â”‚         â”‚     â”‚ // Forward to editor (v0.3.3)                  â”‚ â”‚
â”‚         â”‚     â”‚ EditorPanel?.OpenFileCommand.Execute(path);   â”‚ â”‚
â”‚         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                        â”‚
â”‚         â””â”€â”€â”€â”€ FileAttachRequested event â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                                             â”‚    â”‚
â”‚                                                             â–¼    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚ MainWindowViewModel.OnFileAttachRequested()       â”‚   â”‚
â”‚         â”‚                                                    â”‚   â”‚
â”‚         â”‚ // Forward to chat (v0.3.4)                        â”‚   â”‚
â”‚         â”‚ Chat?.AttachFileCommand.Execute(path);            â”‚   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  WorkspaceService                                                â”‚
â”‚         â”‚                                                        â”‚
â”‚         â””â”€â”€â”€â”€ WorkspaceChanged event â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                                             â”‚    â”‚
â”‚                                                             â–¼    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚ MainWindowViewModel                               â”‚   â”‚
â”‚         â”‚                                                    â”‚   â”‚
â”‚         â”‚ HasOpenWorkspace = (workspace != null);           â”‚   â”‚
â”‚         â”‚                                                    â”‚   â”‚
â”‚         â”‚ // Controls EditorPanel visibility                â”‚   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Directory Structure

```
src/SeniorIntern.Desktop/
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ MainWindow.axaml                              (MODIFY)
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ MainWindowViewModel.cs                        (MODIFY)
â”œâ”€â”€ Themes/
â”‚   â””â”€â”€ Dark.axaml                                    (MODIFY)
â”œâ”€â”€ Extensions/
â”‚   â””â”€â”€ ServiceCollectionExtensions.cs                (MODIFY)
â””â”€â”€ App.axaml                                         (MODIFY)
```

---

## Implementation Details

### Task 1: Update MainWindow.axaml

**File:** `src/SeniorIntern.Desktop/Views/MainWindow.axaml`

Add to existing content:

```xml
<!-- Main layout grid -->
<Grid ColumnDefinitions="280,Auto,*">

    <!-- Sidebar -->
    <Border Grid.Column="0"
            Background="{DynamicResource SidebarBackgroundBrush}">
        <Grid RowDefinitions="Auto,*,Auto,Auto">

            <!-- Model Selector (existing) -->
            <views:ModelSelectorView Grid.Row="0" />

            <!-- File Explorer (NEW) -->
            <views:FileExplorerView Grid.Row="1"
                                    DataContext="{Binding FileExplorer}" />

            <!-- Conversations List (existing from v0.2.0) -->
            <Expander Grid.Row="2"
                      Header="Conversations"
                      IsExpanded="True">
                <views:ConversationListView DataContext="{Binding ConversationList}" />
            </Expander>

            <!-- Settings button (existing) -->
            <Button Grid.Row="3"
                    Content="Settings"
                    Command="{Binding OpenSettingsCommand}"
                    Margin="8" />
        </Grid>
    </Border>

    <!-- Splitter -->
    <GridSplitter Grid.Column="1"
                  Width="4"
                  Background="{DynamicResource SplitterBrush}" />

    <!-- Main Content -->
    <Grid Grid.Column="2" RowDefinitions="*,Auto,Auto">
        <!-- Editor Panel (v0.3.3 - placeholder for now) -->
        <Border Grid.Row="0"
                IsVisible="{Binding HasOpenWorkspace}"
                Background="{DynamicResource EditorBackgroundBrush}">
            <TextBlock Text="Editor Panel (v0.3.3)"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Opacity="0.5" />
        </Border>

        <!-- Chat Panel -->
        <views:ChatView Grid.Row="1"
                        DataContext="{Binding Chat}" />

        <!-- Status Bar -->
        <views:StatusBarView Grid.Row="2"
                             DataContext="{Binding StatusBar}" />
    </Grid>
</Grid>
```

### Task 2: Update MainWindowViewModel

**File:** `src/SeniorIntern.Desktop/ViewModels/MainWindowViewModel.cs`

Add properties and event handlers:

```csharp
public partial class MainWindowViewModel : ViewModelBase, IDisposable
{
    private readonly IWorkspaceService _workspaceService;

    // Existing properties...

    /// <summary>
    /// File explorer ViewModel for sidebar.
    /// </summary>
    [ObservableProperty]
    private FileExplorerViewModel _fileExplorer;

    /// <summary>
    /// Whether a workspace is currently open (controls EditorPanel visibility).
    /// </summary>
    [ObservableProperty]
    private bool _hasOpenWorkspace;

    public MainWindowViewModel(
        // ... existing parameters ...
        IWorkspaceService workspaceService,
        FileExplorerViewModel fileExplorer)
    {
        // ... existing initialization ...

        _workspaceService = workspaceService;
        FileExplorer = fileExplorer;

        // Subscribe to file explorer events
        FileExplorer.FileOpenRequested += OnFileOpenRequested;
        FileExplorer.FileAttachRequested += OnFileAttachRequested;

        // Subscribe to workspace changes
        _workspaceService.WorkspaceChanged += OnWorkspaceChanged;

        // Initialize HasOpenWorkspace
        HasOpenWorkspace = _workspaceService.CurrentWorkspace != null;
    }

    private void OnFileOpenRequested(object? sender, FileOpenRequestedEventArgs e)
    {
        // Forward to editor panel (v0.3.3)
        // EditorPanel?.OpenFileCommand.Execute(e.FilePath);

        // For now, just log
        System.Diagnostics.Debug.WriteLine($"Open file requested: {e.FilePath}");
    }

    private void OnFileAttachRequested(object? sender, FileAttachRequestedEventArgs e)
    {
        // Forward to chat view model (v0.3.4)
        // Chat?.AttachFileCommand.Execute(e.FilePath);

        // For now, just log
        System.Diagnostics.Debug.WriteLine($"Attach file requested: {e.FilePath}");
    }

    private void OnWorkspaceChanged(object? sender, WorkspaceChangedEventArgs e)
    {
        HasOpenWorkspace = e.CurrentWorkspace != null;
    }

    public void Dispose()
    {
        FileExplorer.FileOpenRequested -= OnFileOpenRequested;
        FileExplorer.FileAttachRequested -= OnFileAttachRequested;
        _workspaceService.WorkspaceChanged -= OnWorkspaceChanged;

        FileExplorer.Dispose();
    }
}
```

### Task 3: Update Dark.axaml Theme

**File:** `src/SeniorIntern.Desktop/Themes/Dark.axaml`

Add new color resources:

```xml
<!-- Sidebar -->
<SolidColorBrush x:Key="SidebarBackgroundBrush" Color="#1E1E2E" />
<SolidColorBrush x:Key="SplitterBrush" Color="#313244" />
<SolidColorBrush x:Key="EditorBackgroundBrush" Color="#181825" />

<!-- Tree View -->
<SolidColorBrush x:Key="TreeViewItemSelectedBackground" Color="#45475A" />
<SolidColorBrush x:Key="TreeViewItemHoverBackground" Color="#313244" />

<!-- TreeViewItem selected state -->
<Style Selector="TreeViewItem:selected /template/ Border#PART_LayoutRoot">
    <Setter Property="Background" Value="{DynamicResource TreeViewItemSelectedBackground}" />
</Style>

<!-- TreeViewItem hover state -->
<Style Selector="TreeViewItem:pointerover /template/ Border#PART_LayoutRoot">
    <Setter Property="Background" Value="{DynamicResource TreeViewItemHoverBackground}" />
</Style>

<!-- TreeViewItem expanded chevron animation (optional enhancement) -->
<Style Selector="TreeViewItem:expanded > Border > Grid > ToggleButton#PART_ExpandCollapseChevron">
    <Setter Property="RenderTransform">
        <RotateTransform Angle="90" />
    </Setter>
</Style>
```

### Task 4: Update ServiceCollectionExtensions

**File:** `src/SeniorIntern.Desktop/Extensions/ServiceCollectionExtensions.cs`

Add FileExplorerViewModel registration:

```csharp
public static IServiceCollection AddViewModels(this IServiceCollection services)
{
    // Existing registrations...

    // File Explorer ViewModel (singleton - persists across navigation)
    services.AddSingleton<FileExplorerViewModel>();

    return services;
}
```

### Task 5: Update App.axaml

**File:** `src/SeniorIntern.Desktop/App.axaml`

Include FileIcons.axaml resource dictionary:

```xml
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <!-- Existing resources... -->
            <ResourceInclude Source="/Themes/Dark.axaml" />

            <!-- File Icons (NEW) -->
            <ResourceInclude Source="/Assets/FileIcons.axaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources>
```

---

## Color Scheme

### Catppuccin Mocha (Dark Theme Base)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Color Palette                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Sidebar Background    #1E1E2E  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (Base)            â”‚
â”‚  Splitter              #313244  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (Surface0)        â”‚
â”‚  Editor Background     #181825  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (Mantle)          â”‚
â”‚  Tree Selected         #45475A  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (Surface1)        â”‚
â”‚  Tree Hover            #313244  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  (Surface0)        â”‚
â”‚                                                                  â”‚
â”‚  These colors are from the Catppuccin Mocha palette:            â”‚
â”‚  https://github.com/catppuccin/catppuccin                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Unit Testing Requirements

| Component | Test Count | Focus Areas |
|-----------|------------|-------------|
| OnFileOpenRequested | 2 | Event forwarding, null safety |
| OnFileAttachRequested | 2 | Event forwarding, null safety |
| OnWorkspaceChanged | 2 | HasOpenWorkspace updates |
| Dispose | 2 | Event unsubscription, cleanup |
| Constructor | 2 | DI, initial state |
| **Total** | **10** | |

---

## Files Summary

### Files to Modify (5)

| File | Changes |
|------|---------|
| `Views/MainWindow.axaml` | Add 3-column layout, FileExplorerView |
| `ViewModels/MainWindowViewModel.cs` | Add FileExplorer property, event handlers |
| `Themes/Dark.axaml` | Add sidebar and tree view colors |
| `Extensions/ServiceCollectionExtensions.cs` | Register FileExplorerViewModel |
| `App.axaml` | Include FileIcons.axaml |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Sidebar displays with 280px width |
| AC-2 | FileExplorerView visible in sidebar |
| AC-3 | GridSplitter allows resize |
| AC-4 | HasOpenWorkspace updates on workspace change |
| AC-5 | FileOpenRequested event handled |
| AC-6 | FileAttachRequested event handled |
| AC-7 | Tree view selected/hover colors work |
| AC-8 | FileIcons.axaml resources available |
| AC-9 | FileExplorerViewModel registered as singleton |
| AC-10 | Dispose cleans up subscriptions |

---

## Dependencies

| Part | Dependency Description |
|------|------------------------|
| v0.3.1e | IWorkspaceService |
| v0.3.2a-f | All File Explorer components |
| v0.3.2c | FileIcons.axaml |

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.3.2g | 0.5 day |
