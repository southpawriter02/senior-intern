# Design Specification: AIntern v0.5.2a "Theme & Styles"

## Overview

**Version**: v0.5.2a
**Parent**: v0.5.2 Terminal UI
**Focus**: Terminal theme model, color palette, AXAML styles, and terminal icons

### Purpose

This sub-version establishes the visual foundation for the terminal UI by creating:
1. `TerminalTheme` model with 256-color palette support
2. `CursorStyle` enum for cursor appearance options
3. Terminal-specific AXAML styles for tabs, buttons, and scrollbars
4. Terminal icon definitions using StreamGeometry paths

### Dependencies

- **v0.5.1b**: `TerminalColor` readonly struct (color representation with default, palette, and RGB modes)

---

## Architecture

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                        v0.5.2a Theme & Styles Architecture                    │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                           Core Models Layer                              │ │
│  │  src/AIntern.Core/Models/Terminal/                                      │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │                         TerminalTheme                               │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Properties:                                                 │   │ │ │
│  │  │  │  ├── Name: string                                           │   │ │ │
│  │  │  │  ├── Background: TerminalColor                              │   │ │ │
│  │  │  │  ├── Foreground: TerminalColor                              │   │ │ │
│  │  │  │  ├── Cursor: TerminalColor                                  │   │ │ │
│  │  │  │  ├── Selection: TerminalColor                               │   │ │ │
│  │  │  │  ├── SelectionAlpha: byte                                   │   │ │ │
│  │  │  │  ├── BoldForeground: TerminalColor?                         │   │ │ │
│  │  │  │  ├── AnsiPalette: TerminalColor[16]                         │   │ │ │
│  │  │  │  ├── CursorStyle: CursorStyle                               │   │ │ │
│  │  │  │  ├── CursorBlink: bool                                      │   │ │ │
│  │  │  │  └── CursorBlinkIntervalMs: int                             │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Methods:                                                    │   │ │ │
│  │  │  │  ├── GetPaletteColor(int index) -> TerminalColor            │   │ │ │
│  │  │  │  ├── ResolveColor(TerminalColor, bool) -> TerminalColor     │   │ │ │
│  │  │  │  └── CreateDefaultAnsiPalette() -> TerminalColor[]          │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Static Presets:                                             │   │ │ │
│  │  │  │  ├── Dark      (VS Code-inspired)                           │   │ │ │
│  │  │  │  ├── Light     (Light background)                           │   │ │ │
│  │  │  │  └── SolarizedDark (Solarized palette)                      │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                          │ │
│  │  ┌────────────────────┐                                                 │ │
│  │  │    CursorStyle     │                                                 │ │
│  │  │  ├── Block         │                                                 │ │
│  │  │  ├── Underline     │                                                 │ │
│  │  │  └── Bar           │                                                 │ │
│  │  └────────────────────┘                                                 │ │
│  │                                                                          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         Desktop Resources Layer                          │ │
│  │  src/AIntern.Desktop/                                                   │ │
│  ├─────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  Themes/Dark.axaml (Additions)                                      │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Color Brushes:                                              │   │ │ │
│  │  │  │  ├── TerminalBackground          #1E1E1E                    │   │ │ │
│  │  │  │  ├── TerminalForeground          #CCCCCC                    │   │ │ │
│  │  │  │  ├── TerminalTabBarBackground    #252526                    │   │ │ │
│  │  │  │  ├── TerminalTabBackground       Transparent                │   │ │ │
│  │  │  │  ├── TerminalTabActiveBackground #1E1E1E                    │   │ │ │
│  │  │  │  ├── TerminalTabHoverBackground  #2D2D30                    │   │ │ │
│  │  │  │  ├── TerminalTabBorder           #3C3C3C                    │   │ │ │
│  │  │  │  ├── TerminalScrollBarThumb      #424242                    │   │ │ │
│  │  │  │  └── TerminalScrollBarThumbHover #4F4F4F                    │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Control Themes:                                             │   │ │ │
│  │  │  │  ├── TerminalTab (TargetType="Button")                      │   │ │ │
│  │  │  │  ├── TerminalTabCloseButton (TargetType="Button")           │   │ │ │
│  │  │  │  ├── TerminalNewTabButton (TargetType="Button")             │   │ │ │
│  │  │  │  ├── TerminalIconButton (TargetType="Button")               │   │ │ │
│  │  │  │  └── TerminalScrollBar (TargetType="ScrollBar")             │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  Style Selectors:                                            │   │ │ │
│  │  │  │  ├── Button.terminal-tab:pointerover Button.tab-close       │   │ │ │
│  │  │  │  └── Button.terminal-tab.active Button.tab-close            │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  Resources/IconPaths.axaml (NEW)                                    │ │ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐   │ │ │
│  │  │  │  StreamGeometry Icons:                                       │   │ │ │
│  │  │  │  ├── TerminalIcon                                           │   │ │ │
│  │  │  │  ├── PlusIcon                                               │   │ │ │
│  │  │  │  ├── CloseIcon                                              │   │ │ │
│  │  │  │  ├── MaximizeIcon                                           │   │ │ │
│  │  │  │  ├── MinimizeIcon                                           │   │ │ │
│  │  │  │  ├── ChevronDownIcon                                        │   │ │ │
│  │  │  │  ├── ChevronUpIcon                                          │   │ │ │
│  │  │  │  └── SplitHorizontalIcon                                    │   │ │ │
│  │  │  └─────────────────────────────────────────────────────────────┘   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                          │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  App.axaml (Modification)                                           │ │ │
│  │  │  └── Add ResourceInclude for IconPaths.axaml                        │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │                                                                          │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 256-Color Palette System

The terminal supports the standard 256-color xterm palette:

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                        256-Color Palette Structure                            │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Colors 0-15: Standard ANSI Palette (configurable per theme)            │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  0-7:  Standard Colors   │  8-15: Bright Colors                   │  │ │
│  │  │  ├── 0: Black            │  ├── 8:  Bright Black (Gray)           │  │ │
│  │  │  ├── 1: Red              │  ├── 9:  Bright Red                    │  │ │
│  │  │  ├── 2: Green            │  ├── 10: Bright Green                  │  │ │
│  │  │  ├── 3: Yellow           │  ├── 11: Bright Yellow                 │  │ │
│  │  │  ├── 4: Blue             │  ├── 12: Bright Blue                   │  │ │
│  │  │  ├── 5: Magenta          │  ├── 13: Bright Magenta                │  │ │
│  │  │  ├── 6: Cyan             │  ├── 14: Bright Cyan                   │  │ │
│  │  │  └── 7: White            │  └── 15: Bright White                  │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Colors 16-231: 6x6x6 Color Cube (calculated)                           │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Formula: index -= 16;                                            │  │ │
│  │  │           r = (index / 36) * 51                                   │  │ │
│  │  │           g = ((index / 6) % 6) * 51                              │  │ │
│  │  │           b = (index % 6) * 51                                    │  │ │
│  │  │                                                                    │  │ │
│  │  │  6 levels per channel: 0, 51, 102, 153, 204, 255                  │  │ │
│  │  │  Total combinations: 6 × 6 × 6 = 216 colors                       │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │  Colors 232-255: Grayscale Ramp (calculated)                            │ │
│  │  ┌───────────────────────────────────────────────────────────────────┐  │ │
│  │  │  Formula: gray = (index - 232) * 10 + 8                           │  │ │
│  │  │                                                                    │  │ │
│  │  │  24 grayscale levels from #080808 to #EEEEEE                      │  │ │
│  │  │  Steps: 8, 18, 28, 38, 48, ... 228, 238                           │  │ │
│  │  └───────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## File Specifications

### 1. CursorStyle.cs

**Location**: `src/AIntern.Core/Models/Terminal/CursorStyle.cs`
**Type**: `enum`
**Purpose**: Define the visual styles for the terminal cursor

```csharp
namespace AIntern.Core.Models.Terminal;

/// <summary>
/// Terminal cursor display style.
/// Controls how the cursor is rendered in the terminal view.
/// </summary>
public enum CursorStyle
{
    /// <summary>
    /// Solid block cursor that fills the entire character cell.
    /// Most common style for terminal emulators.
    /// </summary>
    Block,

    /// <summary>
    /// Underline cursor displayed at the bottom of the character cell.
    /// Common in insert mode for some editors.
    /// </summary>
    Underline,

    /// <summary>
    /// Vertical bar cursor displayed at the left edge of the character cell.
    /// Common in modern text editors and IDEs.
    /// </summary>
    Bar
}
```

---

### 2. TerminalTheme.cs

**Location**: `src/AIntern.Core/Models/Terminal/TerminalTheme.cs`
**Type**: `sealed class`
**Purpose**: Define terminal color schemes with 256-color palette support

```csharp
namespace AIntern.Core.Models.Terminal;

/// <summary>
/// Defines the color scheme for terminal rendering.
/// Supports customizable ANSI 16-color palette and automatic
/// calculation of the extended 256-color palette.
/// </summary>
public sealed class TerminalTheme
{
    /// <summary>
    /// Display name for the theme.
    /// </summary>
    public string Name { get; init; } = "Default";

    /// <summary>
    /// Default background color for the terminal.
    /// </summary>
    public TerminalColor Background { get; init; } = TerminalColor.FromRgb(30, 30, 30);

    /// <summary>
    /// Default foreground (text) color for the terminal.
    /// </summary>
    public TerminalColor Foreground { get; init; } = TerminalColor.FromRgb(204, 204, 204);

    /// <summary>
    /// Cursor color.
    /// </summary>
    public TerminalColor Cursor { get; init; } = TerminalColor.FromRgb(204, 204, 204);

    /// <summary>
    /// Selection highlight color (alpha will be applied separately).
    /// </summary>
    public TerminalColor Selection { get; init; } = TerminalColor.FromRgb(68, 119, 170);

    /// <summary>
    /// Selection highlight alpha value (0-255).
    /// Applied as transparency when rendering selection overlay.
    /// </summary>
    public byte SelectionAlpha { get; init; } = 80;

    /// <summary>
    /// Bold text color. When null, uses foreground color with bold font style.
    /// </summary>
    public TerminalColor? BoldForeground { get; init; }

    /// <summary>
    /// 16-color ANSI palette (colors 0-15).
    /// Used for SGR color codes 30-37, 40-47, 90-97, and 100-107.
    /// </summary>
    public TerminalColor[] AnsiPalette { get; init; } = CreateDefaultAnsiPalette();

    /// <summary>
    /// Cursor visual style (block, underline, or bar).
    /// </summary>
    public CursorStyle CursorStyle { get; init; } = CursorStyle.Block;

    /// <summary>
    /// Whether the cursor should blink.
    /// </summary>
    public bool CursorBlink { get; init; } = true;

    /// <summary>
    /// Cursor blink interval in milliseconds.
    /// Default value matches typical terminal blink rate.
    /// </summary>
    public int CursorBlinkIntervalMs { get; init; } = 530;

    /// <summary>
    /// Gets a color from the extended 256-color palette.
    /// </summary>
    /// <param name="index">Color index (0-255).</param>
    /// <returns>The resolved terminal color.</returns>
    /// <remarks>
    /// Color ranges:
    /// - 0-15: ANSI palette (from AnsiPalette property)
    /// - 16-231: 6x6x6 color cube (calculated)
    /// - 232-255: Grayscale ramp (calculated)
    /// </remarks>
    public TerminalColor GetPaletteColor(int index)
    {
        if (index < 0 || index > 255)
            return Foreground;

        // Colors 0-15: ANSI palette
        if (index < 16)
            return AnsiPalette[index];

        // Colors 16-231: 6x6x6 color cube
        if (index < 232)
        {
            index -= 16;
            var r = (byte)((index / 36) * 51);
            var g = (byte)(((index / 6) % 6) * 51);
            var b = (byte)((index % 6) * 51);
            return TerminalColor.FromRgb(r, g, b);
        }

        // Colors 232-255: Grayscale ramp
        var gray = (byte)((index - 232) * 10 + 8);
        return TerminalColor.FromRgb(gray, gray, gray);
    }

    /// <summary>
    /// Resolves a TerminalColor to its actual RGB values.
    /// Handles default colors, palette indices, and true color values.
    /// </summary>
    /// <param name="color">The color to resolve.</param>
    /// <param name="isForeground">Whether this is a foreground (true) or background (false) color.</param>
    /// <returns>The resolved color with concrete RGB values.</returns>
    public TerminalColor ResolveColor(TerminalColor color, bool isForeground)
    {
        if (color.IsDefault)
            return isForeground ? Foreground : Background;

        if (color.PaletteIndex.HasValue)
            return GetPaletteColor(color.PaletteIndex.Value);

        return color;
    }

    /// <summary>
    /// Creates the default 16-color ANSI palette.
    /// Colors match typical terminal emulator defaults.
    /// </summary>
    private static TerminalColor[] CreateDefaultAnsiPalette() => new[]
    {
        // Standard colors (0-7)
        TerminalColor.FromRgb(0, 0, 0),         // 0: Black
        TerminalColor.FromRgb(205, 49, 49),     // 1: Red
        TerminalColor.FromRgb(13, 188, 121),    // 2: Green
        TerminalColor.FromRgb(229, 229, 16),    // 3: Yellow
        TerminalColor.FromRgb(36, 114, 200),    // 4: Blue
        TerminalColor.FromRgb(188, 63, 188),    // 5: Magenta
        TerminalColor.FromRgb(17, 168, 205),    // 6: Cyan
        TerminalColor.FromRgb(229, 229, 229),   // 7: White

        // Bright colors (8-15)
        TerminalColor.FromRgb(102, 102, 102),   // 8: Bright Black (Gray)
        TerminalColor.FromRgb(241, 76, 76),     // 9: Bright Red
        TerminalColor.FromRgb(35, 209, 139),    // 10: Bright Green
        TerminalColor.FromRgb(245, 245, 67),    // 11: Bright Yellow
        TerminalColor.FromRgb(59, 142, 234),    // 12: Bright Blue
        TerminalColor.FromRgb(214, 112, 214),   // 13: Bright Magenta
        TerminalColor.FromRgb(41, 184, 219),    // 14: Bright Cyan
        TerminalColor.FromRgb(255, 255, 255),   // 15: Bright White
    };

    /// <summary>
    /// Default dark theme matching VS Code's terminal colors.
    /// </summary>
    public static TerminalTheme Dark => new()
    {
        Name = "Dark",
        Background = TerminalColor.FromRgb(30, 30, 30),
        Foreground = TerminalColor.FromRgb(204, 204, 204),
        Cursor = TerminalColor.FromRgb(204, 204, 204),
        Selection = TerminalColor.FromRgb(68, 119, 170),
        SelectionAlpha = 80
    };

    /// <summary>
    /// Light theme with white background.
    /// </summary>
    public static TerminalTheme Light => new()
    {
        Name = "Light",
        Background = TerminalColor.FromRgb(255, 255, 255),
        Foreground = TerminalColor.FromRgb(0, 0, 0),
        Cursor = TerminalColor.FromRgb(0, 0, 0),
        Selection = TerminalColor.FromRgb(173, 214, 255),
        SelectionAlpha = 100,
        AnsiPalette = new[]
        {
            TerminalColor.FromRgb(0, 0, 0),
            TerminalColor.FromRgb(205, 49, 49),
            TerminalColor.FromRgb(0, 135, 0),
            TerminalColor.FromRgb(135, 135, 0),
            TerminalColor.FromRgb(0, 0, 205),
            TerminalColor.FromRgb(135, 0, 135),
            TerminalColor.FromRgb(0, 135, 135),
            TerminalColor.FromRgb(229, 229, 229),
            TerminalColor.FromRgb(102, 102, 102),
            TerminalColor.FromRgb(241, 76, 76),
            TerminalColor.FromRgb(0, 175, 0),
            TerminalColor.FromRgb(175, 175, 0),
            TerminalColor.FromRgb(0, 0, 255),
            TerminalColor.FromRgb(175, 0, 175),
            TerminalColor.FromRgb(0, 175, 175),
            TerminalColor.FromRgb(255, 255, 255),
        }
    };

    /// <summary>
    /// Solarized Dark theme with the classic Solarized color palette.
    /// </summary>
    public static TerminalTheme SolarizedDark => new()
    {
        Name = "Solarized Dark",
        Background = TerminalColor.FromRgb(0, 43, 54),
        Foreground = TerminalColor.FromRgb(131, 148, 150),
        Cursor = TerminalColor.FromRgb(131, 148, 150),
        Selection = TerminalColor.FromRgb(7, 54, 66),
        SelectionAlpha = 120,
        AnsiPalette = new[]
        {
            TerminalColor.FromRgb(7, 54, 66),      // Base02
            TerminalColor.FromRgb(220, 50, 47),    // Red
            TerminalColor.FromRgb(133, 153, 0),    // Green
            TerminalColor.FromRgb(181, 137, 0),    // Yellow
            TerminalColor.FromRgb(38, 139, 210),   // Blue
            TerminalColor.FromRgb(211, 54, 130),   // Magenta
            TerminalColor.FromRgb(42, 161, 152),   // Cyan
            TerminalColor.FromRgb(238, 232, 213),  // Base2
            TerminalColor.FromRgb(0, 43, 54),      // Base03
            TerminalColor.FromRgb(203, 75, 22),    // Orange
            TerminalColor.FromRgb(88, 110, 117),   // Base01
            TerminalColor.FromRgb(101, 123, 131),  // Base00
            TerminalColor.FromRgb(131, 148, 150),  // Base0
            TerminalColor.FromRgb(108, 113, 196),  // Violet
            TerminalColor.FromRgb(147, 161, 161),  // Base1
            TerminalColor.FromRgb(253, 246, 227),  // Base3
        }
    };
}
```

---

### 3. TerminalThemeColor.cs (Optional Helper Enum)

**Location**: `src/AIntern.Core/Models/Terminal/TerminalThemeColor.cs`
**Type**: `enum`
**Purpose**: Named semantic colors for referencing theme colors programmatically

```csharp
namespace AIntern.Core.Models.Terminal;

/// <summary>
/// Named semantic colors in a terminal theme.
/// Used for referencing specific theme colors by name rather than property.
/// </summary>
public enum TerminalThemeColor
{
    /// <summary>
    /// The terminal background color.
    /// </summary>
    Background,

    /// <summary>
    /// The default text foreground color.
    /// </summary>
    Foreground,

    /// <summary>
    /// The cursor color.
    /// </summary>
    Cursor,

    /// <summary>
    /// The text selection highlight color.
    /// </summary>
    Selection,

    /// <summary>
    /// The bold text foreground color.
    /// </summary>
    BoldForeground
}
```

---

### 4. Dark.axaml Additions

**Location**: `src/AIntern.Desktop/Themes/Dark.axaml`
**Action**: Add the following content at the end of the file (before the closing `</ResourceDictionary>` tag)

```xml
    <!-- ============================================================== -->
    <!-- Terminal Panel Colors (v0.5.2a)                                -->
    <!-- ============================================================== -->
    <SolidColorBrush x:Key="TerminalBackground" Color="#1E1E1E" />
    <SolidColorBrush x:Key="TerminalForeground" Color="#CCCCCC" />
    <SolidColorBrush x:Key="TerminalTabBarBackground" Color="#252526" />
    <SolidColorBrush x:Key="TerminalTabBackground" Color="Transparent" />
    <SolidColorBrush x:Key="TerminalTabActiveBackground" Color="#1E1E1E" />
    <SolidColorBrush x:Key="TerminalTabHoverBackground" Color="#2D2D30" />
    <SolidColorBrush x:Key="TerminalTabBorder" Color="#3C3C3C" />
    <SolidColorBrush x:Key="TerminalScrollBarThumb" Color="#424242" />
    <SolidColorBrush x:Key="TerminalScrollBarThumbHover" Color="#4F4F4F" />

    <!-- Terminal Tab ControlTheme -->
    <ControlTheme x:Key="TerminalTab" TargetType="Button">
        <Setter Property="Background" Value="{DynamicResource TerminalTabBackground}" />
        <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        <Setter Property="Padding" Value="12,6" />
        <Setter Property="CornerRadius" Value="0" />
        <Setter Property="BorderThickness" Value="1,0,1,0" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="MinWidth" Value="100" />
        <Setter Property="MaxWidth" Value="200" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />

        <Style Selector="^:pointerover">
            <Setter Property="Background" Value="{DynamicResource TerminalTabHoverBackground}" />
        </Style>

        <Style Selector="^.active">
            <Setter Property="Background" Value="{DynamicResource TerminalTabActiveBackground}" />
            <Setter Property="BorderBrush" Value="{DynamicResource TerminalTabBorder}" />
        </Style>
    </ControlTheme>

    <!-- Terminal Tab Close Button ControlTheme -->
    <ControlTheme x:Key="TerminalTabCloseButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextMuted}" />
        <Setter Property="Padding" Value="4" />
        <Setter Property="CornerRadius" Value="2" />
        <Setter Property="Width" Value="20" />
        <Setter Property="Height" Value="20" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Opacity" Value="0" />

        <Style Selector="^:pointerover">
            <Setter Property="Background" Value="{DynamicResource ControlBackground}" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
            <Setter Property="Opacity" Value="1" />
        </Style>
    </ControlTheme>

    <!-- Terminal New Tab Button ControlTheme -->
    <ControlTheme x:Key="TerminalNewTabButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextMuted}" />
        <Setter Property="Padding" Value="8,6" />
        <Setter Property="CornerRadius" Value="0" />
        <Setter Property="VerticalAlignment" Value="Center" />

        <Style Selector="^:pointerover">
            <Setter Property="Background" Value="{DynamicResource TerminalTabHoverBackground}" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        </Style>
    </ControlTheme>

    <!-- Terminal Icon Button ControlTheme -->
    <ControlTheme x:Key="TerminalIconButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{DynamicResource TextMuted}" />
        <Setter Property="Padding" Value="6" />
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="Width" Value="28" />
        <Setter Property="Height" Value="28" />
        <Setter Property="VerticalAlignment" Value="Center" />

        <Style Selector="^:pointerover">
            <Setter Property="Background" Value="{DynamicResource ControlBackground}" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}" />
        </Style>
    </ControlTheme>

    <!-- Terminal ScrollBar ControlTheme -->
    <ControlTheme x:Key="TerminalScrollBar" TargetType="ScrollBar">
        <Setter Property="Width" Value="10" />
        <Setter Property="Background" Value="Transparent" />

        <Style Selector="^ /template/ Thumb">
            <Setter Property="Background" Value="{DynamicResource TerminalScrollBarThumb}" />
            <Setter Property="CornerRadius" Value="5" />
            <Setter Property="MinHeight" Value="30" />
        </Style>

        <Style Selector="^ /template/ Thumb:pointerover">
            <Setter Property="Background" Value="{DynamicResource TerminalScrollBarThumbHover}" />
        </Style>
    </ControlTheme>
```

---

### 5. App.axaml Additions

**Location**: `src/AIntern.Desktop/App.axaml`

#### 5.1 Add ResourceInclude in MergedDictionaries

Add the following line inside `<ResourceDictionary.MergedDictionaries>`:

```xml
                <!-- v0.5.2a: Terminal Icons -->
                <ResourceInclude Source="avares://AIntern.Desktop/Resources/IconPaths.axaml" />
```

#### 5.2 Add Terminal Tab Styles in Application.Styles

Add the following styles inside `<Application.Styles>`:

```xml
        <!-- ================================================================ -->
        <!-- Terminal Tab Styles (v0.5.2a)                                     -->
        <!-- ================================================================ -->

        <!-- Make close button visible on tab hover -->
        <Style Selector="Button.terminal-tab:pointerover Button.tab-close">
            <Setter Property="Opacity" Value="0.6" />
        </Style>

        <Style Selector="Button.terminal-tab.active Button.tab-close">
            <Setter Property="Opacity" Value="0.6" />
        </Style>
```

---

### 6. IconPaths.axaml

**Location**: `src/AIntern.Desktop/Resources/IconPaths.axaml`
**Type**: New ResourceDictionary file
**Purpose**: Define StreamGeometry icons for terminal UI elements

```xml
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ================================================================ -->
    <!-- Terminal Icons (v0.5.2a)                                          -->
    <!-- StreamGeometry paths for terminal panel UI elements.              -->
    <!-- ViewBox: 20x20 (scale appropriately for different sizes)          -->
    <!-- ================================================================ -->

    <!-- Terminal Icon - Command prompt symbol with chevron and underscore -->
    <StreamGeometry x:Key="TerminalIcon">M2 4.75A2.75 2.75 0 0 1 4.75 2h10.5A2.75 2.75 0 0 1 18 4.75v10.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25V4.75ZM6.22 6.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 0 1-1.06-1.06L7.94 9 6.22 7.28a.75.75 0 0 1 0-1.06ZM10 12.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z</StreamGeometry>

    <!-- Plus Icon - For new tab button -->
    <StreamGeometry x:Key="PlusIcon">M10 2.5a.75.75 0 0 1 .75.75v6h6a.75.75 0 0 1 0 1.5h-6v6a.75.75 0 0 1-1.5 0v-6h-6a.75.75 0 0 1 0-1.5h6v-6A.75.75 0 0 1 10 2.5Z</StreamGeometry>

    <!-- Close Icon - For tab close buttons -->
    <StreamGeometry x:Key="CloseIcon">M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z</StreamGeometry>

    <!-- Maximize Icon - For panel maximize button -->
    <StreamGeometry x:Key="MaximizeIcon">M3.75 2A1.75 1.75 0 0 0 2 3.75v12.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0 0 18 16.25V3.75A1.75 1.75 0 0 0 16.25 2H3.75ZM3.5 3.75a.25.25 0 0 1 .25-.25h12.5a.25.25 0 0 1 .25.25v12.5a.25.25 0 0 1-.25.25H3.75a.25.25 0 0 1-.25-.25V3.75Z</StreamGeometry>

    <!-- Minimize Icon - For panel minimize button -->
    <StreamGeometry x:Key="MinimizeIcon">M3.75 2A1.75 1.75 0 0 0 2 3.75v12.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0 0 18 16.25V3.75A1.75 1.75 0 0 0 16.25 2H3.75ZM3.5 3.75a.25.25 0 0 1 .25-.25h12.5a.25.25 0 0 1 .25.25v4.75H3.5V3.75Z</StreamGeometry>

    <!-- Chevron Down Icon - For dropdown menus -->
    <StreamGeometry x:Key="ChevronDownIcon">M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z</StreamGeometry>

    <!-- Chevron Up Icon - For collapse actions -->
    <StreamGeometry x:Key="ChevronUpIcon">M14.78 11.78a.75.75 0 0 1-1.06 0L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06Z</StreamGeometry>

    <!-- Split Horizontal Icon - For terminal split functionality -->
    <StreamGeometry x:Key="SplitHorizontalIcon">M2 3.75C2 2.784 2.784 2 3.75 2h12.5c.966 0 1.75.784 1.75 1.75v12.5A1.75 1.75 0 0 1 16.25 18H3.75A1.75 1.75 0 0 1 2 16.25V3.75ZM3.75 3.5a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25H9.5v-13H3.75ZM11 3.5v13h5.25a.25.25 0 0 0 .25-.25V3.75a.25.25 0 0 0-.25-.25H11Z</StreamGeometry>

</ResourceDictionary>
```

---

## File Summary

### Files to Create

| File | Location | Purpose |
|------|----------|---------|
| `CursorStyle.cs` | `src/AIntern.Core/Models/Terminal/` | Cursor style enum (Block, Underline, Bar) |
| `TerminalTheme.cs` | `src/AIntern.Core/Models/Terminal/` | Theme model with 256-color palette support |
| `TerminalThemeColor.cs` | `src/AIntern.Core/Models/Terminal/` | Optional semantic color name enum |
| `IconPaths.axaml` | `src/AIntern.Desktop/Resources/` | Terminal icon StreamGeometry definitions |

### Files to Modify

| File | Location | Changes |
|------|----------|---------|
| `Dark.axaml` | `src/AIntern.Desktop/Themes/` | Add terminal color brushes and control themes |
| `App.axaml` | `src/AIntern.Desktop/` | Add IconPaths resource include and terminal tab styles |

---

## Verification Steps

### 1. Build Verification

```bash
# Verify Core project builds with new models
dotnet build src/AIntern.Core

# Verify Desktop project builds with styles and resources
dotnet build src/AIntern.Desktop
```

### 2. Resource Resolution Verification

After building, verify in code that resources resolve correctly:

```csharp
// Verify TerminalTheme palette calculation
var theme = TerminalTheme.Dark;

// Test ANSI palette (0-15)
var black = theme.GetPaletteColor(0);  // Should be (0, 0, 0)
var red = theme.GetPaletteColor(1);    // Should be (205, 49, 49)

// Test color cube (16-231)
var cubeColor = theme.GetPaletteColor(196);  // Pure red in cube

// Test grayscale (232-255)
var gray = theme.GetPaletteColor(240);  // Mid-gray
```

### 3. AXAML Resource Verification

Ensure resources are accessible from XAML:

```xml
<!-- Test in a view -->
<Button Theme="{StaticResource TerminalTab}" Content="Test Tab" />
<PathIcon Data="{StaticResource TerminalIcon}" Width="16" Height="16" />
```

---

## Integration Notes

### Usage in v0.5.2b (Terminal Renderer)

The `TerminalTheme` class will be used by the SkiaSharp renderer to:
1. Resolve `TerminalColor` values from the buffer to actual RGB colors
2. Apply selection highlighting with the specified alpha
3. Render the cursor with the configured style and color
4. Support color palette lookups for SGR escape sequences

### Example Renderer Integration

```csharp
// In terminal renderer
public void RenderCell(TerminalCell cell, int x, int y)
{
    var fg = _theme.ResolveColor(cell.Attributes.Foreground, isForeground: true);
    var bg = _theme.ResolveColor(cell.Attributes.Background, isForeground: false);

    // Convert to SkiaSharp colors
    var skFg = new SKColor(fg.R, fg.G, fg.B);
    var skBg = new SKColor(bg.R, bg.G, bg.B);

    // Render...
}
```

---

## Changelog Entry

```markdown
## v0.5.2a - Theme & Styles

### Added
- `TerminalTheme` model with support for 256-color palette (ANSI 16 + 6x6x6 color cube + grayscale ramp)
- `CursorStyle` enum with Block, Underline, and Bar options
- `TerminalThemeColor` enum for semantic color references
- Predefined themes: Dark, Light, and Solarized Dark
- Terminal color brushes in Dark.axaml (background, foreground, tab bar, scrollbar)
- Control themes: TerminalTab, TerminalTabCloseButton, TerminalNewTabButton, TerminalIconButton, TerminalScrollBar
- Terminal tab hover/active styles for close button visibility
- IconPaths.axaml with StreamGeometry icons (Terminal, Plus, Close, Maximize, Minimize, Chevrons, Split)

### Files Created
- `src/AIntern.Core/Models/Terminal/CursorStyle.cs`
- `src/AIntern.Core/Models/Terminal/TerminalTheme.cs`
- `src/AIntern.Core/Models/Terminal/TerminalThemeColor.cs`
- `src/AIntern.Desktop/Resources/IconPaths.axaml`

### Files Modified
- `src/AIntern.Desktop/Themes/Dark.axaml` - Added terminal panel colors and control themes
- `src/AIntern.Desktop/App.axaml` - Added IconPaths resource include and terminal tab styles
```
