# Design Specification: AIntern v0.5.4f "Command Block UI"

## Overview

**Version**: v0.5.4f
**Parent**: v0.5.4 Command Integration
**Focus**: Avalonia XAML control for command block rendering with themes and interactions

### Purpose

This sub-version creates the visual UI control for command blocks in chat:
1. Render command blocks with proper code-block styling
2. Display action buttons (Copy, Send to Terminal, Run)
3. Show status badges based on execution state
4. Display danger warning overlay for dangerous commands
5. Support loading spinner during execution
6. Integrate with dark and light themes
7. Add required icons to the icon library

### Dependencies

**From v0.5.4e (Command Block ViewModel)**:
- `CommandBlockViewModel` - Bound ViewModel

**From Avalonia UI**:
- UserControl, Styles, PathIcon
- Converters (StringConverters, BoolToTextConverter)

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    v0.5.4f Command Block UI Architecture                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Control Layer                                     â”‚ â”‚
â”‚  â”‚  src/AIntern.Desktop/Controls/                                          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  CommandBlockControl : UserControl                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ DataType: CommandBlockViewModel                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ Styles:                                                            â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.command-block        (main container)                   â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.command-block.dangerous (red border)                    â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.command-content      (code area)                        â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.status-badge         (status indicator)                 â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.status-badge.success (green)                            â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.status-badge.error   (red)                              â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.status-badge.running (accent)                           â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Border.danger-warning       (warning panel)                    â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Button.command-action       (button base)                      â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Button.run-button           (accent run button)                â”‚ â”‚
â”‚  â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  â””â”€â”€ Layout:                                                            â”‚ â”‚
â”‚  â”‚      â”œâ”€â”€ Row 0: Header (Description + Language Badge + Status)          â”‚ â”‚
â”‚  â”‚      â”œâ”€â”€ Row 1: Command Content (prompt + code text)                    â”‚ â”‚
â”‚  â”‚      â”œâ”€â”€ Row 2: Action Buttons (Copy, Send, Run + Status Message)       â”‚ â”‚
â”‚  â”‚      â””â”€â”€ Row 3: Danger Warning Panel (conditional)                      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Theme Layer                                       â”‚ â”‚
â”‚  â”‚  src/AIntern.Desktop/Themes/                                            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Dark.axaml                              Light.axaml                     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ CommandBlockBackground              â”œâ”€â”€ CommandBlockBackground     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ CommandBlockBorder                  â”œâ”€â”€ CommandBlockBorder         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ CodeBlockBackground                 â”œâ”€â”€ CodeBlockBackground        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ TerminalPromptColor                 â”œâ”€â”€ TerminalPromptColor        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ CodeForeground                      â”œâ”€â”€ CodeForeground             â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ BadgeBackground                     â”œâ”€â”€ BadgeBackground            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ BadgeForeground                     â”œâ”€â”€ BadgeForeground            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ DangerBrush                         â”œâ”€â”€ DangerBrush                â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ DangerBackgroundBrush               â”œâ”€â”€ DangerBackgroundBrush      â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ StatusBadgeBackground               â”œâ”€â”€ StatusBadgeBackground      â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ SuccessBrush                        â”œâ”€â”€ SuccessBrush               â”‚ â”‚
â”‚  â”‚  â””â”€â”€ ErrorBrush                          â””â”€â”€ ErrorBrush                 â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        Icon Layer                                        â”‚ â”‚
â”‚  â”‚  src/AIntern.Desktop/Assets/Icons.axaml                                 â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  New Icons:                                                              â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ PlayIcon       (play triangle)                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ WarningIcon    (warning triangle)                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ SpinnerIcon    (loading circle)                                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€ CopyIcon       (clipboard)          [if not already present]      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Visual Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Command Block Visual Layout                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Normal Command Block                                 â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Description text here...                        [BASH]    Executed â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $ npm install --save-dev typescript eslint prettier              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ [ğŸ“‹ Copy] [>_ Send] â”‚ [â–¶ Run]           Copied to clipboard       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Dangerous Command Block (with warning)                    â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€REDâ”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€REDâ”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Remove node_modules                             [BASH]             â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $ rm -rf node_modules                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ [ğŸ“‹ Copy] [>_ Send] â”‚ [â–¶ Run]                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ âš ï¸ Warning: Potentially Dangerous Command                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ This command recursively deletes files. Verify the path            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ carefully.                                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [Cancel]  [I understand, proceed]                                  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Executing Command Block                                â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Run tests...                                    [BASH]  Running... â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  $ npm test                                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚  â”‚  â”‚ [ğŸ“‹ Copy] [>_ Send] â”‚ [âŸ³ Running...]  (disabled, with spinner)    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Style Classes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Style Class Definitions                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Border.command-block                                                  â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Background: CommandBlockBackground (dark surface)                   â”‚ â”‚
â”‚  â”‚  â€¢ BorderBrush: CommandBlockBorder (subtle border)                     â”‚ â”‚
â”‚  â”‚  â€¢ BorderThickness: 1                                                   â”‚ â”‚
â”‚  â”‚  â€¢ CornerRadius: 6                                                      â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 0                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Margin: 0,8 (vertical spacing between blocks)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Border.command-block.dangerous                                        â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ BorderBrush: DangerBrush (red)                                      â”‚ â”‚
â”‚  â”‚  â€¢ BorderThickness: 2 (thicker for emphasis)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Border.command-content                                                â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Background: CodeBlockBackground (darker code area)                  â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 12,8                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Border.status-badge                                                   â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Background: StatusBadgeBackground (neutral)                         â”‚ â”‚
â”‚  â”‚  â€¢ CornerRadius: 4                                                      â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 6,2                                                         â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Modifiers:                                                             â”‚ â”‚
â”‚  â”‚  â€¢ .success â†’ Background: SuccessBrush (green)                         â”‚ â”‚
â”‚  â”‚  â€¢ .error â†’ Background: ErrorBrush (red)                               â”‚ â”‚
â”‚  â”‚  â€¢ .running â†’ Background: AccentBrush (blue)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Border.danger-warning                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Background: DangerBackgroundBrush (semi-transparent red)            â”‚ â”‚
â”‚  â”‚  â€¢ BorderBrush: DangerBrush                                            â”‚ â”‚
â”‚  â”‚  â€¢ BorderThickness: 1                                                   â”‚ â”‚
â”‚  â”‚  â€¢ CornerRadius: 4                                                      â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 12,8                                                        â”‚ â”‚
â”‚  â”‚  â€¢ Margin: 0,8,0,0 (top spacing)                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Button.command-action                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 8,4                                                         â”‚ â”‚
â”‚  â”‚  â€¢ MinWidth: 0                                                          â”‚ â”‚
â”‚  â”‚  â€¢ Background: Transparent                                              â”‚ â”‚
â”‚  â”‚  â€¢ :pointerover â†’ Background: HoverBrush                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Button.run-button                                                     â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚  â€¢ Background: AccentBrush (primary action color)                      â”‚ â”‚
â”‚  â”‚  â€¢ Foreground: White                                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Specifications

### 1. CommandBlockControl.axaml

**Location**: `src/AIntern.Desktop/Controls/CommandBlockControl.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AIntern.Desktop.ViewModels"
             xmlns:conv="using:AIntern.Desktop.Converters"
             x:Class="AIntern.Desktop.Controls.CommandBlockControl"
             x:DataType="vm:CommandBlockViewModel">

    <UserControl.Resources>
        <conv:EqualityConverter x:Key="EqualityConverter" />
        <conv:BoolToTextConverter x:Key="BoolToTextConverter" />
    </UserControl.Resources>

    <UserControl.Styles>
        <!-- Main Container -->
        <Style Selector="Border.command-block">
            <Setter Property="Background" Value="{DynamicResource CommandBlockBackground}" />
            <Setter Property="BorderBrush" Value="{DynamicResource CommandBlockBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Margin" Value="0,8" />
        </Style>

        <Style Selector="Border.command-block.dangerous">
            <Setter Property="BorderBrush" Value="{DynamicResource DangerBrush}" />
            <Setter Property="BorderThickness" Value="2" />
        </Style>

        <!-- Code Content Area -->
        <Style Selector="Border.command-content">
            <Setter Property="Background" Value="{DynamicResource CodeBlockBackground}" />
            <Setter Property="Padding" Value="12,8" />
        </Style>

        <!-- Status Badges -->
        <Style Selector="Border.status-badge">
            <Setter Property="Background" Value="{DynamicResource StatusBadgeBackground}" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="6,2" />
        </Style>

        <Style Selector="Border.status-badge.success">
            <Setter Property="Background" Value="{DynamicResource SuccessBrush}" />
        </Style>

        <Style Selector="Border.status-badge.error">
            <Setter Property="Background" Value="{DynamicResource ErrorBrush}" />
        </Style>

        <Style Selector="Border.status-badge.warning">
            <Setter Property="Background" Value="{DynamicResource WarningBrush}" />
        </Style>

        <Style Selector="Border.status-badge.running">
            <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
        </Style>

        <Style Selector="Border.status-badge.info">
            <Setter Property="Background" Value="{DynamicResource InfoBrush}" />
        </Style>

        <!-- Danger Warning Panel -->
        <Style Selector="Border.danger-warning">
            <Setter Property="Background" Value="{DynamicResource DangerBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DangerBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Margin" Value="12,0,12,12" />
        </Style>

        <!-- Action Buttons -->
        <Style Selector="Button.command-action">
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="MinWidth" Value="0" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="CornerRadius" Value="4" />
        </Style>

        <Style Selector="Button.command-action:pointerover">
            <Setter Property="Background" Value="{DynamicResource HoverBrush}" />
        </Style>

        <Style Selector="Button.run-button">
            <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <Style Selector="Button.run-button:disabled">
            <Setter Property="Opacity" Value="0.6" />
        </Style>

        <!-- Spinning Animation -->
        <Style Selector="PathIcon.spinning">
            <Style.Animations>
                <Animation Duration="0:0:1" IterationCount="Infinite">
                    <KeyFrame Cue="0%">
                        <Setter Property="RotateTransform.Angle" Value="0" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RotateTransform.Angle" Value="360" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </UserControl.Styles>

    <Border Classes="command-block"
            Classes.dangerous="{Binding IsDangerous}">
        <Grid RowDefinitions="Auto,Auto,Auto,Auto">

            <!-- Row 0: Header (Description + Language Badge + Status) -->
            <Grid Grid.Row="0"
                  ColumnDefinitions="*,Auto,Auto"
                  Margin="12,8"
                  IsVisible="{Binding Description, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">

                <!-- Description -->
                <TextBlock Grid.Column="0"
                           Text="{Binding Description}"
                           FontSize="12"
                           Foreground="{DynamicResource TextMuted}"
                           TextWrapping="Wrap"
                           TextTrimming="CharacterEllipsis"
                           MaxLines="2" />

                <!-- Language Badge -->
                <Border Grid.Column="1"
                        IsVisible="{Binding LanguageBadge, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                        Background="{DynamicResource BadgeBackground}"
                        CornerRadius="3"
                        Padding="6,2"
                        Margin="8,0"
                        VerticalAlignment="Top">
                    <TextBlock Text="{Binding LanguageBadge}"
                               FontSize="10"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource BadgeForeground}" />
                </Border>

                <!-- Status Badge -->
                <Border Grid.Column="2"
                        Classes="status-badge"
                        Classes.success="{Binding StatusClass, Converter={StaticResource EqualityConverter}, ConverterParameter=success}"
                        Classes.error="{Binding StatusClass, Converter={StaticResource EqualityConverter}, ConverterParameter=error}"
                        Classes.warning="{Binding StatusClass, Converter={StaticResource EqualityConverter}, ConverterParameter=warning}"
                        Classes.running="{Binding StatusClass, Converter={StaticResource EqualityConverter}, ConverterParameter=running}"
                        Classes.info="{Binding StatusClass, Converter={StaticResource EqualityConverter}, ConverterParameter=info}"
                        IsVisible="{Binding ShowStatus}"
                        VerticalAlignment="Top">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <PathIcon Data="{Binding StatusIcon, Converter={StaticResource IconNameConverter}}"
                                  Width="10" Height="10"
                                  Foreground="White"
                                  IsVisible="{Binding StatusIcon, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                        <TextBlock Text="{Binding StatusText}"
                                   FontSize="10"
                                   Foreground="White" />
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Row 1: Command Content -->
            <Border Grid.Row="1" Classes="command-content">
                <Grid ColumnDefinitions="Auto,*">
                    <!-- Prompt Symbol -->
                    <TextBlock Grid.Column="0"
                               Text="$"
                               FontFamily="{StaticResource MonospaceFont}"
                               Foreground="{DynamicResource TerminalPromptColor}"
                               Margin="0,0,8,0"
                               VerticalAlignment="Top" />

                    <!-- Command Text -->
                    <SelectableTextBlock Grid.Column="1"
                                         Text="{Binding CommandText}"
                                         FontFamily="{StaticResource MonospaceFont}"
                                         FontSize="13"
                                         TextWrapping="Wrap"
                                         Foreground="{DynamicResource CodeForeground}" />
                </Grid>
            </Border>

            <!-- Row 2: Action Buttons -->
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        Spacing="4"
                        Margin="12,8">

                <!-- Copy Button -->
                <Button Classes="command-action"
                        Command="{Binding CopyCommand}"
                        ToolTip.Tip="Copy to clipboard">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <PathIcon Data="{StaticResource CopyIcon}"
                                  Width="14" Height="14" />
                        <TextBlock Text="Copy" FontSize="12" />
                    </StackPanel>
                </Button>

                <!-- Send to Terminal Button -->
                <Button Classes="command-action"
                        Command="{Binding SendToTerminalCommand}"
                        ToolTip.Tip="Send to terminal (doesn't execute)"
                        IsEnabled="{Binding HasActiveTerminal}">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <PathIcon Data="{StaticResource TerminalIcon}"
                                  Width="14" Height="14" />
                        <TextBlock Text="Send" FontSize="12" />
                    </StackPanel>
                </Button>

                <!-- Separator -->
                <Border Width="1"
                        Height="16"
                        Background="{DynamicResource BorderBrush}"
                        Margin="4,0"
                        VerticalAlignment="Center" />

                <!-- Run Button -->
                <Button Classes="command-action run-button"
                        Command="{Binding ExecuteCommand}"
                        IsEnabled="{Binding CanExecute}"
                        ToolTip.Tip="Execute in terminal">
                    <StackPanel Orientation="Horizontal" Spacing="4">
                        <!-- Play Icon (when not executing) -->
                        <PathIcon Data="{StaticResource PlayIcon}"
                                  Width="14" Height="14"
                                  IsVisible="{Binding !IsExecuting}" />
                        <!-- Spinner Icon (when executing) -->
                        <PathIcon Data="{StaticResource SpinnerIcon}"
                                  Width="14" Height="14"
                                  IsVisible="{Binding IsExecuting}"
                                  Classes="spinning"
                                  RenderTransform="rotate(0)" />
                        <TextBlock Text="{Binding IsExecuting, Converter={StaticResource BoolToTextConverter}, ConverterParameter=Running...|Run}"
                                   FontSize="12" />
                    </StackPanel>
                </Button>

                <!-- Line Count Badge (for multi-line) -->
                <Border IsVisible="{Binding IsMultiLine}"
                        Background="{DynamicResource BadgeBackground}"
                        CornerRadius="3"
                        Padding="6,2"
                        Margin="8,0,0,0"
                        VerticalAlignment="Center">
                    <TextBlock Text="{Binding AdditionalLinesText}"
                               FontSize="10"
                               Foreground="{DynamicResource TextMuted}" />
                </Border>

                <!-- Status Message (transient) -->
                <TextBlock Text="{Binding StatusMessage}"
                           IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                           FontSize="11"
                           Foreground="{DynamicResource TextMuted}"
                           VerticalAlignment="Center"
                           Margin="8,0,0,0" />
            </StackPanel>

            <!-- Row 3: Danger Warning Panel -->
            <Border Grid.Row="3"
                    Classes="danger-warning"
                    IsVisible="{Binding ShowDangerWarning}">
                <StackPanel Spacing="8">
                    <!-- Warning Header -->
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{StaticResource WarningIcon}"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource DangerBrush}" />
                        <TextBlock Text="Warning: Potentially Dangerous Command"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource DangerBrush}" />
                    </StackPanel>

                    <!-- Warning Message -->
                    <TextBlock Text="{Binding DangerWarning}"
                               TextWrapping="Wrap"
                               FontSize="12"
                               Foreground="{DynamicResource TextPrimary}" />

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal"
                                Spacing="8"
                                Margin="0,4,0,0"
                                HorizontalAlignment="Right">
                        <Button Content="Cancel"
                                Command="{Binding CancelDangerCommand}"
                                Padding="12,6"
                                CornerRadius="4" />
                        <Button Content="I understand, proceed"
                                Command="{Binding ConfirmDangerCommand}"
                                Background="{DynamicResource DangerBrush}"
                                Foreground="White"
                                Padding="12,6"
                                CornerRadius="4" />
                    </StackPanel>
                </StackPanel>
            </Border>

        </Grid>
    </Border>
</UserControl>
```

### 2. CommandBlockControl.axaml.cs

**Location**: `src/AIntern.Desktop/Controls/CommandBlockControl.axaml.cs`

```csharp
namespace AIntern.Desktop.Controls;

using Avalonia.Controls;

/// <summary>
/// Control for rendering command blocks in chat messages.
/// </summary>
public partial class CommandBlockControl : UserControl
{
    public CommandBlockControl()
    {
        InitializeComponent();
    }
}
```

### 3. Theme Additions - Dark.axaml

**Location**: `src/AIntern.Desktop/Themes/Dark.axaml` (additions)

```xml
<!-- Command Block Colors -->
<Color x:Key="CommandBlockBackgroundColor">#1E1E2E</Color>
<Color x:Key="CommandBlockBorderColor">#313244</Color>
<Color x:Key="CodeBlockBackgroundColor">#11111B</Color>
<Color x:Key="TerminalPromptColorValue">#89B4FA</Color>
<Color x:Key="CodeForegroundColor">#CDD6F4</Color>
<Color x:Key="BadgeBackgroundColor">#45475A</Color>
<Color x:Key="BadgeForegroundColor">#BAC2DE</Color>
<Color x:Key="DangerColorValue">#F38BA8</Color>
<Color x:Key="DangerBackgroundColorValue">#F38BA820</Color>
<Color x:Key="StatusBadgeBackgroundColor">#585B70</Color>
<Color x:Key="SuccessColorValue">#A6E3A1</Color>
<Color x:Key="WarningColorValue">#F9E2AF</Color>
<Color x:Key="InfoColorValue">#89B4FA</Color>

<!-- Command Block Brushes -->
<SolidColorBrush x:Key="CommandBlockBackground" Color="{StaticResource CommandBlockBackgroundColor}" />
<SolidColorBrush x:Key="CommandBlockBorder" Color="{StaticResource CommandBlockBorderColor}" />
<SolidColorBrush x:Key="CodeBlockBackground" Color="{StaticResource CodeBlockBackgroundColor}" />
<SolidColorBrush x:Key="TerminalPromptColor" Color="{StaticResource TerminalPromptColorValue}" />
<SolidColorBrush x:Key="CodeForeground" Color="{StaticResource CodeForegroundColor}" />
<SolidColorBrush x:Key="BadgeBackground" Color="{StaticResource BadgeBackgroundColor}" />
<SolidColorBrush x:Key="BadgeForeground" Color="{StaticResource BadgeForegroundColor}" />
<SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColorValue}" />
<SolidColorBrush x:Key="DangerBackgroundBrush" Color="{StaticResource DangerBackgroundColorValue}" />
<SolidColorBrush x:Key="StatusBadgeBackground" Color="{StaticResource StatusBadgeBackgroundColor}" />
<SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColorValue}" />
<SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource DangerColorValue}" />
<SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColorValue}" />
<SolidColorBrush x:Key="InfoBrush" Color="{StaticResource InfoColorValue}" />
```

### 4. Theme Additions - Light.axaml

**Location**: `src/AIntern.Desktop/Themes/Light.axaml` (additions)

```xml
<!-- Command Block Colors (Light Theme) -->
<Color x:Key="CommandBlockBackgroundColor">#EFF1F5</Color>
<Color x:Key="CommandBlockBorderColor">#CCD0DA</Color>
<Color x:Key="CodeBlockBackgroundColor">#DCE0E8</Color>
<Color x:Key="TerminalPromptColorValue">#1E66F5</Color>
<Color x:Key="CodeForegroundColor">#4C4F69</Color>
<Color x:Key="BadgeBackgroundColor">#ACB0BE</Color>
<Color x:Key="BadgeForegroundColor">#5C5F77</Color>
<Color x:Key="DangerColorValue">#D20F39</Color>
<Color x:Key="DangerBackgroundColorValue">#D20F3920</Color>
<Color x:Key="StatusBadgeBackgroundColor">#9CA0B0</Color>
<Color x:Key="SuccessColorValue">#40A02B</Color>
<Color x:Key="WarningColorValue">#DF8E1D</Color>
<Color x:Key="InfoColorValue">#1E66F5</Color>

<!-- Command Block Brushes -->
<SolidColorBrush x:Key="CommandBlockBackground" Color="{StaticResource CommandBlockBackgroundColor}" />
<SolidColorBrush x:Key="CommandBlockBorder" Color="{StaticResource CommandBlockBorderColor}" />
<SolidColorBrush x:Key="CodeBlockBackground" Color="{StaticResource CodeBlockBackgroundColor}" />
<SolidColorBrush x:Key="TerminalPromptColor" Color="{StaticResource TerminalPromptColorValue}" />
<SolidColorBrush x:Key="CodeForeground" Color="{StaticResource CodeForegroundColor}" />
<SolidColorBrush x:Key="BadgeBackground" Color="{StaticResource BadgeBackgroundColor}" />
<SolidColorBrush x:Key="BadgeForeground" Color="{StaticResource BadgeForegroundColor}" />
<SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColorValue}" />
<SolidColorBrush x:Key="DangerBackgroundBrush" Color="{StaticResource DangerBackgroundColorValue}" />
<SolidColorBrush x:Key="StatusBadgeBackground" Color="{StaticResource StatusBadgeBackgroundColor}" />
<SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColorValue}" />
<SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource DangerColorValue}" />
<SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColorValue}" />
<SolidColorBrush x:Key="InfoBrush" Color="{StaticResource InfoColorValue}" />
```

### 5. Icon Additions - Icons.axaml

**Location**: `src/AIntern.Desktop/Assets/Icons.axaml` (additions)

```xml
<!-- Play Icon (Run button) -->
<StreamGeometry x:Key="PlayIcon">M8 5v14l11-7z</StreamGeometry>

<!-- Warning Icon (Danger warning) -->
<StreamGeometry x:Key="WarningIcon">M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z</StreamGeometry>

<!-- Spinner Icon (Loading) -->
<StreamGeometry x:Key="SpinnerIcon">M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z</StreamGeometry>

<!-- Copy Icon (if not already present) -->
<StreamGeometry x:Key="CopyIcon">M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z</StreamGeometry>

<!-- Terminal Icon (if not already present) -->
<StreamGeometry x:Key="TerminalIcon">M20 19V7H4v12h16m0-14a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V7c0-1.1.9-2 2-2h16M7.5 17l-1.41-1.41L8.67 13 6.09 10.41 7.5 9l4 4-4 4m4.5 0v-2h5v2h-5z</StreamGeometry>

<!-- Check Icon (Success) -->
<StreamGeometry x:Key="CheckIcon">M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z</StreamGeometry>

<!-- Error Icon (Failed) -->
<StreamGeometry x:Key="ErrorIcon">M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z</StreamGeometry>

<!-- Cancel Icon -->
<StreamGeometry x:Key="CancelIcon">M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z</StreamGeometry>
```

### 6. EqualityConverter.cs

**Location**: `src/AIntern.Desktop/Converters/EqualityConverter.cs`

```csharp
namespace AIntern.Desktop.Converters;

using System;
using System.Globalization;
using Avalonia.Data.Converters;

/// <summary>
/// Converter that returns true if the value equals the parameter.
/// </summary>
public class EqualityConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value == null && parameter == null)
            return true;

        if (value == null || parameter == null)
            return false;

        return string.Equals(
            value.ToString(),
            parameter.ToString(),
            StringComparison.OrdinalIgnoreCase);
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}
```

### 7. BoolToTextConverter.cs

**Location**: `src/AIntern.Desktop/Converters/BoolToTextConverter.cs`

```csharp
namespace AIntern.Desktop.Converters;

using System;
using System.Globalization;
using Avalonia.Data.Converters;

/// <summary>
/// Converts boolean to text. Parameter format: "TrueText|FalseText"
/// </summary>
public class BoolToTextConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not bool boolValue)
            return null;

        var texts = parameter?.ToString()?.Split('|') ?? Array.Empty<string>();
        if (texts.Length != 2)
            return value.ToString();

        return boolValue ? texts[0] : texts[1];
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
}
```

---

## File Summary

| File | Location | Purpose |
|------|----------|---------|
| `CommandBlockControl.axaml` | `src/AIntern.Desktop/Controls/` | Command block XAML control |
| `CommandBlockControl.axaml.cs` | `src/AIntern.Desktop/Controls/` | Code-behind |
| `EqualityConverter.cs` | `src/AIntern.Desktop/Converters/` | Status class comparison |
| `BoolToTextConverter.cs` | `src/AIntern.Desktop/Converters/` | Bool to Run/Running text |

### Files to Modify

| File | Changes |
|------|---------|
| `src/AIntern.Desktop/Themes/Dark.axaml` | Add 14 command block color resources |
| `src/AIntern.Desktop/Themes/Light.axaml` | Add 14 command block color resources (light variants) |
| `src/AIntern.Desktop/Assets/Icons.axaml` | Add 7 new icons |

---

## Verification

```bash
# Build the desktop project
dotnet build src/AIntern.Desktop

# Run and visually test
dotnet run --project src/AIntern.Desktop

# Verify control compiles
grep -n "CommandBlockControl" src/AIntern.Desktop/Controls/CommandBlockControl.axaml.cs
```

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Command blocks render with proper code-block styling |
| AC-2 | Copy button works and shows feedback |
| AC-3 | Send button is enabled only with active terminal |
| AC-4 | Run button shows play icon when idle |
| AC-5 | Run button shows spinner when executing |
| AC-6 | Status badges display with correct colors |
| AC-7 | Dangerous commands have red border |
| AC-8 | Danger warning panel shows when triggered |
| AC-9 | Confirm/Cancel buttons work in danger dialog |
| AC-10 | Dark theme looks correct |
| AC-11 | Light theme looks correct |
| AC-12 | All icons render properly |

---

## Changelog Entry

```markdown
## v0.5.4f - Command Block UI

### Added
- `CommandBlockControl` UserControl with:
  - 4-row Grid layout (header, content, actions, warning)
  - Style classes for command-block, dangerous, status badges
  - Copy, Send, Run action buttons
  - Loading spinner animation during execution
  - Danger warning overlay with confirm/cancel
  - Monospace font for command display
  - Selectable command text

- `EqualityConverter` for status class binding
- `BoolToTextConverter` for Run/Running text

### Theme Resources
- Dark theme: 14 new color resources (Catppuccin Mocha palette)
- Light theme: 14 new color resources (Catppuccin Latte palette)

### Icons
- PlayIcon (run button)
- WarningIcon (danger warning)
- SpinnerIcon (loading)
- CopyIcon (clipboard)
- TerminalIcon (send button)
- CheckIcon (success status)
- ErrorIcon (failed status)
- CancelIcon (cancelled status)
```

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.5.4f | 0.75 day |
