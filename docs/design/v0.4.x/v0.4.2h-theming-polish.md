# v0.4.2h: Theming & Polish - Design Specification

**Status**: _IMPLEMENTED_

## Executive Summary

This specification details the **Theming & Polish** layer for The Senior Intern's diff viewer, establishing a cohesive visual design system with diff-specific colors, styles, icons, and visual refinements. The implementation adds theme resources to the existing Dark theme and provides icon geometries for the diff viewer UI.

### Key Deliverables

| Component | Type | Purpose |
|-----------|------|---------|
| Diff Color Resources | Theme Colors | 25+ color definitions for diff states |
| Diff Brush Resources | SolidColorBrush | Bindable brush resources for XAML |
| Diff Styles | CSS-like Styles | Reusable styles for diff components |
| Icon Resources | StreamGeometry | SVG-based icons for diff UI |
| Light Theme Support | Theme Colors | Light theme color variants |

---

## Feature Overview

```
v0.4.2h: Theming & Polish
├── Color System
│   ├── Panel Colors
│   │   ├── DiffHeaderBackground
│   │   ├── DiffPanelBackground
│   │   ├── DiffSplitterBackground
│   │   └── DiffFooterBackground
│   ├── Line State Colors
│   │   ├── Added (Background, Foreground, Gutter)
│   │   ├── Removed (Background, Foreground, Gutter)
│   │   ├── Modified (Background, Foreground)
│   │   ├── Unchanged (Background)
│   │   └── Placeholder (Background)
│   ├── Inline Change Colors
│   │   ├── InlineAddedBackground
│   │   └── InlineRemovedBackground
│   ├── Hunk Colors
│   │   ├── HunkHeaderBackground
│   │   ├── HunkHeaderForeground
│   │   └── HunkBorder
│   └── Gutter Colors
│       ├── GutterBackground
│       ├── GutterForeground
│       └── GutterBorder
├── Brush Resources
│   ├── SolidColorBrush definitions
│   └── DynamicResource bindings
├── Style Definitions
│   ├── Panel Styles (header, panel, footer)
│   ├── Line Styles (added, removed, modified, placeholder)
│   ├── Gutter Styles
│   ├── Inline Change Styles
│   └── Badge Styles (new-file, deleted-file)
├── Icon Resources
│   ├── Navigation Icons (chevrons)
│   ├── Action Icons (copy, check, close)
│   ├── Feature Icons (highlight, wrap, link)
│   └── Status Icons (file, error, warning)
└── Animation Definitions
    ├── Hunk highlight fade
    ├── Navigation scroll smooth
    └── Button hover transitions
```

---

## Architecture Diagrams

### Color Hierarchy

```
┌─────────────────────────────────────────────────────────────────────┐
│                       Diff Color System                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    Base Colors (x:Key)                       │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │   │
│  │  │   Panel     │  │   Lines     │  │   Inline    │          │   │
│  │  │   Colors    │  │   Colors    │  │   Colors    │          │   │
│  │  │  #1F1F1F    │  │  #1E3A21    │  │  #2D5A31    │          │   │
│  │  │  #1A1A1A    │  │  #3A1E1E    │  │  #5A2D2D    │          │   │
│  │  │  #333333    │  │  #3A3A1E    │  │             │          │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │              SolidColorBrush Resources                       │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │  DiffHeaderBackgroundBrush                          │    │   │
│  │  │  DiffAddedBackgroundBrush                           │    │   │
│  │  │  DiffRemovedForegroundBrush                         │    │   │
│  │  │  ... (one per color)                                │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    Styles (Selector-based)                   │   │
│  │  ┌─────────────────────────────────────────────────────┐    │   │
│  │  │  Border.diff-header → Background, Border            │    │   │
│  │  │  Grid.added → Background                            │    │   │
│  │  │  TextBlock.inline-removed → Strikethrough           │    │   │
│  │  │  ... (component-specific)                           │    │   │
│  │  └─────────────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Visual Component Mapping

```
┌─────────────────────────────────────────────────────────────────────┐
│                      DiffViewerPanel                                │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │  Border.diff-header                                           │ │
│  │  ┌─────────────────┬─────────────────┬─────────────────────┐ │ │
│  │  │ PathIcon        │ TextBlock       │ ToggleButton        │ │ │
│  │  │ FileCodeIcon    │ NavigationStatus│ .toolbar            │ │ │
│  │  └─────────────────┴─────────────────┴─────────────────────┘ │ │
│  └───────────────────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │  Grid                                                         │ │
│  │  ┌────────────────────────┐ ┌────────────────────────┐       │ │
│  │  │ Border.panel-header    │ │ Border.panel-header    │       │ │
│  │  │ "Original"             │ │ "Proposed"             │       │ │
│  │  ├────────────────────────┤ ├────────────────────────┤       │ │
│  │  │ Border.diff-panel      │ │ Border.diff-panel      │       │ │
│  │  │ ┌────────────────────┐ │ │ ┌────────────────────┐ │       │ │
│  │  │ │ DiffHunkControl    │ │ │ │ DiffHunkControl    │ │       │ │
│  │  │ │ ┌────────────────┐ │ │ │ │ ┌────────────────┐ │ │       │ │
│  │  │ │ │Grid.added      │ │ │ │ │ │Grid.added      │ │ │       │ │
│  │  │ │ │Grid.removed    │ │ │ │ │ │Grid.placeholder│ │ │       │ │
│  │  │ │ │Grid.unchanged  │ │ │ │ │ │Grid.unchanged  │ │ │       │ │
│  │  │ │ └────────────────┘ │ │ │ │ └────────────────┘ │ │       │ │
│  │  │ └────────────────────┘ │ │ └────────────────────┘ │       │ │
│  │  └────────────────────────┘ └────────────────────────┘       │ │
│  └───────────────────────────────────────────────────────────────┘ │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │  Border.diff-footer                                           │ │
│  │  ┌─────────────────────────────┬─────────────────────────────┐│ │
│  │  │ TextBlock (keyboard hints)  │ Button.primary / .secondary ││ │
│  │  └─────────────────────────────┴─────────────────────────────┘│ │
│  └───────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

### Color Palette Visualization

```
Dark Theme Diff Colors
══════════════════════════════════════════════════════════════════════

PANEL COLORS
┌──────────────────────────────────────────────────────────────────┐
│  Header/Footer   │  #1F1F1F  │  ████████  │  Slightly elevated   │
│  Panel BG        │  #1A1A1A  │  ████████  │  Main content area   │
│  Splitter        │  #333333  │  ████████  │  Visual separator    │
└──────────────────────────────────────────────────────────────────┘

LINE STATE COLORS
┌──────────────────────────────────────────────────────────────────┐
│  ADDED                                                           │
│  Background      │  #1E3A21  │  ████████  │  Subtle green tint   │
│  Foreground      │  #4ADE80  │  ████████  │  Bright green text   │
│  Gutter          │  #2D5A31  │  ████████  │  Darker green accent │
├──────────────────────────────────────────────────────────────────┤
│  REMOVED                                                         │
│  Background      │  #3A1E1E  │  ████████  │  Subtle red tint     │
│  Foreground      │  #F87171  │  ████████  │  Bright red text     │
│  Gutter          │  #5A2D2D  │  ████████  │  Darker red accent   │
├──────────────────────────────────────────────────────────────────┤
│  MODIFIED                                                        │
│  Background      │  #3A3A1E  │  ████████  │  Subtle yellow tint  │
│  Foreground      │  #FBBF24  │  ████████  │  Amber text          │
├──────────────────────────────────────────────────────────────────┤
│  UNCHANGED       │  Transparent          │  No visual change    │
│  PLACEHOLDER     │  #0A0A0A  │  ████████  │  Very dark, 50% opacity │
└──────────────────────────────────────────────────────────────────┘

INLINE CHANGE COLORS
┌──────────────────────────────────────────────────────────────────┐
│  Inline Added    │  #2D5A31  │  ████████  │  Matches gutter      │
│  Inline Removed  │  #5A2D2D  │  ████████  │  With strikethrough  │
└──────────────────────────────────────────────────────────────────┘

GUTTER COLORS
┌──────────────────────────────────────────────────────────────────┐
│  Background      │  #1A1A1A  │  ████████  │  Matches panel       │
│  Foreground      │  #6E7681  │  ████████  │  Muted line numbers  │
│  Border          │  #2D2D2D  │  ████████  │  Subtle separator    │
└──────────────────────────────────────────────────────────────────┘
```

---

## Detailed Design

### Dark Theme Colors

```xml
<!-- src/SeniorIntern.Desktop/Themes/DiffColors.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ═══════════════════════════════════════════════════════════════
         DIFF PANEL COLORS
         Structural colors for the diff viewer container
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Header and Footer backgrounds - slightly elevated from main panel -->
    <Color x:Key="DiffHeaderBackground">#1F1F1F</Color>
    <Color x:Key="DiffFooterBackground">#1F1F1F</Color>

    <!-- Main panel background - primary content area -->
    <Color x:Key="DiffPanelBackground">#1A1A1A</Color>

    <!-- Splitter between original and proposed panels -->
    <Color x:Key="DiffSplitterBackground">#333333</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         DIFF LINE STATE COLORS
         Visual indicators for line change types
         ═══════════════════════════════════════════════════════════════ -->

    <!-- ADDED LINES - Green tones indicating new content -->
    <Color x:Key="DiffAddedBackground">#1E3A21</Color>
    <Color x:Key="DiffAddedForeground">#4ADE80</Color>
    <Color x:Key="DiffAddedGutter">#2D5A31</Color>

    <!-- REMOVED LINES - Red tones indicating deleted content -->
    <Color x:Key="DiffRemovedBackground">#3A1E1E</Color>
    <Color x:Key="DiffRemovedForeground">#F87171</Color>
    <Color x:Key="DiffRemovedGutter">#5A2D2D</Color>

    <!-- MODIFIED LINES - Yellow/amber tones for changed content -->
    <Color x:Key="DiffModifiedBackground">#3A3A1E</Color>
    <Color x:Key="DiffModifiedForeground">#FBBF24</Color>

    <!-- UNCHANGED LINES - No visual distinction -->
    <Color x:Key="DiffUnchangedBackground">Transparent</Color>
    <Color x:Key="DiffUnchangedForeground">#D4D4D4</Color>

    <!-- PLACEHOLDER LINES - Empty space opposite added/removed -->
    <Color x:Key="DiffPlaceholderBackground">#0A0A0A</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         INLINE CHANGE COLORS
         Character-level change highlighting within lines
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffInlineAddedBackground">#2D5A31</Color>
    <Color x:Key="DiffInlineRemovedBackground">#5A2D2D</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         HUNK COLORS
         Visual grouping for change blocks
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffHunkHeaderBackground">#252526</Color>
    <Color x:Key="DiffHunkHeaderForeground">#858585</Color>
    <Color x:Key="DiffHunkBorder">#333333</Color>

    <!-- Current/focused hunk highlighting -->
    <Color x:Key="DiffHunkCurrentBorder">#0078D4</Color>
    <Color x:Key="DiffHunkCurrentBackground">#0078D410</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         GUTTER COLORS
         Line number column styling
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffGutterBackground">#1A1A1A</Color>
    <Color x:Key="DiffGutterForeground">#6E7681</Color>
    <Color x:Key="DiffGutterBorder">#2D2D2D</Color>

    <!-- Gutter indicator for change type -->
    <Color x:Key="DiffGutterAddedIndicator">#4ADE80</Color>
    <Color x:Key="DiffGutterRemovedIndicator">#F87171</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         NAVIGATION COLORS
         Current hunk indicator and navigation UI
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffNavigationButtonBackground">#2D2D2D</Color>
    <Color x:Key="DiffNavigationButtonHover">#3D3D3D</Color>
    <Color x:Key="DiffNavigationButtonDisabled">#1F1F1F</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         ACTION BUTTON COLORS
         Apply, Cancel, Copy button styling
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffApplyButtonBackground">#238636</Color>
    <Color x:Key="DiffApplyButtonHover">#2EA043</Color>
    <Color x:Key="DiffApplyButtonForeground">#FFFFFF</Color>

    <Color x:Key="DiffCancelButtonBackground">#21262D</Color>
    <Color x:Key="DiffCancelButtonHover">#30363D</Color>
    <Color x:Key="DiffCancelButtonBorder">#363B42</Color>

    <!-- ═══════════════════════════════════════════════════════════════
         STATUS COLORS
         Statistics and status indicator colors
         ═══════════════════════════════════════════════════════════════ -->

    <Color x:Key="DiffStatsAddedColor">#4ADE80</Color>
    <Color x:Key="DiffStatsRemovedColor">#F87171</Color>
    <Color x:Key="DiffStatsModifiedColor">#FBBF24</Color>

</ResourceDictionary>
```

### SolidColorBrush Resources

```xml
<!-- src/SeniorIntern.Desktop/Themes/DiffBrushes.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Import color definitions -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceInclude Source="DiffColors.axaml"/>
    </ResourceDictionary.MergedDictionaries>

    <!-- ═══════════════════════════════════════════════════════════════
         PANEL BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffHeaderBackgroundBrush"
                     Color="{StaticResource DiffHeaderBackground}"/>
    <SolidColorBrush x:Key="DiffFooterBackgroundBrush"
                     Color="{StaticResource DiffFooterBackground}"/>
    <SolidColorBrush x:Key="DiffPanelBackgroundBrush"
                     Color="{StaticResource DiffPanelBackground}"/>
    <SolidColorBrush x:Key="DiffSplitterBackgroundBrush"
                     Color="{StaticResource DiffSplitterBackground}"/>

    <!-- ═══════════════════════════════════════════════════════════════
         LINE STATE BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Added -->
    <SolidColorBrush x:Key="DiffAddedBackgroundBrush"
                     Color="{StaticResource DiffAddedBackground}"/>
    <SolidColorBrush x:Key="DiffAddedForegroundBrush"
                     Color="{StaticResource DiffAddedForeground}"/>
    <SolidColorBrush x:Key="DiffAddedGutterBrush"
                     Color="{StaticResource DiffAddedGutter}"/>

    <!-- Removed -->
    <SolidColorBrush x:Key="DiffRemovedBackgroundBrush"
                     Color="{StaticResource DiffRemovedBackground}"/>
    <SolidColorBrush x:Key="DiffRemovedForegroundBrush"
                     Color="{StaticResource DiffRemovedForeground}"/>
    <SolidColorBrush x:Key="DiffRemovedGutterBrush"
                     Color="{StaticResource DiffRemovedGutter}"/>

    <!-- Modified -->
    <SolidColorBrush x:Key="DiffModifiedBackgroundBrush"
                     Color="{StaticResource DiffModifiedBackground}"/>
    <SolidColorBrush x:Key="DiffModifiedForegroundBrush"
                     Color="{StaticResource DiffModifiedForeground}"/>

    <!-- Unchanged -->
    <SolidColorBrush x:Key="DiffUnchangedBackgroundBrush"
                     Color="{StaticResource DiffUnchangedBackground}"/>
    <SolidColorBrush x:Key="DiffUnchangedForegroundBrush"
                     Color="{StaticResource DiffUnchangedForeground}"/>

    <!-- Placeholder -->
    <SolidColorBrush x:Key="DiffPlaceholderBackgroundBrush"
                     Color="{StaticResource DiffPlaceholderBackground}"
                     Opacity="0.5"/>

    <!-- ═══════════════════════════════════════════════════════════════
         INLINE CHANGE BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffInlineAddedBackgroundBrush"
                     Color="{StaticResource DiffInlineAddedBackground}"/>
    <SolidColorBrush x:Key="DiffInlineRemovedBackgroundBrush"
                     Color="{StaticResource DiffInlineRemovedBackground}"/>

    <!-- ═══════════════════════════════════════════════════════════════
         HUNK BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffHunkHeaderBackgroundBrush"
                     Color="{StaticResource DiffHunkHeaderBackground}"/>
    <SolidColorBrush x:Key="DiffHunkHeaderForegroundBrush"
                     Color="{StaticResource DiffHunkHeaderForeground}"/>
    <SolidColorBrush x:Key="DiffHunkBorderBrush"
                     Color="{StaticResource DiffHunkBorder}"/>
    <SolidColorBrush x:Key="DiffHunkCurrentBorderBrush"
                     Color="{StaticResource DiffHunkCurrentBorder}"/>
    <SolidColorBrush x:Key="DiffHunkCurrentBackgroundBrush"
                     Color="{StaticResource DiffHunkCurrentBackground}"/>

    <!-- ═══════════════════════════════════════════════════════════════
         GUTTER BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffGutterBackgroundBrush"
                     Color="{StaticResource DiffGutterBackground}"/>
    <SolidColorBrush x:Key="DiffGutterForegroundBrush"
                     Color="{StaticResource DiffGutterForeground}"/>
    <SolidColorBrush x:Key="DiffGutterBorderBrush"
                     Color="{StaticResource DiffGutterBorder}"/>
    <SolidColorBrush x:Key="DiffGutterAddedIndicatorBrush"
                     Color="{StaticResource DiffGutterAddedIndicator}"/>
    <SolidColorBrush x:Key="DiffGutterRemovedIndicatorBrush"
                     Color="{StaticResource DiffGutterRemovedIndicator}"/>

    <!-- ═══════════════════════════════════════════════════════════════
         BUTTON BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffApplyButtonBackgroundBrush"
                     Color="{StaticResource DiffApplyButtonBackground}"/>
    <SolidColorBrush x:Key="DiffApplyButtonHoverBrush"
                     Color="{StaticResource DiffApplyButtonHover}"/>
    <SolidColorBrush x:Key="DiffApplyButtonForegroundBrush"
                     Color="{StaticResource DiffApplyButtonForeground}"/>

    <SolidColorBrush x:Key="DiffCancelButtonBackgroundBrush"
                     Color="{StaticResource DiffCancelButtonBackground}"/>
    <SolidColorBrush x:Key="DiffCancelButtonHoverBrush"
                     Color="{StaticResource DiffCancelButtonHover}"/>
    <SolidColorBrush x:Key="DiffCancelButtonBorderBrush"
                     Color="{StaticResource DiffCancelButtonBorder}"/>

    <!-- ═══════════════════════════════════════════════════════════════
         STATS BRUSHES
         ═══════════════════════════════════════════════════════════════ -->

    <SolidColorBrush x:Key="DiffStatsAddedBrush"
                     Color="{StaticResource DiffStatsAddedColor}"/>
    <SolidColorBrush x:Key="DiffStatsRemovedBrush"
                     Color="{StaticResource DiffStatsRemovedColor}"/>
    <SolidColorBrush x:Key="DiffStatsModifiedBrush"
                     Color="{StaticResource DiffStatsModifiedColor}"/>

</ResourceDictionary>
```

### Diff Styles

```xml
<!-- src/SeniorIntern.Desktop/Themes/DiffStyles.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ═══════════════════════════════════════════════════════════════
         PANEL STYLES
         Structural container styles for the diff viewer
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Main header bar -->
    <Style Selector="Border.diff-header">
        <Setter Property="Background" Value="{DynamicResource DiffHeaderBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="12,8"/>
    </Style>

    <!-- Main content panel -->
    <Style Selector="Border.diff-panel">
        <Setter Property="Background" Value="{DynamicResource DiffPanelBackgroundBrush}"/>
    </Style>

    <!-- Footer bar -->
    <Style Selector="Border.diff-footer">
        <Setter Property="Background" Value="{DynamicResource DiffFooterBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,1,0,0"/>
        <Setter Property="Padding" Value="12,8"/>
    </Style>

    <!-- Individual panel headers (Original/Proposed) -->
    <Style Selector="Border.panel-header">
        <Setter Property="Background" Value="{DynamicResource DiffHunkHeaderBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="12,6"/>
    </Style>

    <Style Selector="Border.panel-header TextBlock">
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
    </Style>

    <!-- GridSplitter between panels -->
    <Style Selector="GridSplitter.diff-splitter">
        <Setter Property="Background" Value="{DynamicResource DiffSplitterBackgroundBrush}"/>
        <Setter Property="MinWidth" Value="4"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         LINE STATE STYLES
         Visual styles for different line change types
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Added line (new content) -->
    <Style Selector="Grid.diff-line.added">
        <Setter Property="Background" Value="{DynamicResource DiffAddedBackgroundBrush}"/>
    </Style>

    <Style Selector="Grid.diff-line.added TextBlock.content">
        <Setter Property="Foreground" Value="{DynamicResource DiffAddedForegroundBrush}"/>
    </Style>

    <!-- Removed line (deleted content) -->
    <Style Selector="Grid.diff-line.removed">
        <Setter Property="Background" Value="{DynamicResource DiffRemovedBackgroundBrush}"/>
    </Style>

    <Style Selector="Grid.diff-line.removed TextBlock.content">
        <Setter Property="Foreground" Value="{DynamicResource DiffRemovedForegroundBrush}"/>
    </Style>

    <!-- Modified line (changed content) -->
    <Style Selector="Grid.diff-line.modified">
        <Setter Property="Background" Value="{DynamicResource DiffModifiedBackgroundBrush}"/>
    </Style>

    <Style Selector="Grid.diff-line.modified TextBlock.content">
        <Setter Property="Foreground" Value="{DynamicResource DiffModifiedForegroundBrush}"/>
    </Style>

    <!-- Unchanged line (context) -->
    <Style Selector="Grid.diff-line.unchanged">
        <Setter Property="Background" Value="{DynamicResource DiffUnchangedBackgroundBrush}"/>
    </Style>

    <Style Selector="Grid.diff-line.unchanged TextBlock.content">
        <Setter Property="Foreground" Value="{DynamicResource DiffUnchangedForegroundBrush}"/>
    </Style>

    <!-- Placeholder line (empty space for alignment) -->
    <Style Selector="Grid.diff-line.placeholder">
        <Setter Property="Background" Value="{DynamicResource DiffPlaceholderBackgroundBrush}"/>
        <Setter Property="Opacity" Value="0.5"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         GUTTER STYLES
         Line number column styling
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Border.line-gutter">
        <Setter Property="Background" Value="{DynamicResource DiffGutterBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource DiffGutterBorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,1,0"/>
        <Setter Property="MinWidth" Value="48"/>
        <Setter Property="Padding" Value="8,0"/>
    </Style>

    <Style Selector="Border.line-gutter TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DiffGutterForegroundBrush}"/>
        <Setter Property="FontFamily" Value="{StaticResource MonospaceFontFamily}"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="TextAlignment" Value="Right"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
    </Style>

    <!-- Gutter with added indicator -->
    <Style Selector="Border.line-gutter.added">
        <Setter Property="Background" Value="{DynamicResource DiffAddedGutterBrush}"/>
    </Style>

    <!-- Gutter with removed indicator -->
    <Style Selector="Border.line-gutter.removed">
        <Setter Property="Background" Value="{DynamicResource DiffRemovedGutterBrush}"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         INLINE CHANGE STYLES
         Character-level highlighting within modified lines
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="TextBlock.inline-added">
        <Setter Property="Background" Value="{DynamicResource DiffInlineAddedBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{DynamicResource DiffAddedForegroundBrush}"/>
    </Style>

    <Style Selector="TextBlock.inline-removed">
        <Setter Property="Background" Value="{DynamicResource DiffInlineRemovedBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{DynamicResource DiffRemovedForegroundBrush}"/>
        <Setter Property="TextDecorations" Value="Strikethrough"/>
    </Style>

    <Style Selector="TextBlock.inline-unchanged">
        <Setter Property="Background" Value="Transparent"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         HUNK STYLES
         Change block grouping styles
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Border.diff-hunk">
        <Setter Property="BorderBrush" Value="{DynamicResource DiffHunkBorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Margin" Value="0,0,0,8"/>
    </Style>

    <Style Selector="Border.diff-hunk-header">
        <Setter Property="Background" Value="{DynamicResource DiffHunkHeaderBackgroundBrush}"/>
        <Setter Property="Padding" Value="12,4"/>
    </Style>

    <Style Selector="Border.diff-hunk-header TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DiffHunkHeaderForegroundBrush}"/>
        <Setter Property="FontFamily" Value="{StaticResource MonospaceFontFamily}"/>
        <Setter Property="FontSize" Value="11"/>
    </Style>

    <!-- Current/focused hunk indicator -->
    <Style Selector="Border.diff-hunk.current">
        <Setter Property="BorderBrush" Value="{DynamicResource DiffHunkCurrentBorderBrush}"/>
        <Setter Property="BorderThickness" Value="2,0,0,1"/>
        <Setter Property="Background" Value="{DynamicResource DiffHunkCurrentBackgroundBrush}"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         BADGE STYLES
         Status indicators for files
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Border.new-file-badge">
        <Setter Property="Background" Value="{DynamicResource DiffAddedBackgroundBrush}"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="CornerRadius" Value="3"/>
    </Style>

    <Style Selector="Border.new-file-badge TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DiffAddedForegroundBrush}"/>
        <Setter Property="FontSize" Value="11"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <Style Selector="Border.deleted-file-badge">
        <Setter Property="Background" Value="{DynamicResource DiffRemovedBackgroundBrush}"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="CornerRadius" Value="3"/>
    </Style>

    <Style Selector="Border.deleted-file-badge TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DiffRemovedForegroundBrush}"/>
        <Setter Property="FontSize" Value="11"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <Style Selector="Border.modified-file-badge">
        <Setter Property="Background" Value="{DynamicResource DiffModifiedBackgroundBrush}"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="CornerRadius" Value="3"/>
    </Style>

    <Style Selector="Border.modified-file-badge TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource DiffModifiedForegroundBrush}"/>
        <Setter Property="FontSize" Value="11"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         BUTTON STYLES
         Action and navigation button styling
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Primary action button (Apply) -->
    <Style Selector="Button.diff-apply">
        <Setter Property="Background" Value="{DynamicResource DiffApplyButtonBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{DynamicResource DiffApplyButtonForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="CornerRadius" Value="4"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <Style Selector="Button.diff-apply:pointerover">
        <Setter Property="Background" Value="{DynamicResource DiffApplyButtonHoverBrush}"/>
    </Style>

    <Style Selector="Button.diff-apply:pressed">
        <Setter Property="Opacity" Value="0.9"/>
    </Style>

    <!-- Secondary action button (Cancel, Copy) -->
    <Style Selector="Button.diff-secondary">
        <Setter Property="Background" Value="{DynamicResource DiffCancelButtonBackgroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource DiffCancelButtonBorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="12,8"/>
        <Setter Property="CornerRadius" Value="4"/>
    </Style>

    <Style Selector="Button.diff-secondary:pointerover">
        <Setter Property="Background" Value="{DynamicResource DiffCancelButtonHoverBrush}"/>
    </Style>

    <!-- Navigation button (Previous/Next hunk) -->
    <Style Selector="Button.diff-navigation">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="4"/>
        <Setter Property="CornerRadius" Value="3"/>
        <Setter Property="Width" Value="28"/>
        <Setter Property="Height" Value="28"/>
    </Style>

    <Style Selector="Button.diff-navigation:pointerover">
        <Setter Property="Background" Value="{DynamicResource DiffNavigationButtonHover}"/>
    </Style>

    <Style Selector="Button.diff-navigation:disabled">
        <Setter Property="Opacity" Value="0.4"/>
    </Style>

    <!-- Toolbar toggle button (Inline changes, Word wrap) -->
    <Style Selector="ToggleButton.diff-toolbar">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="6"/>
        <Setter Property="CornerRadius" Value="3"/>
        <Setter Property="Width" Value="32"/>
        <Setter Property="Height" Value="32"/>
    </Style>

    <Style Selector="ToggleButton.diff-toolbar:pointerover">
        <Setter Property="Background" Value="{DynamicResource DiffNavigationButtonHover}"/>
    </Style>

    <Style Selector="ToggleButton.diff-toolbar:checked">
        <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         STATS STYLES
         Change statistics display
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="TextBlock.diff-stats-added">
        <Setter Property="Foreground" Value="{DynamicResource DiffStatsAddedBrush}"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <Style Selector="TextBlock.diff-stats-removed">
        <Setter Property="Foreground" Value="{DynamicResource DiffStatsRemovedBrush}"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <Style Selector="TextBlock.diff-stats-modified">
        <Setter Property="Foreground" Value="{DynamicResource DiffStatsModifiedBrush}"/>
        <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         KEYBOARD HINTS STYLES
         Footer keyboard shortcut display
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="TextBlock.keyboard-hint">
        <Setter Property="FontSize" Value="11"/>
        <Setter Property="Foreground" Value="{DynamicResource TertiaryTextBrush}"/>
    </Style>

    <Style Selector="TextBlock.keyboard-hint Run.key">
        <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
        <Setter Property="FontFamily" Value="{StaticResource MonospaceFontFamily}"/>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         CONTENT STYLES
         Line content and code display
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="TextBlock.diff-content">
        <Setter Property="FontFamily" Value="{StaticResource MonospaceFontFamily}"/>
        <Setter Property="FontSize" Value="13"/>
        <Setter Property="Padding" Value="8,2"/>
        <Setter Property="TextWrapping" Value="NoWrap"/>
    </Style>

    <Style Selector="TextBlock.diff-content.word-wrap">
        <Setter Property="TextWrapping" Value="Wrap"/>
    </Style>

</ResourceDictionary>
```

### Icon Resources

```xml
<!-- src/SeniorIntern.Desktop/Resources/DiffIcons.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ═══════════════════════════════════════════════════════════════
         NAVIGATION ICONS
         Chevrons and directional indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Up chevron for previous hunk navigation -->
    <StreamGeometry x:Key="ChevronUpIcon">
        M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z
    </StreamGeometry>

    <!-- Down chevron for next hunk navigation -->
    <StreamGeometry x:Key="ChevronDownIcon">
        M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z
    </StreamGeometry>

    <!-- Left chevron for collapse/back -->
    <StreamGeometry x:Key="ChevronLeftIcon">
        M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z
    </StreamGeometry>

    <!-- Right chevron for expand/forward -->
    <StreamGeometry x:Key="ChevronRightIcon">
        M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z
    </StreamGeometry>

    <!-- ═══════════════════════════════════════════════════════════════
         FILE ICONS
         Document type indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Generic code file icon -->
    <StreamGeometry x:Key="FileCodeIcon">
        M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z
    </StreamGeometry>

    <!-- New file icon -->
    <StreamGeometry x:Key="FileAddIcon">
        M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z
    </StreamGeometry>

    <!-- Deleted file icon -->
    <StreamGeometry x:Key="FileRemoveIcon">
        M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm8 0l6 6h-6V2zM8 14h8v2H8v-2z
    </StreamGeometry>

    <!-- ═══════════════════════════════════════════════════════════════
         ACTION ICONS
         User action indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Check/apply icon -->
    <StreamGeometry x:Key="CheckIcon">
        M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z
    </StreamGeometry>

    <!-- Close/cancel icon -->
    <StreamGeometry x:Key="CloseIcon">
        M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z
    </StreamGeometry>

    <!-- Copy icon -->
    <StreamGeometry x:Key="CopyIcon">
        M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z
    </StreamGeometry>

    <!-- Refresh/reload icon -->
    <StreamGeometry x:Key="RefreshIcon">
        M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z
    </StreamGeometry>

    <!-- ═══════════════════════════════════════════════════════════════
         FEATURE ICONS
         Toggle and feature indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Highlight/inline changes icon -->
    <StreamGeometry x:Key="HighlightIcon">
        M9 3L7.17 5.83l3.95 3.95-2.48 2.48L4.68 8.3 2 11V3h9zm12 18l1.83-2.83-3.95-3.95 2.48-2.48 3.96 3.96L22 13v8h-9l2.83-1.83z
    </StreamGeometry>

    <!-- Word wrap icon -->
    <StreamGeometry x:Key="WrapTextIcon">
        M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3 3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z
    </StreamGeometry>

    <!-- Link/external icon -->
    <StreamGeometry x:Key="LinkIcon">
        M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z
    </StreamGeometry>

    <!-- Expand all icon -->
    <StreamGeometry x:Key="ExpandAllIcon">
        M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z
    </StreamGeometry>

    <!-- Collapse all icon -->
    <StreamGeometry x:Key="CollapseAllIcon">
        M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z
    </StreamGeometry>

    <!-- ═══════════════════════════════════════════════════════════════
         STATUS ICONS
         Error, warning, and info indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Error/alert icon -->
    <StreamGeometry x:Key="ErrorIcon">
        M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z
    </StreamGeometry>

    <!-- Warning icon -->
    <StreamGeometry x:Key="WarningIcon">
        M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z
    </StreamGeometry>

    <!-- Info icon -->
    <StreamGeometry x:Key="InfoIcon">
        M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z
    </StreamGeometry>

    <!-- Success icon -->
    <StreamGeometry x:Key="SuccessIcon">
        M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z
    </StreamGeometry>

    <!-- ═══════════════════════════════════════════════════════════════
         DIFF-SPECIFIC ICONS
         Change type indicators
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Plus icon for additions -->
    <StreamGeometry x:Key="PlusIcon">
        M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z
    </StreamGeometry>

    <!-- Minus icon for removals -->
    <StreamGeometry x:Key="MinusIcon">
        M19 13H5v-2h14v2z
    </StreamGeometry>

    <!-- Edit/pencil icon for modifications -->
    <StreamGeometry x:Key="EditIcon">
        M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z
    </StreamGeometry>

    <!-- Side-by-side view icon -->
    <StreamGeometry x:Key="SideBySideIcon">
        M3 5v14h18V5H3zm8 12H5V7h6v10zm8 0h-6V7h6v10z
    </StreamGeometry>

    <!-- Unified/inline view icon -->
    <StreamGeometry x:Key="UnifiedViewIcon">
        M3 5v14h18V5H3zm16 12H5V7h14v10z
    </StreamGeometry>

</ResourceDictionary>
```

### Light Theme Colors (Optional)

```xml
<!-- src/SeniorIntern.Desktop/Themes/Light/DiffColors.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ═══════════════════════════════════════════════════════════════
         LIGHT THEME DIFF COLORS
         Inverted color scheme for light theme support
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Panel Colors -->
    <Color x:Key="DiffHeaderBackground">#F5F5F5</Color>
    <Color x:Key="DiffFooterBackground">#F5F5F5</Color>
    <Color x:Key="DiffPanelBackground">#FFFFFF</Color>
    <Color x:Key="DiffSplitterBackground">#E0E0E0</Color>

    <!-- Added Lines - Lighter green tones -->
    <Color x:Key="DiffAddedBackground">#DCFCE7</Color>
    <Color x:Key="DiffAddedForeground">#166534</Color>
    <Color x:Key="DiffAddedGutter">#BBF7D0</Color>

    <!-- Removed Lines - Lighter red tones -->
    <Color x:Key="DiffRemovedBackground">#FEE2E2</Color>
    <Color x:Key="DiffRemovedForeground">#991B1B</Color>
    <Color x:Key="DiffRemovedGutter">#FECACA</Color>

    <!-- Modified Lines - Lighter yellow tones -->
    <Color x:Key="DiffModifiedBackground">#FEF3C7</Color>
    <Color x:Key="DiffModifiedForeground">#92400E</Color>

    <!-- Unchanged -->
    <Color x:Key="DiffUnchangedBackground">Transparent</Color>
    <Color x:Key="DiffUnchangedForeground">#1F2937</Color>

    <!-- Placeholder -->
    <Color x:Key="DiffPlaceholderBackground">#F3F4F6</Color>

    <!-- Inline Changes -->
    <Color x:Key="DiffInlineAddedBackground">#BBF7D0</Color>
    <Color x:Key="DiffInlineRemovedBackground">#FECACA</Color>

    <!-- Hunk Colors -->
    <Color x:Key="DiffHunkHeaderBackground">#F9FAFB</Color>
    <Color x:Key="DiffHunkHeaderForeground">#6B7280</Color>
    <Color x:Key="DiffHunkBorder">#E5E7EB</Color>
    <Color x:Key="DiffHunkCurrentBorder">#3B82F6</Color>
    <Color x:Key="DiffHunkCurrentBackground">#3B82F610</Color>

    <!-- Gutter Colors -->
    <Color x:Key="DiffGutterBackground">#F9FAFB</Color>
    <Color x:Key="DiffGutterForeground">#9CA3AF</Color>
    <Color x:Key="DiffGutterBorder">#E5E7EB</Color>
    <Color x:Key="DiffGutterAddedIndicator">#22C55E</Color>
    <Color x:Key="DiffGutterRemovedIndicator">#EF4444</Color>

    <!-- Button Colors -->
    <Color x:Key="DiffApplyButtonBackground">#22C55E</Color>
    <Color x:Key="DiffApplyButtonHover">#16A34A</Color>
    <Color x:Key="DiffApplyButtonForeground">#FFFFFF</Color>

    <Color x:Key="DiffCancelButtonBackground">#F3F4F6</Color>
    <Color x:Key="DiffCancelButtonHover">#E5E7EB</Color>
    <Color x:Key="DiffCancelButtonBorder">#D1D5DB</Color>

    <!-- Stats Colors -->
    <Color x:Key="DiffStatsAddedColor">#22C55E</Color>
    <Color x:Key="DiffStatsRemovedColor">#EF4444</Color>
    <Color x:Key="DiffStatsModifiedColor">#F59E0B</Color>

</ResourceDictionary>
```

### Animation Definitions

```xml
<!-- src/SeniorIntern.Desktop/Themes/DiffAnimations.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ═══════════════════════════════════════════════════════════════
         HUNK HIGHLIGHT ANIMATION
         Brief highlight when navigating to a new hunk
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Border.diff-hunk.highlight-flash">
        <Style.Animations>
            <Animation Duration="0:0:0.4" FillMode="Forward">
                <KeyFrame Cue="0%">
                    <Setter Property="Background" Value="{DynamicResource DiffHunkCurrentBackgroundBrush}"/>
                    <Setter Property="Opacity" Value="1"/>
                </KeyFrame>
                <KeyFrame Cue="50%">
                    <Setter Property="Background" Value="{DynamicResource DiffHunkCurrentBackgroundBrush}"/>
                    <Setter Property="Opacity" Value="0.7"/>
                </KeyFrame>
                <KeyFrame Cue="100%">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Opacity" Value="1"/>
                </KeyFrame>
            </Animation>
        </Style.Animations>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         BUTTON HOVER TRANSITIONS
         Smooth background color transitions on hover
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Button.diff-apply">
        <Setter Property="Transitions">
            <Transitions>
                <BrushTransition Property="Background" Duration="0:0:0.15"/>
            </Transitions>
        </Setter>
    </Style>

    <Style Selector="Button.diff-secondary">
        <Setter Property="Transitions">
            <Transitions>
                <BrushTransition Property="Background" Duration="0:0:0.15"/>
            </Transitions>
        </Setter>
    </Style>

    <Style Selector="Button.diff-navigation">
        <Setter Property="Transitions">
            <Transitions>
                <BrushTransition Property="Background" Duration="0:0:0.1"/>
            </Transitions>
        </Setter>
    </Style>

    <Style Selector="ToggleButton.diff-toolbar">
        <Setter Property="Transitions">
            <Transitions>
                <BrushTransition Property="Background" Duration="0:0:0.15"/>
            </Transitions>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         OPACITY TRANSITIONS
         Smooth visibility changes
         ═══════════════════════════════════════════════════════════════ -->

    <Style Selector="Border.diff-loading">
        <Setter Property="Transitions">
            <Transitions>
                <DoubleTransition Property="Opacity" Duration="0:0:0.2"/>
            </Transitions>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════
         SCROLL ANIMATION HELPER
         For programmatic smooth scrolling (used in code-behind)
         ═══════════════════════════════════════════════════════════════ -->

    <!-- Note: Smooth scrolling is implemented in code-behind using
         Avalonia's animation system. The scroll-related styles here
         define visual properties, not scroll behavior. -->

</ResourceDictionary>
```

### Integration into Dark.axaml

```xml
<!-- Additions to src/SeniorIntern.Desktop/Themes/Dark.axaml -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Existing theme resources... -->

    <!-- ═══════════════════════════════════════════════════════════════
         DIFF VIEWER RESOURCES
         Merged dictionaries for diff-specific theming
         ═══════════════════════════════════════════════════════════════ -->

    <ResourceDictionary.MergedDictionaries>
        <!-- Existing merges... -->

        <!-- Diff Viewer Theme Resources -->
        <ResourceInclude Source="avares://SeniorIntern.Desktop/Themes/DiffColors.axaml"/>
        <ResourceInclude Source="avares://SeniorIntern.Desktop/Themes/DiffBrushes.axaml"/>
        <ResourceInclude Source="avares://SeniorIntern.Desktop/Themes/DiffStyles.axaml"/>
        <ResourceInclude Source="avares://SeniorIntern.Desktop/Themes/DiffAnimations.axaml"/>
    </ResourceDictionary.MergedDictionaries>

</ResourceDictionary>
```

### Integration into App.axaml

```xml
<!-- Additions to src/SeniorIntern.Desktop/App.axaml -->
<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="SeniorIntern.Desktop.App">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Existing resources... -->

                <!-- Diff Icons -->
                <ResourceInclude Source="avares://SeniorIntern.Desktop/Resources/DiffIcons.axaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- Monospace font for code display -->
            <FontFamily x:Key="MonospaceFontFamily">
                Cascadia Code, Consolas, Monaco, monospace
            </FontFamily>

        </ResourceDictionary>
    </Application.Resources>

</Application>
```

---

## Resource Reference

### Color Resources (25)

| Resource Key | Dark Value | Purpose |
|--------------|------------|---------|
| `DiffHeaderBackground` | `#1F1F1F` | Header/footer background |
| `DiffPanelBackground` | `#1A1A1A` | Main content background |
| `DiffSplitterBackground` | `#333333` | Panel divider |
| `DiffAddedBackground` | `#1E3A21` | Added line background |
| `DiffAddedForeground` | `#4ADE80` | Added line text |
| `DiffAddedGutter` | `#2D5A31` | Added line gutter |
| `DiffRemovedBackground` | `#3A1E1E` | Removed line background |
| `DiffRemovedForeground` | `#F87171` | Removed line text |
| `DiffRemovedGutter` | `#5A2D2D` | Removed line gutter |
| `DiffModifiedBackground` | `#3A3A1E` | Modified line background |
| `DiffModifiedForeground` | `#FBBF24` | Modified line text |
| `DiffUnchangedBackground` | `Transparent` | Unchanged line background |
| `DiffPlaceholderBackground` | `#0A0A0A` | Placeholder line background |
| `DiffInlineAddedBackground` | `#2D5A31` | Inline addition highlight |
| `DiffInlineRemovedBackground` | `#5A2D2D` | Inline removal highlight |
| `DiffHunkHeaderBackground` | `#252526` | Hunk header background |
| `DiffHunkHeaderForeground` | `#858585` | Hunk header text |
| `DiffHunkBorder` | `#333333` | Hunk separator |
| `DiffGutterBackground` | `#1A1A1A` | Gutter background |
| `DiffGutterForeground` | `#6E7681` | Line numbers |
| `DiffGutterBorder` | `#2D2D2D` | Gutter separator |
| `DiffApplyButtonBackground` | `#238636` | Apply button |
| `DiffApplyButtonHover` | `#2EA043` | Apply button hover |
| `DiffCancelButtonBackground` | `#21262D` | Cancel button |
| `DiffStatsAddedColor` | `#4ADE80` | Stats additions |

### Icon Resources (20)

| Resource Key | Purpose |
|--------------|---------|
| `ChevronUpIcon` | Previous hunk navigation |
| `ChevronDownIcon` | Next hunk navigation |
| `ChevronLeftIcon` | Collapse/back |
| `ChevronRightIcon` | Expand/forward |
| `FileCodeIcon` | Generic code file |
| `FileAddIcon` | New file indicator |
| `FileRemoveIcon` | Deleted file indicator |
| `CheckIcon` | Apply/confirm action |
| `CloseIcon` | Cancel/close action |
| `CopyIcon` | Copy to clipboard |
| `RefreshIcon` | Reload/refresh |
| `HighlightIcon` | Toggle inline changes |
| `WrapTextIcon` | Toggle word wrap |
| `LinkIcon` | External link |
| `ErrorIcon` | Error status |
| `WarningIcon` | Warning status |
| `InfoIcon` | Information |
| `PlusIcon` | Addition indicator |
| `MinusIcon` | Removal indicator |
| `EditIcon` | Modification indicator |

### Style Classes (30+)

| Selector | Target Component |
|----------|------------------|
| `Border.diff-header` | Main header bar |
| `Border.diff-panel` | Content panel |
| `Border.diff-footer` | Footer bar |
| `Border.panel-header` | Panel title bar |
| `GridSplitter.diff-splitter` | Panel divider |
| `Grid.diff-line.added` | Added line |
| `Grid.diff-line.removed` | Removed line |
| `Grid.diff-line.modified` | Modified line |
| `Grid.diff-line.unchanged` | Context line |
| `Grid.diff-line.placeholder` | Alignment placeholder |
| `Border.line-gutter` | Line number column |
| `Border.line-gutter.added` | Added line gutter |
| `Border.line-gutter.removed` | Removed line gutter |
| `TextBlock.inline-added` | Inline addition |
| `TextBlock.inline-removed` | Inline removal |
| `Border.diff-hunk` | Hunk container |
| `Border.diff-hunk.current` | Current hunk |
| `Border.new-file-badge` | New file badge |
| `Border.deleted-file-badge` | Deleted file badge |
| `Button.diff-apply` | Apply button |
| `Button.diff-secondary` | Secondary button |
| `Button.diff-navigation` | Navigation button |
| `ToggleButton.diff-toolbar` | Toolbar toggle |
| `TextBlock.diff-stats-added` | Added stats |
| `TextBlock.diff-stats-removed` | Removed stats |
| `TextBlock.diff-content` | Line content |

---

## Files to Create

| File | Purpose | Lines (approx) |
|------|---------|----------------|
| `Themes/DiffColors.axaml` | Color definitions | 100 |
| `Themes/DiffBrushes.axaml` | SolidColorBrush resources | 120 |
| `Themes/DiffStyles.axaml` | Style definitions | 350 |
| `Themes/DiffAnimations.axaml` | Animation definitions | 80 |
| `Resources/DiffIcons.axaml` | StreamGeometry icons | 150 |
| `Themes/Light/DiffColors.axaml` | Light theme colors (optional) | 60 |

## Files to Modify

| File | Changes |
|------|---------|
| `Themes/Dark.axaml` | Merge diff resource dictionaries |
| `App.axaml` | Add icon resources, monospace font |

---

## Testing Strategy

### Visual Testing

```csharp
// tests/SeniorIntern.Desktop.Tests/Themes/DiffThemeTests.cs
namespace SeniorIntern.Desktop.Tests.Themes;

using Avalonia;
using Avalonia.Controls;
using Avalonia.Headless.XUnit;
using Avalonia.Media;
using Xunit;

public class DiffThemeTests
{
    [AvaloniaFact]
    public void DiffAddedBackground_IsCorrectColor()
    {
        var app = Application.Current!;
        var color = app.FindResource("DiffAddedBackground") as Color?;

        Assert.NotNull(color);
        Assert.Equal(Color.Parse("#1E3A21"), color.Value);
    }

    [AvaloniaFact]
    public void DiffAddedBackgroundBrush_IsSolidColorBrush()
    {
        var app = Application.Current!;
        var brush = app.FindResource("DiffAddedBackgroundBrush") as SolidColorBrush;

        Assert.NotNull(brush);
        Assert.Equal(Color.Parse("#1E3A21"), brush.Color);
    }

    [AvaloniaFact]
    public void ChevronUpIcon_IsStreamGeometry()
    {
        var app = Application.Current!;
        var geometry = app.FindResource("ChevronUpIcon") as StreamGeometry;

        Assert.NotNull(geometry);
    }

    [AvaloniaFact]
    public void DiffHeaderStyle_AppliesCorrectBackground()
    {
        var border = new Border();
        border.Classes.Add("diff-header");

        // Apply styles from application
        border.ApplyTemplate();

        Assert.Equal(
            Application.Current!.FindResource("DiffHeaderBackgroundBrush"),
            border.Background);
    }

    [AvaloniaFact]
    public void AddedLineStyle_AppliesGreenBackground()
    {
        var grid = new Grid();
        grid.Classes.Add("diff-line");
        grid.Classes.Add("added");

        grid.ApplyTemplate();

        Assert.Equal(
            Application.Current!.FindResource("DiffAddedBackgroundBrush"),
            grid.Background);
    }

    [AvaloniaFact]
    public void RemovedLineStyle_AppliesRedBackground()
    {
        var grid = new Grid();
        grid.Classes.Add("diff-line");
        grid.Classes.Add("removed");

        grid.ApplyTemplate();

        Assert.Equal(
            Application.Current!.FindResource("DiffRemovedBackgroundBrush"),
            grid.Background);
    }

    [AvaloniaFact]
    public void InlineRemovedStyle_HasStrikethrough()
    {
        var textBlock = new TextBlock();
        textBlock.Classes.Add("inline-removed");

        textBlock.ApplyTemplate();

        Assert.Contains(TextDecorations.Strikethrough, textBlock.TextDecorations);
    }
}
```

### Resource Availability Tests

```csharp
// tests/SeniorIntern.Desktop.Tests/Themes/DiffResourceTests.cs
namespace SeniorIntern.Desktop.Tests.Themes;

using Avalonia;
using Avalonia.Headless.XUnit;
using Xunit;

public class DiffResourceTests
{
    private static readonly string[] RequiredColors = new[]
    {
        "DiffHeaderBackground",
        "DiffPanelBackground",
        "DiffAddedBackground",
        "DiffAddedForeground",
        "DiffRemovedBackground",
        "DiffRemovedForeground",
        "DiffModifiedBackground",
        "DiffUnchangedBackground",
        "DiffPlaceholderBackground",
        "DiffInlineAddedBackground",
        "DiffInlineRemovedBackground",
        "DiffHunkHeaderBackground",
        "DiffGutterBackground",
        "DiffGutterForeground"
    };

    private static readonly string[] RequiredBrushes = new[]
    {
        "DiffHeaderBackgroundBrush",
        "DiffPanelBackgroundBrush",
        "DiffAddedBackgroundBrush",
        "DiffAddedForegroundBrush",
        "DiffRemovedBackgroundBrush",
        "DiffRemovedForegroundBrush",
        "DiffGutterBackgroundBrush",
        "DiffGutterForegroundBrush"
    };

    private static readonly string[] RequiredIcons = new[]
    {
        "ChevronUpIcon",
        "ChevronDownIcon",
        "FileCodeIcon",
        "CheckIcon",
        "CloseIcon",
        "CopyIcon",
        "HighlightIcon",
        "WrapTextIcon"
    };

    [AvaloniaTheory]
    [MemberData(nameof(GetRequiredColors))]
    public void RequiredColor_Exists(string colorKey)
    {
        var app = Application.Current!;
        var resource = app.TryFindResource(colorKey, out var color);

        Assert.True(resource, $"Color resource '{colorKey}' not found");
        Assert.NotNull(color);
    }

    [AvaloniaTheory]
    [MemberData(nameof(GetRequiredBrushes))]
    public void RequiredBrush_Exists(string brushKey)
    {
        var app = Application.Current!;
        var resource = app.TryFindResource(brushKey, out var brush);

        Assert.True(resource, $"Brush resource '{brushKey}' not found");
        Assert.NotNull(brush);
    }

    [AvaloniaTheory]
    [MemberData(nameof(GetRequiredIcons))]
    public void RequiredIcon_Exists(string iconKey)
    {
        var app = Application.Current!;
        var resource = app.TryFindResource(iconKey, out var icon);

        Assert.True(resource, $"Icon resource '{iconKey}' not found");
        Assert.NotNull(icon);
    }

    public static IEnumerable<object[]> GetRequiredColors() =>
        RequiredColors.Select(c => new object[] { c });

    public static IEnumerable<object[]> GetRequiredBrushes() =>
        RequiredBrushes.Select(b => new object[] { b });

    public static IEnumerable<object[]> GetRequiredIcons() =>
        RequiredIcons.Select(i => new object[] { i });
}
```

### Contrast and Accessibility Tests

```csharp
// tests/SeniorIntern.Desktop.Tests/Themes/DiffAccessibilityTests.cs
namespace SeniorIntern.Desktop.Tests.Themes;

using Avalonia;
using Avalonia.Headless.XUnit;
using Avalonia.Media;
using Xunit;

public class DiffAccessibilityTests
{
    [AvaloniaFact]
    public void AddedForeground_HasSufficientContrast_WithAddedBackground()
    {
        var app = Application.Current!;
        var foreground = (Color)app.FindResource("DiffAddedForeground")!;
        var background = (Color)app.FindResource("DiffAddedBackground")!;

        var ratio = CalculateContrastRatio(foreground, background);

        // WCAG AA requires 4.5:1 for normal text
        Assert.True(ratio >= 4.5, $"Contrast ratio {ratio:F2} is below WCAG AA threshold of 4.5:1");
    }

    [AvaloniaFact]
    public void RemovedForeground_HasSufficientContrast_WithRemovedBackground()
    {
        var app = Application.Current!;
        var foreground = (Color)app.FindResource("DiffRemovedForeground")!;
        var background = (Color)app.FindResource("DiffRemovedBackground")!;

        var ratio = CalculateContrastRatio(foreground, background);

        Assert.True(ratio >= 4.5, $"Contrast ratio {ratio:F2} is below WCAG AA threshold of 4.5:1");
    }

    [AvaloniaFact]
    public void GutterForeground_HasSufficientContrast_WithGutterBackground()
    {
        var app = Application.Current!;
        var foreground = (Color)app.FindResource("DiffGutterForeground")!;
        var background = (Color)app.FindResource("DiffGutterBackground")!;

        var ratio = CalculateContrastRatio(foreground, background);

        // Gutter numbers can have lower contrast (3:1 for large text)
        Assert.True(ratio >= 3.0, $"Contrast ratio {ratio:F2} is below minimum threshold of 3:1");
    }

    private static double CalculateContrastRatio(Color foreground, Color background)
    {
        var l1 = GetRelativeLuminance(foreground);
        var l2 = GetRelativeLuminance(background);

        var lighter = Math.Max(l1, l2);
        var darker = Math.Min(l1, l2);

        return (lighter + 0.05) / (darker + 0.05);
    }

    private static double GetRelativeLuminance(Color color)
    {
        var r = GetLuminanceComponent(color.R / 255.0);
        var g = GetLuminanceComponent(color.G / 255.0);
        var b = GetLuminanceComponent(color.B / 255.0);

        return 0.2126 * r + 0.7152 * g + 0.0722 * b;
    }

    private static double GetLuminanceComponent(double value)
    {
        return value <= 0.03928
            ? value / 12.92
            : Math.Pow((value + 0.055) / 1.055, 2.4);
    }
}
```

---

## Acceptance Criteria

- [ ] All diff colors are defined and match the design specification
- [ ] Added lines are visually distinct with green background/foreground
- [ ] Removed lines are visually distinct with red background/foreground
- [ ] Modified lines are visually distinct with yellow/amber background
- [ ] Unchanged/context lines have no special styling
- [ ] Placeholder lines are subtly different (dimmed/opacity)
- [ ] Inline changes within lines are highlighted distinctly
- [ ] Inline removed text has strikethrough decoration
- [ ] Gutter/line numbers are styled with appropriate contrast
- [ ] Current hunk indicator is visually prominent
- [ ] All icons render correctly at various sizes
- [ ] Button hover states have smooth transitions
- [ ] Navigation buttons are properly styled and show disabled state
- [ ] Stats display uses appropriate colors for +/-/~
- [ ] Dark theme is cohesive with existing application theme
- [ ] Color contrast meets WCAG AA guidelines (4.5:1)
- [ ] Monospace font is applied to code content
- [ ] All resource dictionaries load without errors

---

## Design Decisions

### 1. Separate Resource Files vs. Single Theme File

**Decision:** Create separate resource files (Colors, Brushes, Styles, Icons) that are merged into the main theme.

**Rationale:**
- Better organization and maintainability
- Easier to locate specific resources
- Enables selective loading if needed
- Supports future light theme implementation

### 2. Color-First Approach

**Decision:** Define base Colors first, then reference them in SolidColorBrush resources.

**Rationale:**
- Single source of truth for color values
- Enables programmatic color manipulation if needed
- Clearer separation between values and resources
- Easier to create theme variants

### 3. CSS-Like Class Selectors

**Decision:** Use class-based selectors (e.g., `Grid.diff-line.added`) instead of type selectors or named elements.

**Rationale:**
- More flexible application of styles
- Supports multiple classes for combined effects
- Familiar pattern for web developers
- Easier to debug with DevTools

### 4. DynamicResource for Theme Support

**Decision:** Use `{DynamicResource}` in styles instead of `{StaticResource}`.

**Rationale:**
- Enables runtime theme switching
- Resources update automatically when theme changes
- Required for proper light/dark theme support
- Small performance cost is acceptable

### 5. StreamGeometry for Icons

**Decision:** Use StreamGeometry with path data instead of embedded images.

**Rationale:**
- Resolution-independent (vector)
- Smaller file size
- Can be styled with foreground color
- Consistent with Avalonia patterns

### 6. Subtle Color Palette

**Decision:** Use muted, low-saturation colors for backgrounds with brighter foregrounds.

**Rationale:**
- Reduces eye strain during extended use
- Provides sufficient contrast without being harsh
- Matches modern IDE aesthetics (VSCode, JetBrains)
- Professional appearance

### 7. Animation Restraint

**Decision:** Limit animations to subtle transitions (hover, navigation highlight).

**Rationale:**
- Animations can be distracting during code review
- Respects user preferences for reduced motion
- Better performance
- Focus on content over effects

---

## Dependencies

### From Previous v0.4.2 Sub-parts

| Sub-part | Dependency |
|----------|------------|
| v0.4.2e | `DiffViewerPanel` structure for applying styles |
| v0.4.2f | `DiffHunkControl`, `DiffLineControl` class names |
| v0.4.2g | Navigation button styling |

### External Dependencies

| Dependency | Purpose |
|------------|---------|
| Avalonia Themes | Base theme resources to extend |
| System Fonts | Cascadia Code / Consolas fallback |

---

## Implementation Notes

### Resource Discovery

All resources use the `avares://` URI scheme for embedded resources:

```xml
<ResourceInclude Source="avares://SeniorIntern.Desktop/Themes/DiffColors.axaml"/>
```

### Theme Switching Support

For future light theme support, create parallel resource files in a `Light/` subdirectory and conditionally merge based on theme selection.

### Performance Considerations

1. **Brush Sharing:** SolidColorBrush resources are shared across the application
2. **Style Caching:** Avalonia caches compiled styles
3. **Animation:** Use CSS transitions, not per-frame animations
4. **Icons:** StreamGeometry is parsed once and reused

### Color Accessibility

The chosen color palette aims for WCAG AA compliance:
- Added foreground (#4ADE80) on background (#1E3A21): ~7:1 ratio
- Removed foreground (#F87171) on background (#3A1E1E): ~6:1 ratio
- Gutter foreground (#6E7681) on background (#1A1A1A): ~4:1 ratio

---

## Future Considerations

| Item | Target Version | Rationale |
|------|----------------|-----------|
| Light theme complete implementation | v0.5.0+ | User preference support |
| High contrast theme | v0.6.0+ | Accessibility |
| Custom theme editor | v0.7.0+ | User customization |
| Syntax highlighting integration | v0.5.0+ | Language-aware diff |
