# Design Specification: AIntern v0.6.5d "Agent Settings Panel XAML"

## Overview

**Version**: v0.6.5d
**Parent**: v0.6.5 Agent Loop & Polish
**Focus**: Comprehensive settings UI for configuring agent behavior

### Purpose

Create the agent settings panel that:
1. Configures agent policy mode (Disabled, AlwaysAsk, AskForRisky, AutoApprove)
2. Sets the approval risk threshold with visual feedback
3. Manages per-tool permissions with search and override options
4. Configures execution limits (iterations, timeout, rate limits)
5. Controls audit logging settings
6. Manages protected paths list

### Dependencies

**From v0.6.4 (Safety & Approval)**:
- `PolicyMode`, `RiskLevel` enums
- `PermissionPolicy` model
- `ToolPermissionOverride`

**From v0.6.1 (Tool Framework)**:
- `IToolRegistry` for tool listing

**From Existing UI Layer**:
- Avalonia UserControl infrastructure
- Theme resources and converters

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    v0.6.5d Agent Settings Panel Architecture                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Panel Layout (ScrollViewer with StackPanel):                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     AgentSettingsPanel (MaxWidth: 600)                   â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 1: Agent Mode                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â—‹ Disabled - No tool execution                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â—‹ Always Ask - Approve every tool                                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— Ask for Risky [Recommended] - Smart approval                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â—‹ Auto-Approve [Dangerous] - No confirmations                    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 2: Approval Threshold (visible when AskForRisky)          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  (Slider: Safe - Low - Medium - High - Critical)                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  [â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â—‹] [Medium]                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— Safe - Read operations                                         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— Low - Simple modifications                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— Medium - File writes [threshold]                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— High - System changes                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â— Critical - Dangerous operations                                 â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 3: Tool Permissions                                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  [ğŸ” Search tools...                           ] [Reset All]      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â˜‘ ReadFile [Safe] Read file contents           [Default â–¼]  â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â˜‘ WriteFile [Medium] Write to file             [Default â–¼]  â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â˜‘ RunCommand [High] Execute terminal command   [AlwaysAskâ–¼] â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â˜ DeleteFile [High] Delete file                [Block    â–¼] â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 4: Execution Limits                                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Max iterations     [â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹] 15                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Tool timeout (sec) [â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€] 60                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Rate limit (/min)  [â—â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] 30                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Rate limit (/hour) [â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹â”€â”€â”€â”€â”€] 200                      â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 5: Audit & Logging                                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â˜‘ Log all tool executions                                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    â˜‘ Log tool parameters                                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    â˜‘ Log tool results                                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  [View Audit Log] [Export Log] [Clear Log]                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  245 entries | 12.3 MB                                            â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Section 6: Protected Paths                    [Add Path]         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ“ ~/.ssh/                                            [âœ•]   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ“ ~/.aws/                                            [âœ•]   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ“ ~/.config/secrets/                                 [âœ•]   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚                                           [Save Settings]                â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Section Details

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Settings Section Specifications                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Section 1: Agent Mode                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  RadioButton Group: "AgentMode"                                         â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Disabled                                                           â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Description: "No tool execution - chat only mode"              â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Always Ask                                                         â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Description: "Require approval for every tool execution"       â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Ask for Risky [Recommended badge - AccentBrush]                    â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Description: "Auto-approve safe operations, ask for risky"     â”‚â”‚
â”‚  â”‚  â””â”€â”€ Auto-Approve [Dangerous badge - ErrorBrush]                        â”‚â”‚
â”‚  â”‚      â””â”€â”€ Description: "No confirmations - use with caution!" (red text) â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  Section 2: Approval Threshold (visible: PolicyMode == AskForRisky)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Slider: Minimum=0, Maximum=4, TickFrequency=1, SnapToTick=True         â”‚â”‚
â”‚  â”‚  Values map to: 0=Safe, 1=Low, 2=Medium, 3=High, 4=Critical             â”‚â”‚
â”‚  â”‚  Current value shown in colored badge (RiskThresholdBrush)              â”‚â”‚
â”‚  â”‚  Risk Level Legend: Color dot | Name | Description                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  Section 3: Tool Permissions                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Header: "Tool Permissions" + [Reset All] link button                   â”‚â”‚
â”‚  â”‚  Search: TextBox with "Search tools..." watermark                       â”‚â”‚
â”‚  â”‚  List: MaxHeight=300, SelectionMode=Single                              â”‚â”‚
â”‚  â”‚  Item Template:                                                          â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ CheckBox (IsEnabled)                                               â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Name (SemiBold) + RiskLevel badge                                  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Description (muted, ellipsis, 1 line)                              â”‚â”‚
â”‚  â”‚  â””â”€â”€ ComboBox (Override: Default/AlwaysAllow/AlwaysAsk/AlwaysDeny)      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  Section 4: Execution Limits                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Grid Layout: [Label 200px] [Slider *] [Value 50px]                     â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Max iterations: Min=1, Max=50                                      â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Tool timeout (sec): Min=10, Max=300                                â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Rate limit (calls/min): Min=5, Max=60                              â”‚â”‚
â”‚  â”‚  â””â”€â”€ Rate limit (calls/hour): Min=50, Max=500                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  Section 5: Audit & Logging                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  CheckBox: "Log all tool executions" (master toggle)                    â”‚â”‚
â”‚  â”‚  CheckBox: "Log tool parameters" (enabled when master checked)          â”‚â”‚
â”‚  â”‚  CheckBox: "Log tool results" (enabled when master checked)             â”‚â”‚
â”‚  â”‚  Buttons: [View Audit Log] [Export Log] [Clear Log (danger)]            â”‚â”‚
â”‚  â”‚  Stats text: "{count} entries | {size}" (muted)                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  Section 6: Protected Paths                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Header: "Protected Paths" + [Add Path] link button                     â”‚â”‚
â”‚  â”‚  List: MaxHeight=200, SelectionMode=Single                              â”‚â”‚
â”‚  â”‚  Item Template: FolderIcon | Path (monospace) | [Delete] icon button    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Specifications

### 1. AgentSettingsPanel.axaml

**Location**: `src/SeniorIntern.Desktop/Views/AgentSettingsPanel.axaml`

```xml
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:SeniorIntern.Desktop.ViewModels"
             xmlns:models="using:SeniorIntern.Desktop.Models"
             xmlns:converters="using:SeniorIntern.Desktop.Converters"
             mc:Ignorable="d" d:DesignWidth="650" d:DesignHeight="1200"
             x:Class="SeniorIntern.Desktop.Views.AgentSettingsPanel"
             x:DataType="vm:AgentSettingsViewModel">

    <UserControl.Resources>
        <converters:EnumToBoolConverter x:Key="EnumConverter" />
        <converters:RiskLevelToTextConverter x:Key="RiskLevelTextConverter" />
        <converters:RiskLevelToBrushConverter x:Key="RiskLevelBrushConverter" />
    </UserControl.Resources>

    <UserControl.Styles>
        <!-- Settings Section Border -->
        <Style Selector="Border.settings-section">
            <Setter Property="Background" Value="{DynamicResource SurfaceBackground}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>

        <!-- Search Box -->
        <Style Selector="TextBox.search-box">
            <Setter Property="Padding" Value="8" />
        </Style>

        <!-- Link Button -->
        <Style Selector="Button.link-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="{DynamicResource AccentBrush}" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Padding" Value="0" />
        </Style>
        <Style Selector="Button.link-button:pointerover">
            <Setter Property="Foreground" Value="{DynamicResource AccentBrushHover}" />
        </Style>

        <!-- Icon Button -->
        <Style Selector="Button.icon-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="4" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.icon-button.danger">
            <Setter Property="Foreground" Value="{DynamicResource ErrorBrush}" />
        </Style>

        <!-- Danger Button -->
        <Style Selector="Button.danger">
            <Setter Property="Background" Value="{DynamicResource ErrorBrush}" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <!-- Accent Button -->
        <Style Selector="Button.accent">
            <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
            <Setter Property="Foreground" Value="White" />
        </Style>

        <!-- Secondary Button -->
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="{DynamicResource SurfaceBackgroundAlt}" />
        </Style>

        <!-- Radio Button Label Style -->
        <Style Selector="RadioButton > StackPanel > TextBlock:nth-child(1)">
            <Setter Property="Margin" Value="0,0,0,2" />
        </Style>
    </UserControl.Styles>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Spacing="24" Padding="16" MaxWidth="600">

            <!-- ============================================== -->
            <!-- Header                                         -->
            <!-- ============================================== -->
            <TextBlock Text="Agent Settings"
                       FontSize="20"
                       FontWeight="SemiBold" />

            <!-- ============================================== -->
            <!-- Section 1: Agent Mode                          -->
            <!-- ============================================== -->
            <Border Classes="settings-section" Padding="16" CornerRadius="8">
                <StackPanel Spacing="16">
                    <TextBlock Text="Agent Mode"
                               FontWeight="SemiBold"
                               FontSize="14" />

                    <TextBlock Text="Control how the AI agent executes tools and interacts with your system."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <StackPanel Spacing="12">
                        <!-- Disabled -->
                        <RadioButton GroupName="AgentMode"
                                     IsChecked="{Binding PolicyMode, Converter={StaticResource EnumConverter}, ConverterParameter=Disabled}">
                            <StackPanel>
                                <TextBlock Text="Disabled" FontWeight="SemiBold" />
                                <TextBlock Text="No tool execution - chat only mode"
                                           Foreground="{DynamicResource TextMuted}"
                                           FontSize="11" />
                            </StackPanel>
                        </RadioButton>

                        <!-- Always Ask -->
                        <RadioButton GroupName="AgentMode"
                                     IsChecked="{Binding PolicyMode, Converter={StaticResource EnumConverter}, ConverterParameter=AlwaysAsk}">
                            <StackPanel>
                                <TextBlock Text="Always Ask" FontWeight="SemiBold" />
                                <TextBlock Text="Require approval for every tool execution"
                                           Foreground="{DynamicResource TextMuted}"
                                           FontSize="11" />
                            </StackPanel>
                        </RadioButton>

                        <!-- Ask for Risky (Recommended) -->
                        <RadioButton GroupName="AgentMode"
                                     IsChecked="{Binding PolicyMode, Converter={StaticResource EnumConverter}, ConverterParameter=AskForRisky}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="Ask for Risky" FontWeight="SemiBold" />
                                    <Border Background="{DynamicResource AccentBrush}"
                                            CornerRadius="4"
                                            Padding="6,2">
                                        <TextBlock Text="Recommended"
                                                   FontSize="10"
                                                   Foreground="White" />
                                    </Border>
                                </StackPanel>
                                <TextBlock Text="Auto-approve safe operations, ask for risky ones"
                                           Foreground="{DynamicResource TextMuted}"
                                           FontSize="11" />
                            </StackPanel>
                        </RadioButton>

                        <!-- Auto-Approve (Dangerous) -->
                        <RadioButton GroupName="AgentMode"
                                     IsChecked="{Binding PolicyMode, Converter={StaticResource EnumConverter}, ConverterParameter=AutoApprove}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="Auto-Approve" FontWeight="SemiBold" />
                                    <Border Background="{DynamicResource ErrorBrush}"
                                            CornerRadius="4"
                                            Padding="6,2">
                                        <TextBlock Text="Dangerous"
                                                   FontSize="10"
                                                   Foreground="White" />
                                    </Border>
                                </StackPanel>
                                <TextBlock Text="No confirmations - use with caution!"
                                           Foreground="{DynamicResource ErrorBrush}"
                                           FontSize="11" />
                            </StackPanel>
                        </RadioButton>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Section 2: Approval Threshold                  -->
            <!-- ============================================== -->
            <Border Classes="settings-section"
                    Padding="16"
                    CornerRadius="8"
                    IsVisible="{Binding IsRiskThresholdVisible}">
                <StackPanel Spacing="16">
                    <TextBlock Text="Approval Threshold"
                               FontWeight="SemiBold"
                               FontSize="14" />

                    <TextBlock Text="Tools with this risk level or higher will require your approval."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <!-- Slider with Value Badge -->
                    <Grid ColumnDefinitions="*, 100">
                        <Slider Minimum="0" Maximum="4"
                                Value="{Binding RiskThresholdValue}"
                                TickFrequency="1"
                                IsSnapToTickEnabled="True"
                                TickPlacement="BottomRight" />

                        <Border Grid.Column="1"
                                Background="{Binding RiskThresholdBrush}"
                                CornerRadius="4"
                                Padding="12,6"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">
                            <TextBlock Text="{Binding RiskThresholdText}"
                                       Foreground="White"
                                       FontWeight="SemiBold"
                                       FontSize="12" />
                        </Border>
                    </Grid>

                    <!-- Risk Level Legend -->
                    <ItemsControl ItemsSource="{Binding RiskLevelDescriptions}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Spacing="6" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type models:RiskLevelDescription}">
                                <Grid ColumnDefinitions="Auto, 80, *">
                                    <Ellipse Width="10" Height="10"
                                             Fill="{Binding Brush}"
                                             Margin="0,0,8,0"
                                             VerticalAlignment="Center" />
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding Name}"
                                               FontWeight="SemiBold"
                                               FontSize="11"
                                               VerticalAlignment="Center" />
                                    <TextBlock Grid.Column="2"
                                               Text="{Binding Description}"
                                               Foreground="{DynamicResource TextMuted}"
                                               FontSize="11"
                                               VerticalAlignment="Center" />
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Section 3: Tool Permissions                    -->
            <!-- ============================================== -->
            <Border Classes="settings-section" Padding="16" CornerRadius="8">
                <StackPanel Spacing="16">
                    <!-- Header with Reset -->
                    <Grid ColumnDefinitions="*, Auto">
                        <TextBlock Text="Tool Permissions"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   VerticalAlignment="Center" />
                        <Button Grid.Column="1"
                                Content="Reset All"
                                Command="{Binding ResetToolPermissionsCommand}"
                                Classes="link-button"
                                FontSize="12" />
                    </Grid>

                    <TextBlock Text="Enable or disable specific tools, and override their approval behavior."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <!-- Search Box -->
                    <TextBox Watermark="Search tools..."
                             Text="{Binding ToolSearchText}"
                             Classes="search-box" />

                    <!-- Tool List -->
                    <ListBox ItemsSource="{Binding FilteredTools}"
                             MaxHeight="300"
                             SelectionMode="Single">
                        <ListBox.ItemTemplate>
                            <DataTemplate DataType="{x:Type models:ToolPermissionItem}">
                                <Grid ColumnDefinitions="Auto, *, Auto" Margin="4">
                                    <!-- Enable Checkbox -->
                                    <CheckBox IsChecked="{Binding IsEnabled}"
                                              ToolTip.Tip="Enable or disable this tool"
                                              VerticalAlignment="Center" />

                                    <!-- Tool Info -->
                                    <StackPanel Grid.Column="1" Margin="8,0" VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                            <Border Background="{Binding RiskLevelBrush}"
                                                    CornerRadius="4"
                                                    Padding="6,2">
                                                <TextBlock Text="{Binding RiskLevelText}"
                                                           FontSize="10"
                                                           Foreground="White" />
                                            </Border>
                                        </StackPanel>
                                        <TextBlock Text="{Binding Description}"
                                                   FontSize="11"
                                                   Foreground="{DynamicResource TextMuted}"
                                                   TextTrimming="CharacterEllipsis"
                                                   MaxLines="1" />
                                    </StackPanel>

                                    <!-- Override ComboBox -->
                                    <ComboBox Grid.Column="2"
                                              ItemsSource="{Binding OverrideOptions}"
                                              SelectedItem="{Binding OverrideAction}"
                                              Width="130"
                                              VerticalAlignment="Center" />
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Section 4: Execution Limits                    -->
            <!-- ============================================== -->
            <Border Classes="settings-section" Padding="16" CornerRadius="8">
                <StackPanel Spacing="16">
                    <TextBlock Text="Execution Limits"
                               FontWeight="SemiBold"
                               FontSize="14" />

                    <TextBlock Text="Set limits on agent execution to prevent runaway operations."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <!-- Max Iterations -->
                    <Grid ColumnDefinitions="200, *, 50">
                        <TextBlock Text="Max iterations per request"
                                   VerticalAlignment="Center" />
                        <Slider Grid.Column="1"
                                Minimum="1" Maximum="50"
                                Value="{Binding MaxIterations}"
                                TickFrequency="5"
                                IsSnapToTickEnabled="False" />
                        <TextBlock Grid.Column="2"
                                   Text="{Binding MaxIterations}"
                                   TextAlignment="Right"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold" />
                    </Grid>

                    <!-- Tool Timeout -->
                    <Grid ColumnDefinitions="200, *, 50">
                        <TextBlock Text="Tool execution timeout (sec)"
                                   VerticalAlignment="Center" />
                        <Slider Grid.Column="1"
                                Minimum="10" Maximum="300"
                                Value="{Binding ToolTimeoutSeconds}"
                                TickFrequency="30"
                                IsSnapToTickEnabled="False" />
                        <TextBlock Grid.Column="2"
                                   Text="{Binding ToolTimeoutSeconds}"
                                   TextAlignment="Right"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold" />
                    </Grid>

                    <!-- Rate Limit Per Minute -->
                    <Grid ColumnDefinitions="200, *, 50">
                        <TextBlock Text="Rate limit (calls/min)"
                                   VerticalAlignment="Center" />
                        <Slider Grid.Column="1"
                                Minimum="5" Maximum="60"
                                Value="{Binding RateLimitPerMinute}"
                                TickFrequency="5"
                                IsSnapToTickEnabled="False" />
                        <TextBlock Grid.Column="2"
                                   Text="{Binding RateLimitPerMinute}"
                                   TextAlignment="Right"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold" />
                    </Grid>

                    <!-- Rate Limit Per Hour -->
                    <Grid ColumnDefinitions="200, *, 50">
                        <TextBlock Text="Rate limit (calls/hour)"
                                   VerticalAlignment="Center" />
                        <Slider Grid.Column="1"
                                Minimum="50" Maximum="500"
                                Value="{Binding RateLimitPerHour}"
                                TickFrequency="50"
                                IsSnapToTickEnabled="False" />
                        <TextBlock Grid.Column="2"
                                   Text="{Binding RateLimitPerHour}"
                                   TextAlignment="Right"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Section 5: Audit & Logging                     -->
            <!-- ============================================== -->
            <Border Classes="settings-section" Padding="16" CornerRadius="8">
                <StackPanel Spacing="16">
                    <TextBlock Text="Audit &amp; Logging"
                               FontWeight="SemiBold"
                               FontSize="14" />

                    <TextBlock Text="Track all tool executions for security and debugging."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <!-- Logging Checkboxes -->
                    <CheckBox Content="Log all tool executions"
                              IsChecked="{Binding AuditAllExecutions}" />

                    <CheckBox Content="Log tool parameters (may contain sensitive data)"
                              IsChecked="{Binding AuditIncludeParameters}"
                              IsEnabled="{Binding AuditAllExecutions}"
                              Margin="24,0,0,0" />

                    <CheckBox Content="Log tool results"
                              IsChecked="{Binding AuditIncludeResults}"
                              IsEnabled="{Binding AuditAllExecutions}"
                              Margin="24,0,0,0" />

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="View Audit Log"
                                Command="{Binding ViewAuditLogCommand}" />
                        <Button Content="Export Log"
                                Command="{Binding ExportAuditLogCommand}"
                                Classes="secondary" />
                        <Button Content="Clear Log"
                                Command="{Binding ClearAuditLogCommand}"
                                Classes="danger" />
                    </StackPanel>

                    <!-- Stats -->
                    <TextBlock Text="{Binding AuditLogStats}"
                               Foreground="{DynamicResource TextMuted}"
                               FontSize="11" />
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Section 6: Protected Paths                     -->
            <!-- ============================================== -->
            <Border Classes="settings-section" Padding="16" CornerRadius="8">
                <StackPanel Spacing="16">
                    <!-- Header with Add -->
                    <Grid ColumnDefinitions="*, Auto">
                        <TextBlock Text="Protected Paths"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   VerticalAlignment="Center" />
                        <Button Grid.Column="1"
                                Content="Add Path"
                                Command="{Binding AddProtectedPathCommand}"
                                Classes="link-button"
                                FontSize="12" />
                    </Grid>

                    <TextBlock Text="Paths that tools cannot access or modify."
                               Foreground="{DynamicResource TextMuted}"
                               TextWrapping="Wrap"
                               FontSize="12" />

                    <!-- Path List -->
                    <ListBox ItemsSource="{Binding ProtectedPaths}"
                             MaxHeight="200"
                             SelectionMode="Single">
                        <ListBox.ItemTemplate>
                            <DataTemplate DataType="{x:Type models:ProtectedPathItem}">
                                <Grid ColumnDefinitions="Auto, *, Auto">
                                    <PathIcon Data="{StaticResource FolderGeometry}"
                                              Width="16" Height="16"
                                              Margin="0,0,8,0"
                                              Foreground="{DynamicResource TextMuted}" />
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding Path}"
                                               FontFamily="{StaticResource MonoFont}"
                                               VerticalAlignment="Center" />
                                    <Button Grid.Column="2"
                                            Command="{Binding $parent[ListBox].((vm:AgentSettingsViewModel)DataContext).RemoveProtectedPathCommand}"
                                            CommandParameter="{Binding}"
                                            Classes="icon-button danger"
                                            ToolTip.Tip="Remove">
                                        <PathIcon Data="{StaticResource DeleteGeometry}"
                                                  Width="14" Height="14" />
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <!-- ============================================== -->
            <!-- Save Button                                    -->
            <!-- ============================================== -->
            <Button Content="Save Settings"
                    Command="{Binding SaveSettingsCommand}"
                    HorizontalAlignment="Right"
                    Classes="accent"
                    Padding="24,8" />

        </StackPanel>
    </ScrollViewer>
</UserControl>
```

### 2. AgentSettingsPanel.axaml.cs

**Location**: `src/SeniorIntern.Desktop/Views/AgentSettingsPanel.axaml.cs`

```csharp
namespace SeniorIntern.Desktop.Views;

using Avalonia.Controls;

/// <summary>
/// Settings panel for agent configuration.
/// </summary>
/// <remarks>
/// <para>
/// This panel provides comprehensive settings for configuring the agent's
/// behavior, including policy mode, risk thresholds, tool permissions,
/// execution limits, and audit logging.
/// </para>
/// </remarks>
public partial class AgentSettingsPanel : UserControl
{
    /// <summary>
    /// Initializes a new instance of the AgentSettingsPanel.
    /// </summary>
    public AgentSettingsPanel()
    {
        InitializeComponent();
    }
}
```

### 3. ToolPermissionItem.cs

**Location**: `src/SeniorIntern.Desktop/Models/ToolPermissionItem.cs`

```csharp
namespace SeniorIntern.Desktop.Models;

using Avalonia.Media;
using CommunityToolkit.Mvvm.ComponentModel;
using SeniorIntern.Core.Tools;

/// <summary>
/// UI model for tool permission settings.
/// </summary>
/// <remarks>
/// <para>
/// This model represents a single tool's permission settings in the
/// agent settings panel, including enable/disable state and override behavior.
/// </para>
/// </remarks>
public partial class ToolPermissionItem : ObservableObject
{
    #region Identification

    /// <summary>
    /// Tool identifier.
    /// </summary>
    public string Id { get; init; } = string.Empty;

    /// <summary>
    /// Display name of the tool.
    /// </summary>
    public string Name { get; init; } = string.Empty;

    /// <summary>
    /// Tool description.
    /// </summary>
    public string Description { get; init; } = string.Empty;

    /// <summary>
    /// Tool category.
    /// </summary>
    public ToolCategory Category { get; init; }

    #endregion

    #region Risk Information

    /// <summary>
    /// Default risk level of the tool.
    /// </summary>
    public RiskLevel RiskLevel { get; init; }

    /// <summary>
    /// Text representation of risk level.
    /// </summary>
    public string RiskLevelText => RiskLevel.ToString();

    /// <summary>
    /// Brush for risk level display.
    /// </summary>
    public IBrush RiskLevelBrush => RiskLevel switch
    {
        RiskLevel.Safe => new SolidColorBrush(Color.Parse("#10B981")),      // Green
        RiskLevel.Low => new SolidColorBrush(Color.Parse("#6B7280")),       // Gray
        RiskLevel.Medium => new SolidColorBrush(Color.Parse("#F59E0B")),    // Amber
        RiskLevel.High => new SolidColorBrush(Color.Parse("#EF4444")),      // Red
        RiskLevel.Critical => new SolidColorBrush(Color.Parse("#7F1D1D")),  // Dark Red
        _ => Brushes.Gray
    };

    #endregion

    #region Settings

    /// <summary>
    /// Whether the tool is enabled.
    /// </summary>
    [ObservableProperty]
    private bool _isEnabled = true;

    /// <summary>
    /// Override action for this tool.
    /// </summary>
    [ObservableProperty]
    private ToolOverrideAction _overrideAction = ToolOverrideAction.Default;

    #endregion

    #region ComboBox Options

    /// <summary>
    /// Available override options for the ComboBox.
    /// </summary>
    public static ToolOverrideAction[] OverrideOptions { get; } =
    [
        ToolOverrideAction.Default,
        ToolOverrideAction.AlwaysAllow,
        ToolOverrideAction.AlwaysAsk,
        ToolOverrideAction.AlwaysDeny
    ];

    #endregion

    #region Factory

    /// <summary>
    /// Create from an ITool.
    /// </summary>
    public static ToolPermissionItem FromTool(ITool tool) => new()
    {
        Id = tool.Id,
        Name = tool.Name,
        Description = tool.Description,
        Category = tool.Category,
        RiskLevel = tool.DefaultRiskLevel
    };

    #endregion
}

/// <summary>
/// Override action for tool permissions.
/// </summary>
public enum ToolOverrideAction
{
    /// <summary>
    /// Use default policy behavior.
    /// </summary>
    Default,

    /// <summary>
    /// Always allow without asking.
    /// </summary>
    AlwaysAllow,

    /// <summary>
    /// Always ask for approval.
    /// </summary>
    AlwaysAsk,

    /// <summary>
    /// Always deny execution.
    /// </summary>
    AlwaysDeny
}

/// <summary>
/// Extension methods for ToolOverrideAction.
/// </summary>
public static class ToolOverrideActionExtensions
{
    /// <summary>
    /// Get display name for the override action.
    /// </summary>
    public static string GetDisplayName(this ToolOverrideAction action) => action switch
    {
        ToolOverrideAction.Default => "Default",
        ToolOverrideAction.AlwaysAllow => "Always Allow",
        ToolOverrideAction.AlwaysAsk => "Always Ask",
        ToolOverrideAction.AlwaysDeny => "Block",
        _ => action.ToString()
    };
}
```

### 4. RiskLevelDescription.cs

**Location**: `src/SeniorIntern.Desktop/Models/RiskLevelDescription.cs`

```csharp
namespace SeniorIntern.Desktop.Models;

using Avalonia.Media;
using SeniorIntern.Core.Tools;

/// <summary>
/// Model for displaying risk level descriptions in the settings UI.
/// </summary>
public class RiskLevelDescription
{
    /// <summary>
    /// The risk level.
    /// </summary>
    public RiskLevel Level { get; init; }

    /// <summary>
    /// Display name.
    /// </summary>
    public string Name { get; init; } = string.Empty;

    /// <summary>
    /// Description text.
    /// </summary>
    public string Description { get; init; } = string.Empty;

    /// <summary>
    /// Color brush for the indicator.
    /// </summary>
    public IBrush Brush { get; init; } = Brushes.Gray;

    /// <summary>
    /// Get all risk level descriptions.
    /// </summary>
    public static RiskLevelDescription[] GetAll() =>
    [
        new()
        {
            Level = RiskLevel.Safe,
            Name = "Safe",
            Description = "Read-only operations, no system changes",
            Brush = new SolidColorBrush(Color.Parse("#10B981"))
        },
        new()
        {
            Level = RiskLevel.Low,
            Name = "Low",
            Description = "Simple file modifications, minimal risk",
            Brush = new SolidColorBrush(Color.Parse("#6B7280"))
        },
        new()
        {
            Level = RiskLevel.Medium,
            Name = "Medium",
            Description = "File writes, directory changes",
            Brush = new SolidColorBrush(Color.Parse("#F59E0B"))
        },
        new()
        {
            Level = RiskLevel.High,
            Name = "High",
            Description = "System commands, file deletion",
            Brush = new SolidColorBrush(Color.Parse("#EF4444"))
        },
        new()
        {
            Level = RiskLevel.Critical,
            Name = "Critical",
            Description = "Destructive operations, credential access",
            Brush = new SolidColorBrush(Color.Parse("#7F1D1D"))
        }
    ];
}
```

### 5. ProtectedPathItem.cs

**Location**: `src/SeniorIntern.Desktop/Models/ProtectedPathItem.cs`

```csharp
namespace SeniorIntern.Desktop.Models;

/// <summary>
/// Model for a protected path in the settings UI.
/// </summary>
public class ProtectedPathItem
{
    /// <summary>
    /// The protected path.
    /// </summary>
    public string Path { get; init; } = string.Empty;

    /// <summary>
    /// Whether this is a default system path.
    /// </summary>
    public bool IsSystem { get; init; }

    /// <summary>
    /// Create from a path string.
    /// </summary>
    public static ProtectedPathItem FromPath(string path, bool isSystem = false) => new()
    {
        Path = path,
        IsSystem = isSystem
    };
}
```

---

## File Summary

| File | Location | Purpose | Lines |
|------|----------|---------|-------|
| `AgentSettingsPanel.axaml` | `Views/` | Main settings panel XAML | ~400 |
| `AgentSettingsPanel.axaml.cs` | `Views/` | Code-behind | ~25 |
| `ToolPermissionItem.cs` | `Models/` | Tool permission UI model | ~130 |
| `RiskLevelDescription.cs` | `Models/` | Risk level descriptions | ~65 |
| `ProtectedPathItem.cs` | `Models/` | Protected path model | ~30 |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Agent mode section with all four options |
| AC-2 | Risk threshold slider with visual feedback |
| AC-3 | Tool permissions list with search functionality |
| AC-4 | Execution limits sliders with current values |
| AC-5 | Audit section with all logging options |
| AC-6 | Protected paths management |
| AC-7 | Save button triggers settings persistence |
| AC-8 | Responsive layout within max width |

---

## Changelog Entry

```markdown
## v0.6.5d - Agent Settings Panel XAML

### Added
- `AgentSettingsPanel.axaml` UserControl
  - Section 1: Agent Mode (4 radio buttons with descriptions)
    - Disabled, AlwaysAsk, AskForRisky (recommended), AutoApprove (dangerous)
  - Section 2: Approval Threshold (slider + legend, visible when AskForRisky)
    - Risk level slider 0-4 with snap-to-tick
    - Color-coded current value badge
    - Full risk level legend with descriptions
  - Section 3: Tool Permissions
    - Search textbox with watermark
    - Scrollable tool list (max 300px)
    - Enable/disable checkbox per tool
    - Risk level badge per tool
    - Override action dropdown (Default/AlwaysAllow/AlwaysAsk/Block)
    - Reset All link button
  - Section 4: Execution Limits (4 sliders with values)
    - Max iterations (1-50)
    - Tool timeout (10-300 sec)
    - Rate limit per minute (5-60)
    - Rate limit per hour (50-500)
  - Section 5: Audit & Logging
    - Master toggle for all logging
    - Sub-options for parameters and results
    - View/Export/Clear buttons
    - Entry count and size stats
  - Section 6: Protected Paths
    - Scrollable path list (max 200px)
    - Add/Remove path buttons
  - Save Settings button (accent styled)
- `AgentSettingsPanel.axaml.cs` code-behind
- Settings section styles (border, link button, icon button, danger button)
- `ToolPermissionItem` class
  - Properties: Id, Name, Description, Category, RiskLevel, IsEnabled, OverrideAction
  - Computed: RiskLevelText, RiskLevelBrush, OverrideOptions
  - Factory: FromTool(ITool)
- `ToolOverrideAction` enum (Default, AlwaysAllow, AlwaysAsk, AlwaysDeny)
- `RiskLevelDescription` class with GetAll() factory
- `ProtectedPathItem` class for path display
```

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.6.5d | 0.75 day |
