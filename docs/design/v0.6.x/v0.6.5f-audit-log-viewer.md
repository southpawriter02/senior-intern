# Design Specification: AIntern v0.6.5f "Audit Log Viewer"

## Overview

**Version**: v0.6.5f
**Parent**: v0.6.5 Agent Loop & Polish
**Focus**: Detailed viewer dialog for browsing and filtering the audit log

### Purpose

Create the audit log viewer that:
1. Displays all tool execution audit entries in a sortable DataGrid
2. Provides comprehensive filtering (date range, tool, decision, risk level, search)
3. Shows detailed information for selected entries
4. Allows navigation to related conversations
5. Supports refresh to reload data

### Dependencies

**From v0.6.5e (Agent Settings ViewModel)**:
- `IAuditLogRepository` interface
- `AuditLogEntry` model
- `AuditDecision` enum

**From v0.6.4 (Safety & Approval)**:
- `RiskLevel` enum

**From Core Services**:
- `INavigationService` for conversation navigation

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    v0.6.5f Audit Log Viewer Architecture                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Window Layout (4-Row Grid):                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Row 0: Header                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Audit Log                             â”‚  â”‚ Refresh â”‚              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Showing 245 of 1,234 entries          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Row 1: Filters (WrapPanel)                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ From:[ğŸ“… 2024-01-01] To:[ğŸ“… 2024-01-31] | Tool:[â–¼ All] |            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Decision:[â–¼ All] | Min Risk:[â–¼ Any] | [ğŸ” Search...]               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Row 2: DataGrid (Main content)                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Time         â”‚ Tool      â”‚ Risk    â”‚ Decision    â”‚ Result â”‚ Dur.   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 2024-01-15   â”‚ ReadFile  â”‚ [Safe]  â”‚ [AutoAppr.] â”‚  âœ“     â”‚ 45ms   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 09:30:25     â”‚           â”‚         â”‚             â”‚        â”‚        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 2024-01-15   â”‚ RunCmd    â”‚ [High]  â”‚ [UserAppr.] â”‚  âœ“     â”‚ 1200ms â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 09:28:10     â”‚           â”‚         â”‚             â”‚        â”‚        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 2024-01-15   â”‚ WriteFile â”‚ [Medium]â”‚ [UserDen.]  â”‚  â€”     â”‚ â€”      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ 09:25:00     â”‚           â”‚         â”‚             â”‚        â”‚        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Row 3: Details Panel (visible when entry selected)                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€ Parameters â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Error (if any) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ { "path": "/foo/bar", â”‚  â”‚ FileNotFoundException: File not   â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”‚   "content": "..."    â”‚  â”‚ found at specified path.          â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ }                     â”‚  â”‚                                    â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Conversation: [View Conversation]                                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DataGrid Columns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DataGrid Column Specifications                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Column Layout:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Column    â”‚ Width â”‚ Type       â”‚ Binding          â”‚ Sortable â”‚ Notes   â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Time      â”‚ 150   â”‚ Text       â”‚ Timestamp        â”‚ Yes      â”‚ Format: â”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚ yyyy-MM-dd       â”‚          â”‚ datetimeâ”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚ HH:mm:ss         â”‚          â”‚         â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Tool      â”‚ 120   â”‚ Text       â”‚ ToolName         â”‚ Yes      â”‚         â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Risk      â”‚ 80    â”‚ Template   â”‚ RiskLevel        â”‚ Yes      â”‚ Colored â”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚                  â”‚          â”‚ badge   â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Decision  â”‚ 100   â”‚ Template   â”‚ Decision         â”‚ Yes      â”‚ Colored â”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚                  â”‚          â”‚ badge   â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Result    â”‚ 70    â”‚ Template   â”‚ ExecutionSuccess â”‚ Yes      â”‚ âœ“/âœ— iconâ”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Duration  â”‚ 80    â”‚ Text       â”‚ ExecutionDurationâ”‚ Yes      â”‚ Format: â”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚ TotalMillisecondsâ”‚          â”‚ {0}ms   â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ Summary   â”‚ *     â”‚ Text       â”‚ ExecutionSummary â”‚ No       â”‚ Fills   â”‚ â”‚
â”‚  â”‚           â”‚       â”‚            â”‚                  â”‚          â”‚ space   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Template Columns (Colored Badges):                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Risk Level Badge:                                                       â”‚ â”‚
â”‚  â”‚  â€¢ Background: RiskLevelToBrushConverter                                â”‚ â”‚
â”‚  â”‚  â€¢ Corner radius: 4px                                                   â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 6,2                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Text: RiskLevel enum name                                            â”‚ â”‚
â”‚  â”‚  â€¢ Foreground: White                                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Decision Badge:                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Background: AuditDecisionToBrushConverter                            â”‚ â”‚
â”‚  â”‚  â€¢ Corner radius: 4px                                                   â”‚ â”‚
â”‚  â”‚  â€¢ Padding: 6,2                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Text: Decision enum name                                             â”‚ â”‚
â”‚  â”‚  â€¢ Foreground: White                                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Result Icon:                                                            â”‚ â”‚
â”‚  â”‚  â€¢ Success: âœ“ (green)                                                   â”‚ â”‚
â”‚  â”‚  â€¢ Failure: âœ— (red)                                                     â”‚ â”‚
â”‚  â”‚  â€¢ Pending/Denied: â€” (gray)                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Filter Specifications

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Filter Specifications                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Date Range Filters:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Start Date                                                              â”‚ â”‚
â”‚  â”‚  â€¢ Type: CalendarDatePicker                                             â”‚ â”‚
â”‚  â”‚  â€¢ Binding: StartDate (DateTimeOffset?)                                 â”‚ â”‚
â”‚  â”‚  â€¢ Width: 130px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where Timestamp >= StartDate                         â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  End Date                                                                â”‚ â”‚
â”‚  â”‚  â€¢ Type: CalendarDatePicker                                             â”‚ â”‚
â”‚  â”‚  â€¢ Binding: EndDate (DateTimeOffset?)                                   â”‚ â”‚
â”‚  â”‚  â€¢ Width: 130px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where Timestamp <= EndDate + 1 day                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Tool Filter:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Type: ComboBox                                                        â”‚ â”‚
â”‚  â”‚  â€¢ ItemsSource: AvailableTools (dynamically populated)                  â”‚ â”‚
â”‚  â”‚  â€¢ SelectedItem: SelectedTool (string?)                                 â”‚ â”‚
â”‚  â”‚  â€¢ Width: 150px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Placeholder: "All tools"                                             â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where ToolId == SelectedTool                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Decision Filter:                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Type: ComboBox                                                        â”‚ â”‚
â”‚  â”‚  â€¢ ItemsSource: AvailableDecisions (AuditDecision[])                    â”‚ â”‚
â”‚  â”‚  â€¢ SelectedItem: SelectedDecision (AuditDecision?)                      â”‚ â”‚
â”‚  â”‚  â€¢ Width: 130px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Placeholder: "All"                                                   â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where Decision == SelectedDecision                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Risk Level Filter:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Type: ComboBox                                                        â”‚ â”‚
â”‚  â”‚  â€¢ ItemsSource: AvailableRiskLevels (RiskLevel[])                       â”‚ â”‚
â”‚  â”‚  â€¢ SelectedItem: SelectedMinRisk (RiskLevel?)                           â”‚ â”‚
â”‚  â”‚  â€¢ Width: 100px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Placeholder: "Any"                                                   â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where RiskLevel >= SelectedMinRisk                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Search Filter:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â€¢ Type: TextBox                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Text: SearchText (string)                                            â”‚ â”‚
â”‚  â”‚  â€¢ Width: 150px                                                         â”‚ â”‚
â”‚  â”‚  â€¢ Watermark: "Search..."                                               â”‚ â”‚
â”‚  â”‚  â€¢ Filter: entries where ToolName or ExecutionSummary contains text     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Specifications

### 1. AuditLogViewer.axaml

**Location**: `src/SeniorIntern.Desktop/Views/AuditLogViewer.axaml`

```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:SeniorIntern.Desktop.ViewModels"
        xmlns:models="using:SeniorIntern.Core.Models"
        xmlns:converters="using:SeniorIntern.Desktop.Converters"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="600"
        x:Class="SeniorIntern.Desktop.Views.AuditLogViewer"
        x:DataType="vm:AuditLogViewerViewModel"
        Title="Audit Log Viewer"
        Width="900"
        Height="600"
        MinWidth="700"
        MinHeight="400"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <converters:AuditDecisionToBrushConverter x:Key="DecisionBrushConverter" />
        <converters:RiskLevelToBrushConverter x:Key="RiskBrushConverter" />
        <converters:BoolToSuccessIconConverter x:Key="BoolToIconConverter" />
        <converters:BoolToSuccessBrushConverter x:Key="BoolToBrushConverter" />
    </Window.Resources>

    <Window.Styles>
        <!-- Secondary Button -->
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="{DynamicResource SurfaceBackgroundAlt}" />
        </Style>

        <!-- Link Button -->
        <Style Selector="Button.link-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="{DynamicResource AccentBrush}" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Padding" Value="0" />
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto, Auto, *, Auto">

        <!-- ============================================== -->
        <!-- Row 0: Header                                  -->
        <!-- ============================================== -->
        <Border Grid.Row="0"
                Background="{DynamicResource SurfaceBackground}"
                Padding="16">
            <Grid ColumnDefinitions="*, Auto">
                <StackPanel>
                    <TextBlock Text="Audit Log"
                               FontSize="20"
                               FontWeight="SemiBold" />
                    <TextBlock Text="{Binding SummaryText}"
                               Foreground="{DynamicResource TextMuted}"
                               FontSize="12" />
                </StackPanel>

                <Button Grid.Column="1"
                        Content="Refresh"
                        Command="{Binding RefreshCommand}"
                        Classes="secondary" />
            </Grid>
        </Border>

        <!-- ============================================== -->
        <!-- Row 1: Filters                                 -->
        <!-- ============================================== -->
        <Border Grid.Row="1"
                Background="{DynamicResource SurfaceBackgroundAlt}"
                Padding="16,12">
            <WrapPanel Orientation="Horizontal">

                <!-- Date Range -->
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,16,4">
                    <TextBlock Text="From:" VerticalAlignment="Center" />
                    <CalendarDatePicker SelectedDate="{Binding StartDate}" Width="130" />
                    <TextBlock Text="To:" VerticalAlignment="Center" />
                    <CalendarDatePicker SelectedDate="{Binding EndDate}" Width="130" />
                </StackPanel>

                <!-- Tool Filter -->
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,16,4">
                    <TextBlock Text="Tool:" VerticalAlignment="Center" />
                    <ComboBox ItemsSource="{Binding AvailableTools}"
                              SelectedItem="{Binding SelectedTool}"
                              Width="150"
                              PlaceholderText="All tools" />
                </StackPanel>

                <!-- Decision Filter -->
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,16,4">
                    <TextBlock Text="Decision:" VerticalAlignment="Center" />
                    <ComboBox ItemsSource="{Binding AvailableDecisions}"
                              SelectedItem="{Binding SelectedDecision}"
                              Width="130"
                              PlaceholderText="All" />
                </StackPanel>

                <!-- Risk Filter -->
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,16,4">
                    <TextBlock Text="Min Risk:" VerticalAlignment="Center" />
                    <ComboBox ItemsSource="{Binding AvailableRiskLevels}"
                              SelectedItem="{Binding SelectedMinRisk}"
                              Width="100"
                              PlaceholderText="Any" />
                </StackPanel>

                <!-- Search -->
                <TextBox Text="{Binding SearchText}"
                         Watermark="Search..."
                         Width="150"
                         Margin="0,0,0,4" />
            </WrapPanel>
        </Border>

        <!-- ============================================== -->
        <!-- Row 2: DataGrid                                -->
        <!-- ============================================== -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding FilteredEntries}"
                  SelectedItem="{Binding SelectedEntry}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  CanUserReorderColumns="True"
                  SelectionMode="Single">

            <DataGrid.Columns>
                <!-- Time Column -->
                <DataGridTextColumn Header="Time"
                                    Binding="{Binding Timestamp, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}"
                                    Width="150" />

                <!-- Tool Column -->
                <DataGridTextColumn Header="Tool"
                                    Binding="{Binding ToolName}"
                                    Width="120" />

                <!-- Risk Column (Template) -->
                <DataGridTemplateColumn Header="Risk" Width="80" SortMemberPath="RiskLevel">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate DataType="{x:Type models:AuditLogEntry}">
                            <Border Background="{Binding RiskLevel, Converter={StaticResource RiskBrushConverter}}"
                                    CornerRadius="4"
                                    Padding="6,2"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">
                                <TextBlock Text="{Binding RiskLevel}"
                                           Foreground="White"
                                           FontSize="11" />
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Decision Column (Template) -->
                <DataGridTemplateColumn Header="Decision" Width="110" SortMemberPath="Decision">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate DataType="{x:Type models:AuditLogEntry}">
                            <Border Background="{Binding Decision, Converter={StaticResource DecisionBrushConverter}}"
                                    CornerRadius="4"
                                    Padding="6,2"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">
                                <TextBlock Text="{Binding DecisionDisplay}"
                                           Foreground="White"
                                           FontSize="11" />
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Result Column (Template) -->
                <DataGridTemplateColumn Header="Result" Width="70" SortMemberPath="ExecutionSuccess">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate DataType="{x:Type models:AuditLogEntry}">
                            <PathIcon Data="{Binding ExecutionSuccess, Converter={StaticResource BoolToIconConverter}}"
                                      Width="16" Height="16"
                                      Foreground="{Binding ExecutionSuccess, Converter={StaticResource BoolToBrushConverter}}"
                                      IsVisible="{Binding HasExecutionResult}"
                                      HorizontalAlignment="Center" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Duration Column -->
                <DataGridTextColumn Header="Duration"
                                    Binding="{Binding DurationDisplay}"
                                    Width="80" />

                <!-- Summary Column -->
                <DataGridTextColumn Header="Summary"
                                    Binding="{Binding ExecutionSummary}"
                                    Width="*" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- ============================================== -->
        <!-- Row 3: Details Panel                           -->
        <!-- ============================================== -->
        <Border Grid.Row="3"
                Background="{DynamicResource SurfaceBackgroundAlt}"
                Padding="16"
                IsVisible="{Binding HasSelectedEntry}">
            <Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto, Auto">

                <!-- Parameters -->
                <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,8">
                    <TextBlock Text="Parameters"
                               FontWeight="SemiBold"
                               Margin="0,0,0,4" />
                    <TextBox Text="{Binding SelectedEntry.ParametersFormatted}"
                             IsReadOnly="True"
                             AcceptsReturn="True"
                             FontFamily="{StaticResource MonoFont}"
                             MaxHeight="100"
                             FontSize="11" />
                </StackPanel>

                <!-- Result/Error -->
                <StackPanel Grid.Column="1" Grid.Row="0" Margin="8,0,0,8">
                    <!-- Show Result if success, Error if failed -->
                    <StackPanel IsVisible="{Binding SelectedEntry.HasResult}">
                        <TextBlock Text="Result"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,4" />
                        <TextBox Text="{Binding SelectedEntry.ResultFormatted}"
                                 IsReadOnly="True"
                                 AcceptsReturn="True"
                                 FontFamily="{StaticResource MonoFont}"
                                 MaxHeight="100"
                                 FontSize="11" />
                    </StackPanel>

                    <StackPanel IsVisible="{Binding SelectedEntry.HasError}">
                        <TextBlock Text="Error"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,4"
                                   Foreground="{DynamicResource ErrorBrush}" />
                        <TextBox Text="{Binding SelectedEntry.ExecutionError}"
                                 IsReadOnly="True"
                                 AcceptsReturn="True"
                                 FontFamily="{StaticResource MonoFont}"
                                 MaxHeight="100"
                                 FontSize="11"
                                 Foreground="{DynamicResource ErrorBrush}" />
                    </StackPanel>
                </StackPanel>

                <!-- Denial Reason -->
                <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1"
                            IsVisible="{Binding SelectedEntry.HasDenialReason}">
                    <TextBlock Text="Denial Reason"
                               FontWeight="SemiBold"
                               Margin="0,0,0,4" />
                    <TextBlock Text="{Binding SelectedEntry.DenialReason}"
                               TextWrapping="Wrap"
                               FontSize="12" />
                </StackPanel>

                <!-- Conversation Link -->
                <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2"
                            Orientation="Horizontal"
                            Spacing="8"
                            Margin="0,8,0,0"
                            IsVisible="{Binding SelectedEntry.HasConversationId}">
                    <TextBlock Text="Conversation:" VerticalAlignment="Center" />
                    <Button Content="View Conversation"
                            Command="{Binding ViewConversationCommand}"
                            CommandParameter="{Binding SelectedEntry.ConversationId}"
                            Classes="link-button" />
                    <TextBlock Text="{Binding SelectedEntry.ConversationId}"
                               Foreground="{DynamicResource TextMuted}"
                               FontSize="11"
                               VerticalAlignment="Center" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
```

### 2. AuditLogViewer.axaml.cs

**Location**: `src/SeniorIntern.Desktop/Views/AuditLogViewer.axaml.cs`

```csharp
namespace SeniorIntern.Desktop.Views;

using Avalonia.Controls;

/// <summary>
/// Window for viewing the audit log.
/// </summary>
/// <remarks>
/// <para>
/// This window displays a comprehensive view of all tool execution audit entries,
/// with filtering, sorting, and detailed information for selected entries.
/// </para>
/// <para>
/// The window is typically opened as a dialog from the agent settings panel
/// via the "View Audit Log" button.
/// </para>
/// </remarks>
public partial class AuditLogViewer : Window
{
    /// <summary>
    /// Initializes a new instance of the AuditLogViewer.
    /// </summary>
    public AuditLogViewer()
    {
        InitializeComponent();
    }
}
```

### 3. AuditLogViewerViewModel.cs

**Location**: `src/SeniorIntern.Desktop/ViewModels/AuditLogViewerViewModel.cs`

```csharp
namespace SeniorIntern.Desktop.ViewModels;

using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Threading.Tasks;
using CommunityToolkit.Mvvm.ComponentModel;
using CommunityToolkit.Mvvm.Input;
using SeniorIntern.Core.Interfaces;
using SeniorIntern.Core.Models;
using SeniorIntern.Core.Tools;
using SeniorIntern.Desktop.Services;

/// <summary>
/// ViewModel for the audit log viewer.
/// </summary>
/// <remarks>
/// <para>
/// This ViewModel manages the audit log viewer's data and filtering logic,
/// including date range, tool, decision, risk level, and text search filters.
/// </para>
/// </remarks>
public partial class AuditLogViewerViewModel : ViewModelBase
{
    private readonly IAuditLogRepository _auditLogRepository;
    private readonly INavigationService _navigationService;

    private ObservableCollection<AuditLogEntry> _allEntries = new();

    #region Filter Properties

    /// <summary>
    /// Start date filter.
    /// </summary>
    [ObservableProperty]
    private DateTimeOffset? _startDate;

    /// <summary>
    /// End date filter.
    /// </summary>
    [ObservableProperty]
    private DateTimeOffset? _endDate;

    /// <summary>
    /// Selected tool filter.
    /// </summary>
    [ObservableProperty]
    private string? _selectedTool;

    /// <summary>
    /// Selected decision filter.
    /// </summary>
    [ObservableProperty]
    private AuditDecision? _selectedDecision;

    /// <summary>
    /// Selected minimum risk level filter.
    /// </summary>
    [ObservableProperty]
    private RiskLevel? _selectedMinRisk;

    /// <summary>
    /// Search text filter.
    /// </summary>
    [ObservableProperty]
    private string _searchText = string.Empty;

    #endregion

    #region Selection

    /// <summary>
    /// Currently selected audit log entry.
    /// </summary>
    [ObservableProperty]
    [NotifyPropertyChangedFor(nameof(HasSelectedEntry))]
    private AuditLogEntry? _selectedEntry;

    /// <summary>
    /// Whether an entry is currently selected.
    /// </summary>
    public bool HasSelectedEntry => SelectedEntry is not null;

    #endregion

    #region Filter Options

    /// <summary>
    /// Available tools for filtering (dynamically populated).
    /// </summary>
    [ObservableProperty]
    private ObservableCollection<string> _availableTools = new();

    /// <summary>
    /// Available decisions for filtering.
    /// </summary>
    public AuditDecision[] AvailableDecisions { get; } = Enum.GetValues<AuditDecision>();

    /// <summary>
    /// Available risk levels for filtering.
    /// </summary>
    public RiskLevel[] AvailableRiskLevels { get; } = Enum.GetValues<RiskLevel>();

    #endregion

    #region Computed Properties

    /// <summary>
    /// Filtered entries based on current filter settings.
    /// </summary>
    public IEnumerable<AuditLogEntry> FilteredEntries
    {
        get
        {
            var query = _allEntries.AsEnumerable();

            // Apply date range filter
            if (StartDate.HasValue)
                query = query.Where(e => e.Timestamp >= StartDate.Value.DateTime);

            if (EndDate.HasValue)
                query = query.Where(e => e.Timestamp <= EndDate.Value.DateTime.AddDays(1));

            // Apply tool filter
            if (!string.IsNullOrEmpty(SelectedTool))
                query = query.Where(e => e.ToolId == SelectedTool);

            // Apply decision filter
            if (SelectedDecision.HasValue)
                query = query.Where(e => e.Decision == SelectedDecision.Value);

            // Apply risk level filter
            if (SelectedMinRisk.HasValue)
                query = query.Where(e => e.RiskLevel >= SelectedMinRisk.Value);

            // Apply search text filter
            if (!string.IsNullOrWhiteSpace(SearchText))
            {
                query = query.Where(e =>
                    e.ToolName.Contains(SearchText, StringComparison.OrdinalIgnoreCase) ||
                    (e.ExecutionSummary?.Contains(SearchText, StringComparison.OrdinalIgnoreCase) ?? false) ||
                    e.ToolId.Contains(SearchText, StringComparison.OrdinalIgnoreCase));
            }

            // Order by timestamp descending (newest first)
            return query.OrderByDescending(e => e.Timestamp);
        }
    }

    /// <summary>
    /// Summary text showing filtered/total counts.
    /// </summary>
    public string SummaryText
    {
        get
        {
            var filtered = FilteredEntries.Count();
            var total = _allEntries.Count;

            if (filtered == total)
                return $"{total:N0} entries";

            return $"Showing {filtered:N0} of {total:N0} entries";
        }
    }

    #endregion

    #region Constructor

    /// <summary>
    /// Initializes a new instance of the AuditLogViewerViewModel.
    /// </summary>
    public AuditLogViewerViewModel(
        IAuditLogRepository auditLogRepository,
        INavigationService navigationService)
    {
        _auditLogRepository = auditLogRepository ?? throw new ArgumentNullException(nameof(auditLogRepository));
        _navigationService = navigationService ?? throw new ArgumentNullException(nameof(navigationService));
    }

    #endregion

    #region Initialization

    /// <summary>
    /// Initialize the viewer with data.
    /// </summary>
    public async Task InitializeAsync()
    {
        // Set default date range (last 30 days)
        EndDate = DateTimeOffset.Now;
        StartDate = DateTimeOffset.Now.AddDays(-30);

        await RefreshAsync();
    }

    #endregion

    #region Commands

    /// <summary>
    /// Refresh the audit log entries.
    /// </summary>
    [RelayCommand]
    private async Task RefreshAsync()
    {
        try
        {
            var entries = await _auditLogRepository.GetAllAsync();
            _allEntries = new ObservableCollection<AuditLogEntry>(entries);

            // Extract unique tool IDs for filter dropdown
            AvailableTools = new ObservableCollection<string>(
                _allEntries
                    .Select(e => e.ToolId)
                    .Distinct()
                    .OrderBy(t => t));

            // Notify UI of updates
            OnPropertyChanged(nameof(FilteredEntries));
            OnPropertyChanged(nameof(SummaryText));
        }
        catch (Exception ex)
        {
            // Handle error - could show a notification
            System.Diagnostics.Debug.WriteLine($"Failed to load audit log: {ex.Message}");
        }
    }

    /// <summary>
    /// Navigate to the conversation associated with the selected entry.
    /// </summary>
    [RelayCommand]
    private async Task ViewConversationAsync(Guid? conversationId)
    {
        if (!conversationId.HasValue) return;

        await _navigationService.NavigateToConversationAsync(conversationId.Value);
    }

    /// <summary>
    /// Clear all filters.
    /// </summary>
    [RelayCommand]
    private void ClearFilters()
    {
        StartDate = null;
        EndDate = null;
        SelectedTool = null;
        SelectedDecision = null;
        SelectedMinRisk = null;
        SearchText = string.Empty;
    }

    #endregion

    #region Property Changed Handlers

    partial void OnStartDateChanged(DateTimeOffset? value) => NotifyFiltersChanged();
    partial void OnEndDateChanged(DateTimeOffset? value) => NotifyFiltersChanged();
    partial void OnSelectedToolChanged(string? value) => NotifyFiltersChanged();
    partial void OnSelectedDecisionChanged(AuditDecision? value) => NotifyFiltersChanged();
    partial void OnSelectedMinRiskChanged(RiskLevel? value) => NotifyFiltersChanged();
    partial void OnSearchTextChanged(string value) => NotifyFiltersChanged();

    private void NotifyFiltersChanged()
    {
        OnPropertyChanged(nameof(FilteredEntries));
        OnPropertyChanged(nameof(SummaryText));
    }

    #endregion
}
```

### 4. AuditLogEntry.cs (Extensions)

**Location**: `src/SeniorIntern.Core/Models/AuditLogEntry.cs`

```csharp
namespace SeniorIntern.Core.Models;

using System;
using System.Text.Json;
using SeniorIntern.Core.Tools;

/// <summary>
/// An entry in the audit log tracking tool execution.
/// </summary>
public class AuditLogEntry
{
    #region Identification

    /// <summary>
    /// Unique identifier for this entry.
    /// </summary>
    public Guid Id { get; init; } = Guid.NewGuid();

    /// <summary>
    /// Timestamp when the event occurred.
    /// </summary>
    public DateTime Timestamp { get; init; } = DateTime.UtcNow;

    /// <summary>
    /// Associated conversation ID.
    /// </summary>
    public Guid? ConversationId { get; init; }

    #endregion

    #region Tool Information

    /// <summary>
    /// Tool identifier.
    /// </summary>
    public string ToolId { get; init; } = string.Empty;

    /// <summary>
    /// Tool display name.
    /// </summary>
    public string ToolName { get; init; } = string.Empty;

    /// <summary>
    /// Risk level of the tool call.
    /// </summary>
    public RiskLevel RiskLevel { get; init; }

    #endregion

    #region Decision

    /// <summary>
    /// The approval decision made.
    /// </summary>
    public AuditDecision Decision { get; init; }

    /// <summary>
    /// Reason for denial, if applicable.
    /// </summary>
    public string? DenialReason { get; init; }

    #endregion

    #region Execution

    /// <summary>
    /// Whether execution was successful (null if not executed).
    /// </summary>
    public bool? ExecutionSuccess { get; init; }

    /// <summary>
    /// Duration of execution (null if not executed).
    /// </summary>
    public TimeSpan? ExecutionDuration { get; init; }

    /// <summary>
    /// Brief summary of execution result.
    /// </summary>
    public string? ExecutionSummary { get; init; }

    /// <summary>
    /// Error message if execution failed.
    /// </summary>
    public string? ExecutionError { get; init; }

    #endregion

    #region Parameters and Results

    /// <summary>
    /// JSON-serialized parameters (if logging enabled).
    /// </summary>
    public string? ParametersJson { get; init; }

    /// <summary>
    /// JSON-serialized result (if logging enabled).
    /// </summary>
    public string? ResultJson { get; init; }

    #endregion

    #region Computed Properties for UI

    /// <summary>
    /// Display-friendly decision text.
    /// </summary>
    public string DecisionDisplay => Decision switch
    {
        AuditDecision.AutoApproved => "Auto",
        AuditDecision.UserApproved => "Approved",
        AuditDecision.UserDenied => "Denied",
        AuditDecision.PolicyBlocked => "Blocked",
        AuditDecision.RateLimited => "Rate Limit",
        AuditDecision.Error => "Error",
        _ => Decision.ToString()
    };

    /// <summary>
    /// Duration formatted for display.
    /// </summary>
    public string DurationDisplay => ExecutionDuration switch
    {
        null => "-",
        { TotalMilliseconds: < 1000 } d => $"{d.TotalMilliseconds:F0}ms",
        { TotalSeconds: < 60 } d => $"{d.TotalSeconds:F1}s",
        { TotalMinutes: < 60 } d => $"{d.TotalMinutes:F1}m",
        { } d => $"{d.TotalHours:F1}h"
    };

    /// <summary>
    /// Parameters formatted for display.
    /// </summary>
    public string ParametersFormatted => FormatJson(ParametersJson);

    /// <summary>
    /// Result formatted for display.
    /// </summary>
    public string ResultFormatted => FormatJson(ResultJson);

    /// <summary>
    /// Whether this entry has an execution result.
    /// </summary>
    public bool HasExecutionResult => ExecutionSuccess.HasValue;

    /// <summary>
    /// Whether this entry has a result to display.
    /// </summary>
    public bool HasResult => !string.IsNullOrEmpty(ResultJson) && ExecutionSuccess == true;

    /// <summary>
    /// Whether this entry has an error.
    /// </summary>
    public bool HasError => !string.IsNullOrEmpty(ExecutionError);

    /// <summary>
    /// Whether this entry has a denial reason.
    /// </summary>
    public bool HasDenialReason => !string.IsNullOrEmpty(DenialReason);

    /// <summary>
    /// Whether this entry has a conversation ID.
    /// </summary>
    public bool HasConversationId => ConversationId.HasValue;

    #endregion

    #region Helpers

    private static string FormatJson(string? json)
    {
        if (string.IsNullOrEmpty(json))
            return "(none)";

        try
        {
            var doc = JsonDocument.Parse(json);
            return JsonSerializer.Serialize(doc.RootElement, new JsonSerializerOptions
            {
                WriteIndented = true
            });
        }
        catch
        {
            return json;
        }
    }

    #endregion
}

/// <summary>
/// Types of audit decisions.
/// </summary>
public enum AuditDecision
{
    /// <summary>
    /// Automatically approved based on policy.
    /// </summary>
    AutoApproved,

    /// <summary>
    /// Approved by user.
    /// </summary>
    UserApproved,

    /// <summary>
    /// Denied by user.
    /// </summary>
    UserDenied,

    /// <summary>
    /// Blocked by policy.
    /// </summary>
    PolicyBlocked,

    /// <summary>
    /// Blocked due to rate limiting.
    /// </summary>
    RateLimited,

    /// <summary>
    /// Error during approval process.
    /// </summary>
    Error
}
```

### 5. AuditConverters.cs

**Location**: `src/SeniorIntern.Desktop/Converters/AuditConverters.cs`

```csharp
namespace SeniorIntern.Desktop.Converters;

using System;
using System.Globalization;
using Avalonia;
using Avalonia.Data.Converters;
using Avalonia.Media;
using SeniorIntern.Core.Models;
using SeniorIntern.Core.Tools;

/// <summary>
/// Converts AuditDecision to brush for decision badge styling.
/// </summary>
public class AuditDecisionToBrushConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not AuditDecision decision)
            return Brushes.Gray;

        return decision switch
        {
            AuditDecision.AutoApproved => new SolidColorBrush(Color.Parse("#10B981")),    // Green
            AuditDecision.UserApproved => new SolidColorBrush(Color.Parse("#3B82F6")),    // Blue
            AuditDecision.UserDenied => new SolidColorBrush(Color.Parse("#EF4444")),      // Red
            AuditDecision.PolicyBlocked => new SolidColorBrush(Color.Parse("#7F1D1D")),   // Dark Red
            AuditDecision.RateLimited => new SolidColorBrush(Color.Parse("#F59E0B")),     // Amber
            AuditDecision.Error => new SolidColorBrush(Color.Parse("#EF4444")),           // Red
            _ => Brushes.Gray
        };
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotSupportedException();
}

/// <summary>
/// Converts RiskLevel to brush for risk badge styling.
/// </summary>
public class RiskLevelToBrushConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not RiskLevel level)
            return Brushes.Gray;

        return level switch
        {
            RiskLevel.Safe => new SolidColorBrush(Color.Parse("#10B981")),     // Green
            RiskLevel.Low => new SolidColorBrush(Color.Parse("#6B7280")),      // Gray
            RiskLevel.Medium => new SolidColorBrush(Color.Parse("#F59E0B")),   // Amber
            RiskLevel.High => new SolidColorBrush(Color.Parse("#EF4444")),     // Red
            RiskLevel.Critical => new SolidColorBrush(Color.Parse("#7F1D1D")), // Dark Red
            _ => Brushes.Gray
        };
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotSupportedException();
}

/// <summary>
/// Converts bool? (execution success) to icon geometry.
/// </summary>
public class BoolToSuccessIconConverter : IValueConverter
{
    // StreamGeometry strings for success/failure icons
    private const string CheckGeometry = "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z";
    private const string ErrorGeometry = "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z";

    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not bool success)
            return AvaloniaProperty.UnsetValue;

        return StreamGeometry.Parse(success ? CheckGeometry : ErrorGeometry);
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotSupportedException();
}

/// <summary>
/// Converts bool? (execution success) to brush color.
/// </summary>
public class BoolToSuccessBrushConverter : IValueConverter
{
    public object? Convert(object? value, Type targetType, object? parameter, CultureInfo culture)
    {
        if (value is not bool success)
            return Brushes.Gray;

        return success
            ? new SolidColorBrush(Color.Parse("#10B981"))  // Green
            : new SolidColorBrush(Color.Parse("#EF4444")); // Red
    }

    public object? ConvertBack(object? value, Type targetType, object? parameter, CultureInfo culture)
        => throw new NotSupportedException();
}
```

---

## File Summary

| File | Location | Purpose | Lines |
|------|----------|---------|-------|
| `AuditLogViewer.axaml` | `Views/` | Viewer window XAML | ~250 |
| `AuditLogViewer.axaml.cs` | `Views/` | Code-behind | ~25 |
| `AuditLogViewerViewModel.cs` | `ViewModels/` | Viewer ViewModel | ~200 |
| `AuditLogEntry.cs` | `Core/Models/` | Entry model with UI helpers | ~180 |
| `AuditConverters.cs` | `Converters/` | Decision/Risk converters | ~100 |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | Audit log viewer opens as dialog |
| AC-2 | Date range filtering works |
| AC-3 | Tool filtering shows available tools |
| AC-4 | Decision filtering functional |
| AC-5 | Risk level filtering works |
| AC-6 | Search filters by tool name and summary |
| AC-7 | DataGrid displays all columns correctly |
| AC-8 | Entry selection shows details panel |
| AC-9 | Conversation navigation works |
| AC-10 | Refresh reloads data |

---

## Changelog Entry

```markdown
## v0.6.5f - Audit Log Viewer

### Added
- `AuditLogViewer.axaml` Window
  - 4-row grid layout: Header, Filters, DataGrid, Details
  - Header: Title with entry count, Refresh button
  - Filters: Date range, Tool, Decision, Risk, Search
  - DataGrid with 7 columns:
    - Time (text, sortable)
    - Tool (text, sortable)
    - Risk (template badge, sortable)
    - Decision (template badge, sortable)
    - Result (template icon, sortable)
    - Duration (text, sortable)
    - Summary (text, fills remaining space)
  - Details panel: Parameters, Result/Error, Denial reason, Conversation link
- `AuditLogViewer.axaml.cs` code-behind
- `AuditLogViewerViewModel` class
  - Filter properties: StartDate, EndDate, SelectedTool, SelectedDecision, SelectedMinRisk, SearchText
  - Computed: FilteredEntries, SummaryText, HasSelectedEntry
  - Filter options: AvailableTools, AvailableDecisions, AvailableRiskLevels
  - Commands: RefreshCommand, ViewConversationCommand, ClearFiltersCommand
  - Methods: InitializeAsync()
- `AuditLogEntry` model extensions
  - Computed UI properties: DecisionDisplay, DurationDisplay, ParametersFormatted, ResultFormatted
  - Visibility helpers: HasExecutionResult, HasResult, HasError, HasDenialReason, HasConversationId
- `AuditDecision` enum (AutoApproved, UserApproved, UserDenied, PolicyBlocked, RateLimited, Error)
- Value converters:
  - `AuditDecisionToBrushConverter` - Maps decision to colored brush
  - `RiskLevelToBrushConverter` - Maps risk level to colored brush
  - `BoolToSuccessIconConverter` - Maps bool? to check/error icon
  - `BoolToSuccessBrushConverter` - Maps bool? to green/red brush
```

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.6.5f | 0.5 day |
