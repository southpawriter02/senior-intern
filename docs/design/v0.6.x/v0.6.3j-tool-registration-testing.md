# Design Specification: AIntern v0.6.3j "Tool Registration & Testing"

## Overview

**Version**: v0.6.3j
**Parent**: v0.6.3 Built-in Tools
**Focus**: Dependency injection registration and comprehensive test coverage for all built-in tools

### Purpose

Complete the built-in tools suite by:
1. Creating DI extension methods for tool registration
2. Providing "all tools" and "safe-only" registration options
3. Building comprehensive unit test suites for each tool category
4. Creating shared test utilities and helpers
5. Ensuring all tools are properly testable in isolation
6. Validating tool behavior with integration tests

### Dependencies

**From v0.6.3a-i**:
- All built-in tool implementations

**From v0.6.1 (Tool Framework)**:
- `ITool` interface for registration
- `ToolBase`, `ToolResult`

**From v0.3.x (Workspace Awareness)**:
- `IWorkspaceService`, `IFileSystemService`

**Testing**:
- xUnit test framework
- Moq for mocking
- Microsoft.Extensions.Logging.Abstractions

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   v0.6.3j Tool Registration Architecture                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  src/SeniorIntern.Services/BuiltInToolsExtensions.cs                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  BuiltInToolsExtensions                                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚                                                                      â”‚â”‚ â”‚
â”‚  â”‚  â”‚  AddBuiltInTools(IServiceCollection)                                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ File System Tools (8)                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ ReadFileTool                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ WriteFileTool                                               â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ FilePatchTool                                               â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ DeleteFileTool                                              â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ MoveFileTool                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ CopyFileTool                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ ListDirectoryTool                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ CreateDirectoryTool                                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                                   â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Terminal Tools (1)                                              â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ RunCommandTool                                              â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                                   â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Search Tools (2)                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ SearchFilesTool                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ SearchContentTool                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                                   â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Workspace Tools (2)                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€â”€ GetWorkspaceInfoTool                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€â”€ GetOpenFilesTool                                            â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                                   â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€ Git Tools (3)                                                   â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ GitStatusTool                                               â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ GitDiffTool                                                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â””â”€â”€ GitLogTool                                                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                                      â”‚â”‚ â”‚
â”‚  â”‚  â”‚  AddSafeBuiltInTools(IServiceCollection)                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€ Read-only tools only (8)                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ ReadFileTool                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ ListDirectoryTool                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ SearchFilesTool                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ SearchContentTool                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ GetWorkspaceInfoTool                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ GitStatusTool                                               â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â”œâ”€â”€ GitDiffTool                                                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚      â””â”€â”€ GitLogTool                                                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                                      â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tool Summary by Category

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         All Built-in Tools Summary                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Category        Tool ID              Risk     Safe-Only                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  FileSystem      file-read            Safe     âœ“                             â”‚
â”‚  FileSystem      file-write           Medium   âœ—                             â”‚
â”‚  FileSystem      file-patch           Medium   âœ—                             â”‚
â”‚  FileSystem      file-delete          High     âœ—                             â”‚
â”‚  FileSystem      file-move            Medium   âœ—                             â”‚
â”‚  FileSystem      file-copy            Low      âœ—                             â”‚
â”‚  FileSystem      directory-list       Safe     âœ“                             â”‚
â”‚  FileSystem      directory-create     Low      âœ—                             â”‚
â”‚  FileSystem      directory-delete     High     âœ—                             â”‚
â”‚                                                                              â”‚
â”‚  Terminal        terminal-run         High     âœ—                             â”‚
â”‚                                                                              â”‚
â”‚  Search          search-files         Safe     âœ“                             â”‚
â”‚  Search          search-content       Safe     âœ“                             â”‚
â”‚                                                                              â”‚
â”‚  Workspace       workspace-info       Safe     âœ“                             â”‚
â”‚  Workspace       workspace-open-files Safe     âœ“                             â”‚
â”‚                                                                              â”‚
â”‚  Git             git-status           Safe     âœ“                             â”‚
â”‚  Git             git-diff             Safe     âœ“                             â”‚
â”‚  Git             git-log              Safe     âœ“                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Total: 17 tools (8 safe, 9 require permissions)                             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Test Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Test Project Structure                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  tests/SeniorIntern.Tests/Tools/                                             â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ ToolTestHelpers.cs              Shared test utilities                   â”‚
â”‚  â”‚   â”œâ”€â”€ CreateMockWorkspace()                                               â”‚
â”‚  â”‚   â”œâ”€â”€ CreateContext()                                                     â”‚
â”‚  â”‚   â”œâ”€â”€ CreateTempDirectory()                                               â”‚
â”‚  â”‚   â””â”€â”€ MockFileSystemService                                              â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ FileSystem/                                                             â”‚
â”‚  â”‚   â”œâ”€â”€ ReadFileToolTests.cs        ~15 tests                              â”‚
â”‚  â”‚   â”œâ”€â”€ WriteFileToolTests.cs       ~12 tests                              â”‚
â”‚  â”‚   â”œâ”€â”€ FilePatchToolTests.cs       ~15 tests                              â”‚
â”‚  â”‚   â”œâ”€â”€ FileManagementToolTests.cs  ~18 tests (delete, move, copy)         â”‚
â”‚  â”‚   â””â”€â”€ DirectoryToolTests.cs       ~15 tests (list, create, delete)       â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ Terminal/                                                               â”‚
â”‚  â”‚   â””â”€â”€ RunCommandToolTests.cs      ~12 tests                              â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ Search/                                                                 â”‚
â”‚  â”‚   â”œâ”€â”€ SearchFilesToolTests.cs     ~10 tests                              â”‚
â”‚  â”‚   â””â”€â”€ SearchContentToolTests.cs   ~12 tests                              â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ Workspace/                                                              â”‚
â”‚  â”‚   â””â”€â”€ WorkspaceToolTests.cs       ~10 tests                              â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ Git/                                                                    â”‚
â”‚      â””â”€â”€ GitToolTests.cs             ~15 tests                              â”‚
â”‚                                                                           â”‚
â”‚  Total: ~130 unit tests                                                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Specifications

### 1. BuiltInToolsExtensions.cs

**Location**: `src/SeniorIntern.Services/BuiltInToolsExtensions.cs`

```csharp
namespace SeniorIntern.Services;

using Microsoft.Extensions.DependencyInjection;
using SeniorIntern.Core.Tools;
using SeniorIntern.Services.Tools.FileSystem;
using SeniorIntern.Services.Tools.Terminal;
using SeniorIntern.Services.Tools.Search;
using SeniorIntern.Services.Tools.Workspace;
using SeniorIntern.Services.Tools.Git;

/// <summary>
/// Extension methods for registering built-in tools.
/// </summary>
/// <remarks>
/// <para>
/// Provides two registration options:
/// </para>
/// <list type="bullet">
/// <item><see cref="AddBuiltInTools"/> - Registers all 17 built-in tools</item>
/// <item><see cref="AddSafeBuiltInTools"/> - Registers only 8 read-only tools</item>
/// </list>
/// </remarks>
public static class BuiltInToolsExtensions
{
    #region Full Registration

    /// <summary>
    /// Registers all built-in tools with the service collection.
    /// </summary>
    /// <param name="services">The service collection.</param>
    /// <returns>The service collection for chaining.</returns>
    /// <remarks>
    /// Registers 17 tools across 5 categories:
    /// - File System (8): read, write, patch, delete, move, copy, list, create
    /// - Terminal (1): run
    /// - Search (2): files, content
    /// - Workspace (2): info, open-files
    /// - Git (3): status, diff, log
    /// </remarks>
    public static IServiceCollection AddBuiltInTools(this IServiceCollection services)
    {
        // File System Tools
        services.AddFileSystemTools();

        // Terminal Tools
        services.AddTerminalTools();

        // Search Tools
        services.AddSearchTools();

        // Workspace Tools
        services.AddWorkspaceTools();

        // Git Tools
        services.AddGitTools();

        return services;
    }

    #endregion

    #region Safe-Only Registration

    /// <summary>
    /// Registers only safe (read-only) built-in tools.
    /// </summary>
    /// <param name="services">The service collection.</param>
    /// <returns>The service collection for chaining.</returns>
    /// <remarks>
    /// Registers 8 safe tools that only read data:
    /// - ReadFileTool
    /// - ListDirectoryTool
    /// - SearchFilesTool
    /// - SearchContentTool
    /// - GetWorkspaceInfoTool
    /// - GetOpenFilesTool
    /// - GitStatusTool
    /// - GitDiffTool
    /// - GitLogTool
    /// </remarks>
    public static IServiceCollection AddSafeBuiltInTools(this IServiceCollection services)
    {
        // Safe file system tools
        services.AddSingleton<ITool, ReadFileTool>();
        services.AddSingleton<ITool, ListDirectoryTool>();

        // Safe search tools
        services.AddSingleton<ITool, SearchFilesTool>();
        services.AddSingleton<ITool, SearchContentTool>();

        // Safe workspace tools
        services.AddSingleton<ITool, GetWorkspaceInfoTool>();
        services.AddSingleton<ITool, GetOpenFilesTool>();

        // Safe git tools
        services.AddSingleton<ITool, GitStatusTool>();
        services.AddSingleton<ITool, GitDiffTool>();
        services.AddSingleton<ITool, GitLogTool>();

        return services;
    }

    #endregion

    #region Category Registration

    /// <summary>
    /// Registers all file system tools.
    /// </summary>
    public static IServiceCollection AddFileSystemTools(this IServiceCollection services)
    {
        // Read tools
        services.AddSingleton<ITool, ReadFileTool>();

        // Write tools
        services.AddSingleton<ITool, WriteFileTool>();
        services.AddSingleton<ITool, FilePatchTool>();

        // Management tools
        services.AddSingleton<ITool, DeleteFileTool>();
        services.AddSingleton<ITool, MoveFileTool>();
        services.AddSingleton<ITool, CopyFileTool>();

        // Directory tools
        services.AddSingleton<ITool, ListDirectoryTool>();
        services.AddSingleton<ITool, CreateDirectoryTool>();
        services.AddSingleton<ITool, DeleteDirectoryTool>();

        return services;
    }

    /// <summary>
    /// Registers all terminal tools.
    /// </summary>
    public static IServiceCollection AddTerminalTools(this IServiceCollection services)
    {
        services.AddSingleton<ITool, RunCommandTool>();
        return services;
    }

    /// <summary>
    /// Registers all search tools.
    /// </summary>
    public static IServiceCollection AddSearchTools(this IServiceCollection services)
    {
        services.AddSingleton<ITool, SearchFilesTool>();
        services.AddSingleton<ITool, SearchContentTool>();
        return services;
    }

    /// <summary>
    /// Registers all workspace tools.
    /// </summary>
    public static IServiceCollection AddWorkspaceTools(this IServiceCollection services)
    {
        services.AddSingleton<ITool, GetWorkspaceInfoTool>();
        services.AddSingleton<ITool, GetOpenFilesTool>();
        return services;
    }

    /// <summary>
    /// Registers all Git tools.
    /// </summary>
    public static IServiceCollection AddGitTools(this IServiceCollection services)
    {
        services.AddSingleton<ITool, GitStatusTool>();
        services.AddSingleton<ITool, GitDiffTool>();
        services.AddSingleton<ITool, GitLogTool>();
        return services;
    }

    #endregion
}
```

### 2. ToolTestHelpers.cs

**Location**: `tests/SeniorIntern.Tests/Tools/ToolTestHelpers.cs`

```csharp
namespace SeniorIntern.Tests.Tools;

using System.Text.Json;
using Microsoft.Extensions.Logging;
using Microsoft.Extensions.Logging.Abstractions;
using Moq;
using SeniorIntern.Core.Interfaces;
using SeniorIntern.Core.Models;
using SeniorIntern.Core.Tools;

/// <summary>
/// Shared utilities for tool testing.
/// </summary>
public static class ToolTestHelpers
{
    #region Temp Directory Management

    /// <summary>
    /// Creates a temporary directory for testing.
    /// </summary>
    public static string CreateTempDirectory()
    {
        var path = Path.Combine(Path.GetTempPath(), $"tool_test_{Guid.NewGuid()}");
        Directory.CreateDirectory(path);
        return path;
    }

    /// <summary>
    /// Cleans up a temporary directory.
    /// </summary>
    public static void CleanupTempDirectory(string path)
    {
        if (Directory.Exists(path))
        {
            Directory.Delete(path, recursive: true);
        }
    }

    #endregion

    #region Mock Creation

    /// <summary>
    /// Creates a mock workspace service pointing to the given path.
    /// </summary>
    public static IWorkspaceService CreateMockWorkspace(string rootPath)
    {
        var workspace = new Mock<Workspace>();
        workspace.Setup(w => w.RootPath).Returns(rootPath);
        workspace.Setup(w => w.DisplayName).Returns(Path.GetFileName(rootPath));

        var service = new Mock<IWorkspaceService>();
        service.Setup(s => s.CurrentWorkspace).Returns(workspace.Object);

        return service.Object;
    }

    /// <summary>
    /// Creates a real file system service.
    /// </summary>
    public static IFileSystemService CreateFileSystemService()
    {
        return new FileSystemService();
    }

    /// <summary>
    /// Creates a null logger for the specified type.
    /// </summary>
    public static ILogger<T> CreateNullLogger<T>()
    {
        return NullLogger<T>.Instance;
    }

    #endregion

    #region Context Creation

    /// <summary>
    /// Creates a tool execution context with the given parameters.
    /// </summary>
    public static ToolExecutionContext CreateContext(
        string workspacePath,
        Dictionary<string, object>? parameters = null)
    {
        var jsonParams = parameters != null
            ? JsonSerializer.SerializeToElement(parameters)
            : JsonSerializer.SerializeToElement(new { });

        return new ToolExecutionContext
        {
            WorkspacePath = workspacePath,
            Parameters = jsonParams,
            ConversationId = Guid.NewGuid().ToString(),
            RequestId = Guid.NewGuid()
        };
    }

    /// <summary>
    /// Creates a context with a file path parameter.
    /// </summary>
    public static ToolExecutionContext CreateFileContext(
        string workspacePath,
        string filePath,
        int? startLine = null,
        int? endLine = null)
    {
        var parameters = new Dictionary<string, object> { ["path"] = filePath };

        if (startLine.HasValue)
            parameters["start_line"] = startLine.Value;
        if (endLine.HasValue)
            parameters["end_line"] = endLine.Value;

        return CreateContext(workspacePath, parameters);
    }

    /// <summary>
    /// Creates a context for write operations.
    /// </summary>
    public static ToolExecutionContext CreateWriteContext(
        string workspacePath,
        string filePath,
        string content,
        bool overwrite = false)
    {
        return CreateContext(workspacePath, new Dictionary<string, object>
        {
            ["path"] = filePath,
            ["content"] = content,
            ["overwrite"] = overwrite
        });
    }

    #endregion

    #region Assertions

    /// <summary>
    /// Asserts that the result is successful.
    /// </summary>
    public static void AssertSuccess(ToolResult result, string? containsContent = null)
    {
        Assert.True(result.IsSuccess, $"Expected success but got error: {result.ErrorMessage}");

        if (containsContent != null)
        {
            Assert.Contains(containsContent, result.Content);
        }
    }

    /// <summary>
    /// Asserts that the result is a failure.
    /// </summary>
    public static void AssertFailure(ToolResult result, string? containsMessage = null)
    {
        Assert.False(result.IsSuccess, "Expected failure but got success");

        if (containsMessage != null)
        {
            Assert.Contains(containsMessage, result.ErrorMessage, StringComparison.OrdinalIgnoreCase);
        }
    }

    #endregion
}
```

### 3. ReadFileToolTests.cs

**Location**: `tests/SeniorIntern.Tests/Tools/FileSystem/ReadFileToolTests.cs`

```csharp
namespace SeniorIntern.Tests.Tools.FileSystem;

using SeniorIntern.Services.Tools.FileSystem;
using static SeniorIntern.Tests.Tools.ToolTestHelpers;

public class ReadFileToolTests : IAsyncLifetime
{
    private readonly string _tempDir;
    private readonly ReadFileTool _tool;

    public ReadFileToolTests()
    {
        _tempDir = CreateTempDirectory();

        var fileSystem = CreateFileSystemService();
        var workspace = CreateMockWorkspace(_tempDir);
        var logger = CreateNullLogger<ReadFileTool>();

        _tool = new ReadFileTool(fileSystem, workspace, logger);
    }

    #region Basic Operations

    [Fact]
    public async Task ExecuteAsync_ExistingFile_ReturnsContent()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "test.txt");
        await File.WriteAllTextAsync(filePath, "Hello\nWorld\nTest");
        var context = CreateFileContext(_tempDir, "test.txt");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "Hello");
        AssertSuccess(result, "World");
    }

    [Fact]
    public async Task ExecuteAsync_NonExistentFile_ReturnsError()
    {
        // Arrange
        var context = CreateFileContext(_tempDir, "nonexistent.txt");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "not found");
    }

    [Fact]
    public async Task ExecuteAsync_EmptyFile_ReturnsEmpty()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "empty.txt");
        await File.WriteAllTextAsync(filePath, "");
        var context = CreateFileContext(_tempDir, "empty.txt");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Empty(result.Content.Trim());
    }

    #endregion

    #region Line Filtering

    [Fact]
    public async Task ExecuteAsync_LineFilter_ReturnsFilteredLines()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "lines.txt");
        await File.WriteAllTextAsync(filePath, "Line1\nLine2\nLine3\nLine4\nLine5");
        var context = CreateFileContext(_tempDir, "lines.txt", startLine: 2, endLine: 4);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "Line2");
        AssertSuccess(result, "Line4");
        Assert.DoesNotContain("Line1", result.Content);
        Assert.DoesNotContain("Line5", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_StartLineOnly_ReturnsFromStart()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "lines.txt");
        await File.WriteAllTextAsync(filePath, "Line1\nLine2\nLine3");
        var context = CreateFileContext(_tempDir, "lines.txt", startLine: 2);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "Line2");
        AssertSuccess(result, "Line3");
        Assert.DoesNotContain("Line1", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_InvalidLineRange_ReturnsError()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "small.txt");
        await File.WriteAllTextAsync(filePath, "One\nTwo");
        var context = CreateFileContext(_tempDir, "small.txt", startLine: 10, endLine: 20);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "line");
    }

    #endregion

    #region Path Security

    [Fact]
    public async Task ExecuteAsync_DirectoryTraversal_ReturnsError()
    {
        // Arrange
        var context = CreateFileContext(_tempDir, "../../../etc/passwd");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "outside");
    }

    [Fact]
    public async Task ExecuteAsync_AbsolutePathOutsideWorkspace_ReturnsError()
    {
        // Arrange
        var context = CreateFileContext(_tempDir, "/etc/passwd");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result);
    }

    #endregion

    #region Line Numbers

    [Fact]
    public async Task ExecuteAsync_ShowLineNumbers_IncludesNumbers()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "numbered.txt");
        await File.WriteAllTextAsync(filePath, "First\nSecond\nThird");
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["path"] = "numbered.txt",
            ["show_line_numbers"] = true
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Matches(@"^\s*1[\s:|]", result.Content);
    }

    #endregion

    #region Encoding

    [Fact]
    public async Task ExecuteAsync_Utf8File_ReadsCorrectly()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "utf8.txt");
        await File.WriteAllTextAsync(filePath, "Hello ä¸–ç•Œ ğŸŒ");
        var context = CreateFileContext(_tempDir, "utf8.txt");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "ä¸–ç•Œ");
        AssertSuccess(result, "ğŸŒ");
    }

    #endregion

    #region Tool Metadata

    [Fact]
    public void Id_ReturnsExpectedValue()
    {
        Assert.Equal("file-read", _tool.Id);
    }

    [Fact]
    public void DefaultRiskLevel_IsSafe()
    {
        Assert.Equal(RiskLevel.Safe, _tool.DefaultRiskLevel);
    }

    [Fact]
    public void Category_IsFileSystem()
    {
        Assert.Equal(ToolCategory.FileSystem, _tool.Category);
    }

    #endregion

    #region Lifecycle

    public Task InitializeAsync() => Task.CompletedTask;

    public Task DisposeAsync()
    {
        CleanupTempDirectory(_tempDir);
        return Task.CompletedTask;
    }

    #endregion
}
```

### 4. WriteFileToolTests.cs (Template)

**Location**: `tests/SeniorIntern.Tests/Tools/FileSystem/WriteFileToolTests.cs`

```csharp
namespace SeniorIntern.Tests.Tools.FileSystem;

using SeniorIntern.Services.Tools.FileSystem;
using static SeniorIntern.Tests.Tools.ToolTestHelpers;

public class WriteFileToolTests : IAsyncLifetime
{
    private readonly string _tempDir;
    private readonly WriteFileTool _tool;

    public WriteFileToolTests()
    {
        _tempDir = CreateTempDirectory();

        var fileSystem = CreateFileSystemService();
        var workspace = CreateMockWorkspace(_tempDir);
        var logger = CreateNullLogger<WriteFileTool>();

        _tool = new WriteFileTool(fileSystem, workspace, logger);
    }

    [Fact]
    public async Task ExecuteAsync_NewFile_CreatesFile()
    {
        // Arrange
        var context = CreateWriteContext(_tempDir, "new.txt", "Hello World");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.True(File.Exists(Path.Combine(_tempDir, "new.txt")));
        Assert.Equal("Hello World", await File.ReadAllTextAsync(Path.Combine(_tempDir, "new.txt")));
    }

    [Fact]
    public async Task ExecuteAsync_ExistingFileNoOverwrite_ReturnsError()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "existing.txt");
        await File.WriteAllTextAsync(filePath, "Original");
        var context = CreateWriteContext(_tempDir, "existing.txt", "New Content", overwrite: false);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "exists");
        Assert.Equal("Original", await File.ReadAllTextAsync(filePath));
    }

    [Fact]
    public async Task ExecuteAsync_ExistingFileWithOverwrite_Overwrites()
    {
        // Arrange
        var filePath = Path.Combine(_tempDir, "overwrite.txt");
        await File.WriteAllTextAsync(filePath, "Original");
        var context = CreateWriteContext(_tempDir, "overwrite.txt", "New Content", overwrite: true);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Equal("New Content", await File.ReadAllTextAsync(filePath));
    }

    [Fact]
    public async Task ExecuteAsync_NestedPath_CreatesDirectories()
    {
        // Arrange
        var context = CreateWriteContext(_tempDir, "nested/deep/file.txt", "Content");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.True(File.Exists(Path.Combine(_tempDir, "nested/deep/file.txt")));
    }

    [Fact]
    public async Task ExecuteAsync_DirectoryTraversal_ReturnsError()
    {
        // Arrange
        var context = CreateWriteContext(_tempDir, "../outside.txt", "Evil");

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "outside");
    }

    [Fact]
    public void DefaultRiskLevel_IsMedium()
    {
        Assert.Equal(RiskLevel.Medium, _tool.DefaultRiskLevel);
    }

    public Task InitializeAsync() => Task.CompletedTask;

    public Task DisposeAsync()
    {
        CleanupTempDirectory(_tempDir);
        return Task.CompletedTask;
    }
}
```

### 5. SearchToolTests.cs (Template)

**Location**: `tests/SeniorIntern.Tests/Tools/Search/SearchToolTests.cs`

```csharp
namespace SeniorIntern.Tests.Tools.Search;

using SeniorIntern.Services.Tools.Search;
using static SeniorIntern.Tests.Tools.ToolTestHelpers;

public class SearchFilesToolTests : IAsyncLifetime
{
    private readonly string _tempDir;
    private readonly SearchFilesTool _tool;

    public SearchFilesToolTests()
    {
        _tempDir = CreateTempDirectory();

        var fileSystem = CreateFileSystemService();
        var workspace = CreateMockWorkspace(_tempDir);
        var logger = CreateNullLogger<SearchFilesTool>();

        _tool = new SearchFilesTool(fileSystem, workspace, logger);

        // Create test file structure
        CreateTestFiles();
    }

    private void CreateTestFiles()
    {
        Directory.CreateDirectory(Path.Combine(_tempDir, "src"));
        Directory.CreateDirectory(Path.Combine(_tempDir, "tests"));
        Directory.CreateDirectory(Path.Combine(_tempDir, "node_modules"));

        File.WriteAllText(Path.Combine(_tempDir, "src", "app.cs"), "// app");
        File.WriteAllText(Path.Combine(_tempDir, "src", "utils.cs"), "// utils");
        File.WriteAllText(Path.Combine(_tempDir, "tests", "test.cs"), "// test");
        File.WriteAllText(Path.Combine(_tempDir, "node_modules", "dep.js"), "// dep");
        File.WriteAllText(Path.Combine(_tempDir, "readme.md"), "# Readme");
    }

    [Fact]
    public async Task ExecuteAsync_SimplePattern_FindsFiles()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["pattern"] = "*.cs"
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        // Note: *.cs only matches in current dir, not recursively
    }

    [Fact]
    public async Task ExecuteAsync_RecursivePattern_FindsNestedFiles()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["pattern"] = "**/*.cs"
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Contains("app.cs", result.Content);
        Assert.Contains("utils.cs", result.Content);
        Assert.Contains("test.cs", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_DefaultExcludes_SkipsNodeModules()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["pattern"] = "**/*.js"
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        // node_modules should be excluded by default
        Assert.DoesNotContain("dep.js", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_NoMatches_ReturnsEmptyResult()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["pattern"] = "*.xyz"
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Contains("no files found", result.Content, StringComparison.OrdinalIgnoreCase);
    }

    [Fact]
    public void DefaultRiskLevel_IsSafe()
    {
        Assert.Equal(RiskLevel.Safe, _tool.DefaultRiskLevel);
    }

    public Task InitializeAsync() => Task.CompletedTask;

    public Task DisposeAsync()
    {
        CleanupTempDirectory(_tempDir);
        return Task.CompletedTask;
    }
}

public class SearchContentToolTests : IAsyncLifetime
{
    private readonly string _tempDir;
    private readonly SearchContentTool _tool;

    public SearchContentToolTests()
    {
        _tempDir = CreateTempDirectory();

        var fileSystem = CreateFileSystemService();
        var workspace = CreateMockWorkspace(_tempDir);
        var logger = CreateNullLogger<SearchContentTool>();

        _tool = new SearchContentTool(fileSystem, workspace, logger);

        // Create test files with content
        CreateTestFiles();
    }

    private void CreateTestFiles()
    {
        Directory.CreateDirectory(Path.Combine(_tempDir, "src"));
        File.WriteAllText(Path.Combine(_tempDir, "src", "app.cs"), 
            "public class AppService\n{\n    // TODO: Implement\n}");
        File.WriteAllText(Path.Combine(_tempDir, "src", "utils.cs"), 
            "public static class Utils\n{\n    // Helper methods\n}");
    }

    [Fact]
    public async Task ExecuteAsync_PlainText_FindsMatches()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["query"] = "TODO"
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Contains("TODO", result.Content);
        Assert.Contains("app.cs", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_Regex_FindsPatterns()
    {
        // Arrange
        var context = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["query"] = @"class\s+\w+Service",
            ["regex"] = true
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Contains("AppService", result.Content);
    }

    [Fact]
    public async Task ExecuteAsync_CaseSensitive_RespectsFlag()
    {
        // Arrange
        var contextInsensitive = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["query"] = "todo",
            ["case_sensitive"] = false
        });

        var contextSensitive = CreateContext(_tempDir, new Dictionary<string, object>
        {
            ["query"] = "todo",
            ["case_sensitive"] = true
        });

        // Act
        var insensitiveResult = await _tool.ExecuteAsync(contextInsensitive);
        var sensitiveResult = await _tool.ExecuteAsync(contextSensitive);

        // Assert
        AssertSuccess(insensitiveResult);
        Assert.Contains("TODO", insensitiveResult.Content);

        // Case-sensitive won't find "TODO" when searching for "todo"
        Assert.DoesNotContain("TODO", sensitiveResult.Content);
    }

    public Task InitializeAsync() => Task.CompletedTask;

    public Task DisposeAsync()
    {
        CleanupTempDirectory(_tempDir);
        return Task.CompletedTask;
    }
}
```

### 6. GitToolTests.cs (Template)

**Location**: `tests/SeniorIntern.Tests/Tools/Git/GitToolTests.cs`

```csharp
namespace SeniorIntern.Tests.Tools.Git;

using Moq;
using SeniorIntern.Core.Interfaces;
using SeniorIntern.Core.Models;
using SeniorIntern.Services.Tools.Git;
using static SeniorIntern.Tests.Tools.ToolTestHelpers;

public class GitStatusToolTests
{
    private readonly Mock<IGitService> _gitService;
    private readonly GitStatusTool _tool;
    private readonly string _workspacePath = "/test/workspace";

    public GitStatusToolTests()
    {
        _gitService = new Mock<IGitService>();
        var workspace = CreateMockWorkspace(_workspacePath);
        var logger = CreateNullLogger<GitStatusTool>();

        _tool = new GitStatusTool(_gitService.Object, workspace, logger);
    }

    [Fact]
    public async Task ExecuteAsync_CleanRepo_ShowsNoChanges()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(true);
        _gitService.Setup(g => g.GetCurrentBranchAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync("main");
        _gitService.Setup(g => g.GetDetailedStatusAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(new DetailedGitStatus());

        var context = CreateContext(_workspacePath);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "working tree clean");
    }

    [Fact]
    public async Task ExecuteAsync_ModifiedFiles_ShowsChanges()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(true);
        _gitService.Setup(g => g.GetCurrentBranchAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync("feature");
        _gitService.Setup(g => g.GetDetailedStatusAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(new DetailedGitStatus
            {
                ModifiedFiles = new List<string> { "src/app.cs", "src/utils.cs" }
            });

        var context = CreateContext(_workspacePath);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "modified");
        AssertSuccess(result, "app.cs");
    }

    [Fact]
    public async Task ExecuteAsync_NotGitRepo_ReturnsError()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(false);

        var context = CreateContext(_workspacePath);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertFailure(result, "Not a Git repository");
    }

    [Fact]
    public async Task ExecuteAsync_ShortFormat_UsesGitCodes()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(true);
        _gitService.Setup(g => g.GetCurrentBranchAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync("main");
        _gitService.Setup(g => g.GetDetailedStatusAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(new DetailedGitStatus
            {
                ModifiedFiles = new List<string> { "file.cs" },
                UntrackedFiles = new List<string> { "new.txt" }
            });

        var context = CreateContext(_workspacePath, new Dictionary<string, object>
        {
            ["short"] = true
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        Assert.Contains(" M ", result.Content);
        Assert.Contains("??", result.Content);
    }

    [Fact]
    public void DefaultRiskLevel_IsSafe()
    {
        Assert.Equal(RiskLevel.Safe, _tool.DefaultRiskLevel);
    }
}

public class GitLogToolTests
{
    private readonly Mock<IGitService> _gitService;
    private readonly GitLogTool _tool;
    private readonly string _workspacePath = "/test/workspace";

    public GitLogToolTests()
    {
        _gitService = new Mock<IGitService>();
        var workspace = CreateMockWorkspace(_workspacePath);
        var logger = CreateNullLogger<GitLogTool>();

        _tool = new GitLogTool(_gitService.Object, workspace, logger);
    }

    [Fact]
    public async Task ExecuteAsync_DefaultCount_Returns10Commits()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(true);
        _gitService.Setup(g => g.GetLogAsync(_workspacePath, It.IsAny<GitLogOptions>(), It.IsAny<CancellationToken>()))
            .ReturnsAsync(CreateTestCommits(10));

        var context = CreateContext(_workspacePath);

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result, "Showing 10 commits");
    }

    [Fact]
    public async Task ExecuteAsync_OnelineFormat_IsCompact()
    {
        // Arrange
        _gitService.Setup(g => g.IsGitRepositoryAsync(_workspacePath, It.IsAny<CancellationToken>()))
            .ReturnsAsync(true);
        _gitService.Setup(g => g.GetLogAsync(_workspacePath, It.IsAny<GitLogOptions>(), It.IsAny<CancellationToken>()))
            .ReturnsAsync(CreateTestCommits(3));

        var context = CreateContext(_workspacePath, new Dictionary<string, object>
        {
            ["oneline"] = true
        });

        // Act
        var result = await _tool.ExecuteAsync(context);

        // Assert
        AssertSuccess(result);
        // Oneline format has fewer lines
        Assert.True(result.Content.Split('\n').Length <= 5);
    }

    private static List<GitCommit> CreateTestCommits(int count)
    {
        return Enumerable.Range(1, count)
            .Select(i => new GitCommit
            {
                Hash = $"abc{i:D6}1234567890",
                Author = "Test Author",
                AuthorEmail = "test@example.com",
                Date = DateTime.Now.AddDays(-i),
                Subject = $"Commit message {i}"
            })
            .ToList();
    }
}
```

---

## File Summary

| File | Location | Purpose | Lines |
|------|----------|---------|-------|
| `BuiltInToolsExtensions.cs` | `Services/` | DI registration | ~140 |
| `ToolTestHelpers.cs` | `Tests/Tools/` | Shared test utils | ~120 |
| `ReadFileToolTests.cs` | `Tests/Tools/FileSystem/` | Read tool tests | ~180 |
| `WriteFileToolTests.cs` | `Tests/Tools/FileSystem/` | Write tool tests | ~100 |
| `FilePatchToolTests.cs` | `Tests/Tools/FileSystem/` | Patch tool tests | ~150 |
| `FileManagementToolTests.cs` | `Tests/Tools/FileSystem/` | Delete/move/copy tests | ~150 |
| `DirectoryToolTests.cs` | `Tests/Tools/FileSystem/` | Directory tool tests | ~120 |
| `RunCommandToolTests.cs` | `Tests/Tools/Terminal/` | Command tool tests | ~100 |
| `SearchToolTests.cs` | `Tests/Tools/Search/` | Search tool tests | ~180 |
| `GitToolTests.cs` | `Tests/Tools/Git/` | Git tool tests | ~200 |

---

## Test Coverage Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Test Coverage by Category                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Category        Tool                    Tests   Coverage Focus              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  FileSystem      ReadFileTool            15      Reading, filtering, encodingâ”‚
â”‚  FileSystem      WriteFileTool           10      Creating, overwriting       â”‚
â”‚  FileSystem      FilePatchTool           12      Patching, conflicts         â”‚
â”‚  FileSystem      DeleteFileTool          6       Safety, confirmation        â”‚
â”‚  FileSystem      MoveFileTool            6       Rename, cross-directory     â”‚
â”‚  FileSystem      CopyFileTool            6       Duplication, overwrite      â”‚
â”‚  FileSystem      ListDirectoryTool       8       Listing, filtering          â”‚
â”‚  FileSystem      CreateDirectoryTool     5       Creation, idempotency       â”‚
â”‚  FileSystem      DeleteDirectoryTool     8       Safety, recursive           â”‚
â”‚                                                                              â”‚
â”‚  Terminal        RunCommandTool          12      Execution, timeout, safety  â”‚
â”‚                                                                              â”‚
â”‚  Search          SearchFilesTool         10      Glob patterns, exclusions   â”‚
â”‚  Search          SearchContentTool       12      Regex, case sensitivity     â”‚
â”‚                                                                              â”‚
â”‚  Workspace       GetWorkspaceInfoTool    6       Detection, formatting       â”‚
â”‚  Workspace       GetOpenFilesTool        4       Listing, active file        â”‚
â”‚                                                                              â”‚
â”‚  Git             GitStatusTool           6       Status, formats             â”‚
â”‚  Git             GitDiffTool             6       Diffs, truncation           â”‚
â”‚  Git             GitLogTool              6       History, filters            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Total                                   ~130 tests                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Unit Test Plan

| Test Category | Description | Count |
|---------------|-------------|-------|
| Basic Operations | Core functionality | 40 |
| Path Security | Directory traversal prevention | 15 |
| Error Handling | Invalid inputs, missing files | 20 |
| Edge Cases | Empty files, large files, encoding | 20 |
| Risk Levels | Verify correct metadata | 15 |
| Execution Summary | Summary generation | 10 |
| Validation | Input validation | 10 |

---

## Acceptance Criteria

| ID | Criterion |
|----|-----------|
| AC-1 | All tools are registered via DI |
| AC-2 | Safe-only registration option works |
| AC-3 | Each tool has unit tests |
| AC-4 | Integration tests use temp directories |
| AC-5 | All tests pass in CI |

---

## Changelog Entry

```markdown
## v0.6.3j - Tool Registration & Testing

### Added
- `BuiltInToolsExtensions` for dependency injection
  - `AddBuiltInTools()` - Registers all 17 tools
  - `AddSafeBuiltInTools()` - Registers 8 read-only tools
  - Category methods: `AddFileSystemTools()`, `AddTerminalTools()`,
    `AddSearchTools()`, `AddWorkspaceTools()`, `AddGitTools()`
- `ToolTestHelpers` for shared test utilities
  - Temp directory management
  - Mock workspace creation
  - Context factory methods
  - Custom assertions
- Comprehensive test suites (~130 tests)
  - ReadFileToolTests (15 tests)
  - WriteFileToolTests (10 tests)
  - FilePatchToolTests (12 tests)
  - FileManagementToolTests (18 tests)
  - DirectoryToolTests (15 tests)
  - RunCommandToolTests (12 tests)
  - SearchToolTests (22 tests)
  - GitToolTests (18 tests)
  - WorkspaceToolTests (10 tests)

### Test Coverage
- Path security validation
- Error handling for missing files
- Line filtering and encoding
- Risk level verification
- Execution summary generation
```

---

## Complete v0.6.3 Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     v0.6.3 Built-in Tools - Complete Summary                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Sub-Version   Focus                        Files   Tools                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  v0.6.3a       File Read Tools              3       1 (ReadFileTool)         â”‚
â”‚  v0.6.3b       File Write Tools             4       2 (Write, Patch)         â”‚
â”‚  v0.6.3c       File Management Tools        3       3 (Delete, Move, Copy)   â”‚
â”‚  v0.6.3d       Directory Tools              5       3 (List, Create, Delete) â”‚
â”‚  v0.6.3e       Terminal Command Tool        3       1 (RunCommand)           â”‚
â”‚  v0.6.3f       File Search Tools            2       1 (SearchFiles)          â”‚
â”‚  v0.6.3g       Content Search Tools         3       1 (SearchContent)        â”‚
â”‚  v0.6.3h       Workspace Tools              3       2 (Info, OpenFiles)      â”‚
â”‚  v0.6.3i       Git Tools                    6       3 (Status, Diff, Log)    â”‚
â”‚  v0.6.3j       Registration & Testing       10      -                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  TOTAL                                      42      17 tools                 â”‚
â”‚                                                                              â”‚
â”‚  Estimated Total Effort: 6 days                                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timeline Estimate

| Version | Estimated Effort |
|---------|------------------|
| v0.6.3j | 1 day |
