<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:AIntern.Desktop.ViewModels"
        xmlns:views="using:AIntern.Desktop.Views"
        x:Class="AIntern.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="The Senior Intern"
        Width="1200" Height="800"
        MinWidth="800" MinHeight="600"
        Background="{DynamicResource WindowBackground}">

    <Grid RowDefinitions="*, Auto">
        <!-- Main Content -->
        <Grid Grid.Row="0" ColumnDefinitions="280, Auto, *">
            <!-- Sidebar -->
            <Border Grid.Column="0"
                    Background="{DynamicResource SidebarBackground}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,0,1,0">
                <DockPanel>
                    <!-- Model Selector at Top -->
                    <views:ModelSelectorView DockPanel.Dock="Top"
                                             DataContext="{Binding ModelSelectorViewModel}" />

                    <!-- Future: Chat History List -->
                    <Border DockPanel.Dock="Bottom" Padding="16">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Chat History"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource TextMuted}" />
                            <TextBlock Text="Coming in v0.2.0"
                                       Foreground="{DynamicResource TextMuted}"
                                       FontStyle="Italic"
                                       FontSize="12" />
                        </StackPanel>
                    </Border>
                </DockPanel>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1"
                          Width="4"
                          Background="Transparent"
                          ResizeDirection="Columns" />

            <!-- Chat Area -->
            <views:ChatView Grid.Column="2"
                            DataContext="{Binding ChatViewModel}" />
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="1"
                Background="{DynamicResource StatusBarBackground}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="12,6">
            <Grid ColumnDefinitions="*, Auto, Auto">
                <TextBlock Text="{Binding StatusMessage}"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextSecondary}" />

                <TextBlock Grid.Column="1"
                           Text="{Binding TokenInfo}"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextMuted}"
                           Margin="16,0" />

                <ProgressBar Grid.Column="2"
                             IsVisible="{Binding ChatViewModel.IsGenerating}"
                             IsIndeterminate="True"
                             Width="80"
                             Height="4" />
            </Grid>
        </Border>
    </Grid>

</Window>
