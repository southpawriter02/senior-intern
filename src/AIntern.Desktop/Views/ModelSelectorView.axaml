<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AIntern.Desktop.ViewModels"
             x:Class="AIntern.Desktop.Views.ModelSelectorView"
             x:DataType="vm:ModelSelectorViewModel">

    <Border Padding="16"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="0,0,0,1">
        <StackPanel Spacing="12">
            <TextBlock Text="Model"
                       FontWeight="SemiBold"
                       FontSize="14"
                       Foreground="{DynamicResource TextPrimary}" />

            <!-- Current Model Display -->
            <Border Background="{DynamicResource ControlBackground}"
                    CornerRadius="6"
                    Padding="12"
                    IsVisible="{Binding IsModelLoaded}">
                <Grid ColumnDefinitions="*, Auto">
                    <StackPanel>
                        <TextBlock Text="{Binding ModelFileName}"
                                   FontWeight="Medium"
                                   TextTrimming="CharacterEllipsis"
                                   Foreground="{DynamicResource TextPrimary}" />
                        <TextBlock Text="{Binding ModelSizeDisplay}"
                                   FontSize="12"
                                   Foreground="{DynamicResource TextMuted}" />
                    </StackPanel>
                    <Button Grid.Column="1"
                            Command="{Binding UnloadModelCommand}"
                            Content="Unload"
                            Theme="{StaticResource SubtleButton}"
                            VerticalAlignment="Center" />
                </Grid>
            </Border>

            <!-- Load Model Button -->
            <Button Command="{Binding SelectModelCommand}"
                    IsEnabled="{Binding !IsLoading}"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Center"
                    Theme="{StaticResource PrimaryButton}">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Load GGUF Model..."
                               VerticalAlignment="Center" />
                </StackPanel>
            </Button>

            <!-- Loading Progress -->
            <StackPanel IsVisible="{Binding IsLoading}" Spacing="8">
                <TextBlock Text="{Binding LoadingStage}"
                           Foreground="{DynamicResource TextMuted}"
                           FontSize="12" />
                <ProgressBar Value="{Binding LoadingProgress}"
                             Maximum="100"
                             Height="4" />
            </StackPanel>

            <!-- Error Display -->
            <Border IsVisible="{Binding HasError}"
                    Background="{DynamicResource ErrorBackground}"
                    CornerRadius="6"
                    Padding="12">
                <TextBlock Text="{Binding ErrorMessage}"
                           TextWrapping="Wrap"
                           Foreground="{DynamicResource ErrorForeground}"
                           FontSize="12" />
            </Border>
        </StackPanel>
    </Border>

</UserControl>
